(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function an(i,t){const e=new Set(i.split(","));return t?s=>e.has(s.toLowerCase()):s=>e.has(s)}const Z={},Pe=[],St=()=>{},sl=()=>!1,Hi=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),fn=i=>i.startsWith("onUpdate:"),ct=Object.assign,dn=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},nl=Object.prototype.hasOwnProperty,q=(i,t)=>nl.call(i,t),I=Array.isArray,ke=i=>Ki(i)==="[object Map]",wh=i=>Ki(i)==="[object Set]",V=i=>typeof i=="function",st=i=>typeof i=="string",Ve=i=>typeof i=="symbol",tt=i=>i!==null&&typeof i=="object",_h=i=>(tt(i)||V(i))&&V(i.then)&&V(i.catch),yh=Object.prototype.toString,Ki=i=>yh.call(i),rl=i=>Ki(i).slice(8,-1),Sh=i=>Ki(i)==="[object Object]",pn=i=>st(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,ki=an(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ji=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},hl=/-(\w)/g,Fe=Ji(i=>i.replace(hl,(t,e)=>e?e.toUpperCase():"")),ol=/\B([A-Z])/g,De=Ji(i=>i.replace(ol,"-$1").toLowerCase()),xh=Ji(i=>i.charAt(0).toUpperCase()+i.slice(1)),ms=Ji(i=>i?`on${xh(i)}`:""),he=(i,t)=>!Object.is(i,t),gs=(i,t)=>{for(let e=0;e<i.length;e++)i[e](t)},Wi=(i,t,e)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value:e})},ll=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let Yn;const Mh=()=>Yn||(Yn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function mn(i){if(I(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=st(s)?fl(s):mn(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(st(i)||tt(i))return i}const cl=/;(?![^(]*\))/g,ul=/:([^]+)/,al=/\/\*[^]*?\*\//g;function fl(i){const t={};return i.replace(al,"").split(cl).forEach(e=>{if(e){const s=e.split(ul);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Xi(i){let t="";if(st(i))t=i;else if(I(i))for(let e=0;e<i.length;e++){const s=Xi(i[e]);s&&(t+=s+" ")}else if(tt(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const dl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pl=an(dl);function Ch(i){return!!i||i===""}const Et=i=>st(i)?i:i==null?"":I(i)||tt(i)&&(i.toString===yh||!V(i.toString))?JSON.stringify(i,Lh,2):String(i),Lh=(i,t)=>t&&t.__v_isRef?Lh(i,t.value):ke(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n],r)=>(e[vs(s,r)+" =>"]=n,e),{})}:wh(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>vs(e))}:Ve(t)?vs(t):tt(t)&&!I(t)&&!Sh(t)?String(t):t,vs=(i,t="")=>{var e;return Ve(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vt;class Eh{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=vt,!t&&vt&&(this.index=(vt.scopes||(vt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=vt;try{return vt=this,t()}finally{vt=e}}}on(){vt=this}off(){vt=this.parent}stop(t){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function Oh(i){return new Eh(i)}function ml(i,t=vt){t&&t.active&&t.effects.push(i)}function Th(){return vt}function gl(i){vt&&vt.cleanups.push(i)}let de;class gn{constructor(t,e,s,n){this.fn=t,this.trigger=e,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ml(this,n)}get dirty(){if(this._dirtyLevel===1){ye();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(vl(e.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),Se()}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=ne,e=de;try{return ne=!0,de=this,this._runnings++,Gn(this),this.fn()}finally{Qn(this),this._runnings--,de=e,ne=t}}stop(){var t;this.active&&(Gn(this),Qn(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function vl(i){return i.value}function Gn(i){i._trackId++,i._depsLength=0}function Qn(i){if(i.deps&&i.deps.length>i._depsLength){for(let t=i._depsLength;t<i.deps.length;t++)Ph(i.deps[t],i);i.deps.length=i._depsLength}}function Ph(i,t){const e=i.get(t);e!==void 0&&t._trackId!==e&&(i.delete(t),i.size===0&&i.cleanup())}let ne=!0,js=0;const kh=[];function ye(){kh.push(ne),ne=!1}function Se(){const i=kh.pop();ne=i===void 0?!0:i}function vn(){js++}function bn(){for(js--;!js&&qs.length;)qs.shift()()}function Rh(i,t,e){if(t.get(i)!==i._trackId){t.set(i,i._trackId);const s=i.deps[i._depsLength];s!==t?(s&&Ph(s,i),i.deps[i._depsLength++]=t):i._depsLength++}}const qs=[];function zh(i,t,e){vn();for(const s of i.keys())if(s._dirtyLevel<t&&i.get(s)===s._trackId){const n=s._dirtyLevel;s._dirtyLevel=t,n===0&&(s._shouldSchedule=!0,s.trigger())}Nh(i),bn()}function Nh(i){for(const t of i.keys())t.scheduler&&t._shouldSchedule&&(!t._runnings||t.allowRecurse)&&i.get(t)===t._trackId&&(t._shouldSchedule=!1,qs.push(t.scheduler))}const Fh=(i,t)=>{const e=new Map;return e.cleanup=i,e.computed=t,e},Ai=new WeakMap,pe=Symbol(""),Hs=Symbol("");function mt(i,t,e){if(ne&&de){let s=Ai.get(i);s||Ai.set(i,s=new Map);let n=s.get(e);n||s.set(e,n=Fh(()=>s.delete(e))),Rh(de,n)}}function Kt(i,t,e,s,n,r){const h=Ai.get(i);if(!h)return;let o=[];if(t==="clear")o=[...h.values()];else if(e==="length"&&I(i)){const l=Number(s);h.forEach((c,u)=>{(u==="length"||!Ve(u)&&u>=l)&&o.push(c)})}else switch(e!==void 0&&o.push(h.get(e)),t){case"add":I(i)?pn(e)&&o.push(h.get("length")):(o.push(h.get(pe)),ke(i)&&o.push(h.get(Hs)));break;case"delete":I(i)||(o.push(h.get(pe)),ke(i)&&o.push(h.get(Hs)));break;case"set":ke(i)&&o.push(h.get(pe));break}vn();for(const l of o)l&&zh(l,2);bn()}function bl(i,t){var e;return(e=Ai.get(i))==null?void 0:e.get(t)}const wl=an("__proto__,__v_isRef,__isVue"),Wh=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Ve)),Zn=_l();function _l(){const i={};return["includes","indexOf","lastIndexOf"].forEach(t=>{i[t]=function(...e){const s=$(this);for(let r=0,h=this.length;r<h;r++)mt(s,"get",r+"");const n=s[t](...e);return n===-1||n===!1?s[t](...e.map($)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{i[t]=function(...e){ye(),vn();const s=$(this)[t].apply(this,e);return bn(),Se(),s}}),i}function yl(i){const t=$(this);return mt(t,"has",i),t.hasOwnProperty(i)}class Ah{constructor(t=!1,e=!1){this._isReadonly=t,this._shallow=e}get(t,e,s){const n=this._isReadonly,r=this._shallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?Nl:Dh:r?Vh:Bh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const h=I(t);if(!n){if(h&&q(Zn,e))return Reflect.get(Zn,e,s);if(e==="hasOwnProperty")return yl}const o=Reflect.get(t,e,s);return(Ve(e)?Wh.has(e):wl(e))||(n||mt(t,"get",e),r)?o:it(o)?h&&pn(e)?o:o.value:tt(o)?n?Uh(o):Gi(o):o}}class Ih extends Ah{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._shallow){const l=We(r);if(!Ii(s)&&!We(s)&&(r=$(r),s=$(s)),!I(t)&&it(r)&&!it(s))return l?!1:(r.value=s,!0)}const h=I(t)&&pn(e)?Number(e)<t.length:q(t,e),o=Reflect.set(t,e,s,n);return t===$(n)&&(h?he(s,r)&&Kt(t,"set",e,s):Kt(t,"add",e,s)),o}deleteProperty(t,e){const s=q(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&Kt(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!Ve(e)||!Wh.has(e))&&mt(t,"has",e),s}ownKeys(t){return mt(t,"iterate",I(t)?"length":pe),Reflect.ownKeys(t)}}class Sl extends Ah{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const xl=new Ih,Ml=new Sl,Cl=new Ih(!0),wn=i=>i,Yi=i=>Reflect.getPrototypeOf(i);function pi(i,t,e=!1,s=!1){i=i.__v_raw;const n=$(i),r=$(t);e||(he(t,r)&&mt(n,"get",t),mt(n,"get",r));const{has:h}=Yi(n),o=s?wn:e?Sn:ti;if(h.call(n,t))return o(i.get(t));if(h.call(n,r))return o(i.get(r));i!==n&&i.get(t)}function mi(i,t=!1){const e=this.__v_raw,s=$(e),n=$(i);return t||(he(i,n)&&mt(s,"has",i),mt(s,"has",n)),i===n?e.has(i):e.has(i)||e.has(n)}function gi(i,t=!1){return i=i.__v_raw,!t&&mt($(i),"iterate",pe),Reflect.get(i,"size",i)}function tr(i){i=$(i);const t=$(this);return Yi(t).has.call(t,i)||(t.add(i),Kt(t,"add",i,i)),this}function er(i,t){t=$(t);const e=$(this),{has:s,get:n}=Yi(e);let r=s.call(e,i);r||(i=$(i),r=s.call(e,i));const h=n.call(e,i);return e.set(i,t),r?he(t,h)&&Kt(e,"set",i,t):Kt(e,"add",i,t),this}function ir(i){const t=$(this),{has:e,get:s}=Yi(t);let n=e.call(t,i);n||(i=$(i),n=e.call(t,i)),s&&s.call(t,i);const r=t.delete(i);return n&&Kt(t,"delete",i,void 0),r}function sr(){const i=$(this),t=i.size!==0,e=i.clear();return t&&Kt(i,"clear",void 0,void 0),e}function vi(i,t){return function(s,n){const r=this,h=r.__v_raw,o=$(h),l=t?wn:i?Sn:ti;return!i&&mt(o,"iterate",pe),h.forEach((c,u)=>s.call(n,l(c),l(u),r))}}function bi(i,t,e){return function(...s){const n=this.__v_raw,r=$(n),h=ke(r),o=i==="entries"||i===Symbol.iterator&&h,l=i==="keys"&&h,c=n[i](...s),u=e?wn:t?Sn:ti;return!t&&mt(r,"iterate",l?Hs:pe),{next(){const{value:a,done:d}=c.next();return d?{value:a,done:d}:{value:o?[u(a[0]),u(a[1])]:u(a),done:d}},[Symbol.iterator](){return this}}}}function Qt(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function Ll(){const i={get(r){return pi(this,r)},get size(){return gi(this)},has:mi,add:tr,set:er,delete:ir,clear:sr,forEach:vi(!1,!1)},t={get(r){return pi(this,r,!1,!0)},get size(){return gi(this)},has:mi,add:tr,set:er,delete:ir,clear:sr,forEach:vi(!1,!0)},e={get(r){return pi(this,r,!0)},get size(){return gi(this,!0)},has(r){return mi.call(this,r,!0)},add:Qt("add"),set:Qt("set"),delete:Qt("delete"),clear:Qt("clear"),forEach:vi(!0,!1)},s={get(r){return pi(this,r,!0,!0)},get size(){return gi(this,!0)},has(r){return mi.call(this,r,!0)},add:Qt("add"),set:Qt("set"),delete:Qt("delete"),clear:Qt("clear"),forEach:vi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=bi(r,!1,!1),e[r]=bi(r,!0,!1),t[r]=bi(r,!1,!0),s[r]=bi(r,!0,!0)}),[i,e,t,s]}const[El,Ol,Tl,Pl]=Ll();function _n(i,t){const e=t?i?Pl:Tl:i?Ol:El;return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(q(e,n)&&n in s?e:s,n,r)}const kl={get:_n(!1,!1)},Rl={get:_n(!1,!0)},zl={get:_n(!0,!1)},Bh=new WeakMap,Vh=new WeakMap,Dh=new WeakMap,Nl=new WeakMap;function Fl(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Wl(i){return i.__v_skip||!Object.isExtensible(i)?0:Fl(rl(i))}function Gi(i){return We(i)?i:yn(i,!1,xl,kl,Bh)}function Al(i){return yn(i,!1,Cl,Rl,Vh)}function Uh(i){return yn(i,!0,Ml,zl,Dh)}function yn(i,t,e,s,n){if(!tt(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=n.get(i);if(r)return r;const h=Wl(i);if(h===0)return i;const o=new Proxy(i,h===2?s:e);return n.set(i,o),o}function Jt(i){return We(i)?Jt(i.__v_raw):!!(i&&i.__v_isReactive)}function We(i){return!!(i&&i.__v_isReadonly)}function Ii(i){return!!(i&&i.__v_isShallow)}function $h(i){return Jt(i)||We(i)}function $(i){const t=i&&i.__v_raw;return t?$(t):i}function Qi(i){return Wi(i,"__v_skip",!0),i}const ti=i=>tt(i)?Gi(i):i,Sn=i=>tt(i)?Uh(i):i;class jh{constructor(t,e,s,n){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new gn(()=>t(this._value),()=>Ri(this,1),()=>this.dep&&Nh(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const t=$(this);return(!t._cacheable||t.effect.dirty)&&he(t._value,t._value=t.effect.run())&&Ri(t,2),qh(t),t.effect._dirtyLevel>=1&&Ri(t,1),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Il(i,t,e=!1){let s,n;const r=V(i);return r?(s=i,n=St):(s=i.get,n=i.set),new jh(s,n,r||!n,e)}function qh(i){ne&&de&&(i=$(i),Rh(de,i.dep||(i.dep=Fh(()=>i.dep=void 0,i instanceof jh?i:void 0))))}function Ri(i,t=2,e){i=$(i);const s=i.dep;s&&zh(s,t)}function it(i){return!!(i&&i.__v_isRef===!0)}function fe(i){return Bl(i,!1)}function Bl(i,t){return it(i)?i:new Vl(i,t)}class Vl{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:$(t),this._value=e?t:ti(t)}get value(){return qh(this),this._value}set value(t){const e=this.__v_isShallow||Ii(t)||We(t);t=e?t:$(t),he(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:ti(t),Ri(this,2))}}function jt(i){return it(i)?i.value:i}const Dl={get:(i,t,e)=>jt(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return it(n)&&!it(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function Hh(i){return Jt(i)?i:new Proxy(i,Dl)}function Ul(i){const t=I(i)?new Array(i.length):{};for(const e in i)t[e]=Kh(i,e);return t}class $l{constructor(t,e,s){this._object=t,this._key=e,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return bl($(this._object),this._key)}}class jl{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function ql(i,t,e){return it(i)?i:V(i)?new jl(i):tt(i)&&arguments.length>1?Kh(i,t,e):fe(i)}function Kh(i,t,e){const s=i[t];return it(s)?s:new $l(i,t,e)}/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function re(i,t,e,s){let n;try{n=s?i(...s):i()}catch(r){Zi(r,t,e)}return n}function Pt(i,t,e,s){if(V(i)){const r=re(i,t,e,s);return r&&_h(r)&&r.catch(h=>{Zi(h,t,e)}),r}const n=[];for(let r=0;r<i.length;r++)n.push(Pt(i[r],t,e,s));return n}function Zi(i,t,e,s=!0){const n=t?t.vnode:null;if(t){let r=t.parent;const h=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${e}`;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](i,h,o)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){re(l,null,10,[i,h,o]);return}}Hl(i,e,n,s)}function Hl(i,t,e,s=!0){console.error(i)}let ei=!1,Ks=!1;const ot=[];let At=0;const Re=[];let ee=null,ae=0;const Jh=Promise.resolve();let xn=null;function Xh(i){const t=xn||Jh;return i?t.then(this?i.bind(this):i):t}function Kl(i){let t=At+1,e=ot.length;for(;t<e;){const s=t+e>>>1,n=ot[s],r=ii(n);r<i||r===i&&n.pre?t=s+1:e=s}return t}function Mn(i){(!ot.length||!ot.includes(i,ei&&i.allowRecurse?At+1:At))&&(i.id==null?ot.push(i):ot.splice(Kl(i.id),0,i),Yh())}function Yh(){!ei&&!Ks&&(Ks=!0,xn=Jh.then(Qh))}function Jl(i){const t=ot.indexOf(i);t>At&&ot.splice(t,1)}function Xl(i){I(i)?Re.push(...i):(!ee||!ee.includes(i,i.allowRecurse?ae+1:ae))&&Re.push(i),Yh()}function nr(i,t,e=ei?At+1:0){for(;e<ot.length;e++){const s=ot[e];if(s&&s.pre){if(i&&s.id!==i.uid)continue;ot.splice(e,1),e--,s()}}}function Gh(i){if(Re.length){const t=[...new Set(Re)].sort((e,s)=>ii(e)-ii(s));if(Re.length=0,ee){ee.push(...t);return}for(ee=t,ae=0;ae<ee.length;ae++)ee[ae]();ee=null,ae=0}}const ii=i=>i.id==null?1/0:i.id,Yl=(i,t)=>{const e=ii(i)-ii(t);if(e===0){if(i.pre&&!t.pre)return-1;if(t.pre&&!i.pre)return 1}return e};function Qh(i){Ks=!1,ei=!0,ot.sort(Yl);try{for(At=0;At<ot.length;At++){const t=ot[At];t&&t.active!==!1&&re(t,null,14)}}finally{At=0,ot.length=0,Gh(),ei=!1,xn=null,(ot.length||Re.length)&&Qh()}}function Gl(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||Z;let n=e;const r=t.startsWith("update:"),h=r&&t.slice(7);if(h&&h in s){const u=`${h==="modelValue"?"model":h}Modifiers`,{number:a,trim:d}=s[u]||Z;d&&(n=e.map(m=>st(m)?m.trim():m)),a&&(n=e.map(ll))}let o,l=s[o=ms(t)]||s[o=ms(Fe(t))];!l&&r&&(l=s[o=ms(De(t))]),l&&Pt(l,i,6,n);const c=s[o+"Once"];if(c){if(!i.emitted)i.emitted={};else if(i.emitted[o])return;i.emitted[o]=!0,Pt(c,i,6,n)}}function Zh(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let h={},o=!1;if(!V(i)){const l=c=>{const u=Zh(c,t,!0);u&&(o=!0,ct(h,u))};!e&&t.mixins.length&&t.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!r&&!o?(tt(i)&&s.set(i,null),null):(I(r)?r.forEach(l=>h[l]=null):ct(h,r),tt(i)&&s.set(i,h),h)}function ts(i,t){return!i||!Hi(t)?!1:(t=t.slice(2).replace(/Once$/,""),q(i,t[0].toLowerCase()+t.slice(1))||q(i,De(t))||q(i,t))}let Ot=null,to=null;function Bi(i){const t=Ot;return Ot=i,to=i&&i.type.__scopeId||null,t}function Ql(i,t=Ot,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&pr(-1);const r=Bi(t);let h;try{h=i(...n)}finally{Bi(r),s._d&&pr(1)}return h};return s._n=!0,s._c=!0,s._d=!0,s}function bs(i){const{type:t,vnode:e,proxy:s,withProxy:n,props:r,propsOptions:[h],slots:o,attrs:l,emit:c,render:u,renderCache:a,data:d,setupState:m,ctx:g,inheritAttrs:v}=i;let y,L;const z=Bi(i);try{if(e.shapeFlag&4){const R=n||s,B=R;y=Wt(u.call(B,R,a,r,m,d,g)),L=l}else{const R=t;y=Wt(R.length>1?R(r,{attrs:l,slots:o,emit:c}):R(r,null)),L=t.props?l:Zl(l)}}catch(R){Je.length=0,Zi(R,i,1),y=Vt(ge)}let P=y;if(L&&v!==!1){const R=Object.keys(L),{shapeFlag:B}=P;R.length&&B&7&&(h&&R.some(fn)&&(L=tc(L,h)),P=Ae(P,L))}return e.dirs&&(P=Ae(P),P.dirs=P.dirs?P.dirs.concat(e.dirs):e.dirs),e.transition&&(P.transition=e.transition),y=P,Bi(z),y}const Zl=i=>{let t;for(const e in i)(e==="class"||e==="style"||Hi(e))&&((t||(t={}))[e]=i[e]);return t},tc=(i,t)=>{const e={};for(const s in i)(!fn(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function ec(i,t,e){const{props:s,children:n,component:r}=i,{props:h,children:o,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return s?rr(s,h,c):!!h;if(l&8){const u=t.dynamicProps;for(let a=0;a<u.length;a++){const d=u[a];if(h[d]!==s[d]&&!ts(c,d))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:s===h?!1:s?h?rr(s,h,c):!0:!!h;return!1}function rr(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!ts(e,r))return!0}return!1}function ic({vnode:i,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=t.vnode).el=e,t=t.parent;else break}}const sc=Symbol.for("v-ndc"),nc=i=>i.__isSuspense;function rc(i,t){t&&t.pendingBranch?I(i)?t.effects.push(...i):t.effects.push(i):Xl(i)}const hc=Symbol.for("v-scx"),oc=()=>Ke(hc),wi={};function ze(i,t,e){return eo(i,t,e)}function eo(i,t,{immediate:e,deep:s,flush:n,once:r,onTrack:h,onTrigger:o}=Z){if(t&&r){const W=t;t=(...K)=>{W(...K),B()}}const l=lt,c=W=>s===!0?W:Ee(W,s===!1?1:void 0);let u,a=!1,d=!1;if(it(i)?(u=()=>i.value,a=Ii(i)):Jt(i)?(u=()=>c(i),a=!0):I(i)?(d=!0,a=i.some(W=>Jt(W)||Ii(W)),u=()=>i.map(W=>{if(it(W))return W.value;if(Jt(W))return c(W);if(V(W))return re(W,l,2)})):V(i)?t?u=()=>re(i,l,2):u=()=>(m&&m(),Pt(i,l,3,[g])):u=St,t&&s){const W=u;u=()=>Ee(W())}let m,g=W=>{m=P.onStop=()=>{re(W,l,4),m=P.onStop=void 0}},v;if(ns)if(g=St,t?e&&Pt(t,l,3,[u(),d?[]:void 0,g]):u(),n==="sync"){const W=oc();v=W.__watcherHandles||(W.__watcherHandles=[])}else return St;let y=d?new Array(i.length).fill(wi):wi;const L=()=>{if(!(!P.active||!P.dirty))if(t){const W=P.run();(s||a||(d?W.some((K,F)=>he(K,y[F])):he(W,y)))&&(m&&m(),Pt(t,l,3,[W,y===wi?void 0:d&&y[0]===wi?[]:y,g]),y=W)}else P.run()};L.allowRecurse=!!t;let z;n==="sync"?z=L:n==="post"?z=()=>ft(L,l&&l.suspense):(L.pre=!0,l&&(L.id=l.uid),z=()=>Mn(L));const P=new gn(u,St,z),R=Th(),B=()=>{P.stop(),R&&dn(R.effects,P)};return t?e?L():y=P.run():n==="post"?ft(P.run.bind(P),l&&l.suspense):P.run(),v&&v.push(B),B}function lc(i,t,e){const s=this.proxy,n=st(i)?i.includes(".")?io(s,i):()=>s[i]:i.bind(s,s);let r;V(t)?r=t:(r=t.handler,e=t);const h=ui(this),o=eo(n,r.bind(s),e);return h(),o}function io(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}function Ee(i,t,e=0,s){if(!tt(i)||i.__v_skip)return i;if(t&&t>0){if(e>=t)return i;e++}if(s=s||new Set,s.has(i))return i;if(s.add(i),it(i))Ee(i.value,t,e,s);else if(I(i))for(let n=0;n<i.length;n++)Ee(i[n],t,e,s);else if(wh(i)||ke(i))i.forEach(n=>{Ee(n,t,e,s)});else if(Sh(i))for(const n in i)Ee(i[n],t,e,s);return i}function le(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let h=0;h<n.length;h++){const o=n[h];r&&(o.oldValue=r[h].value);let l=o.dir[s];l&&(ye(),Pt(l,e,8,[i.el,o,i,t]),Se())}}const zi=i=>!!i.type.__asyncLoader,so=i=>i.type.__isKeepAlive;function cc(i,t){no(i,"a",t)}function uc(i,t){no(i,"da",t)}function no(i,t,e=lt){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(es(t,s,e),e){let n=e.parent;for(;n&&n.parent;)so(n.parent.vnode)&&ac(s,t,e,n),n=n.parent}}function ac(i,t,e,s){const n=es(t,i,s,!0);ho(()=>{dn(s[t],n)},e)}function es(i,t,e=lt,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...h)=>{if(e.isUnmounted)return;ye();const o=ui(e),l=Pt(t,e,i,h);return o(),Se(),l});return s?n.unshift(r):n.push(r),r}}const Xt=i=>(t,e=lt)=>(!ns||i==="sp")&&es(i,(...s)=>t(...s),e),fc=Xt("bm"),ro=Xt("m"),dc=Xt("bu"),pc=Xt("u"),mc=Xt("bum"),ho=Xt("um"),gc=Xt("sp"),vc=Xt("rtg"),bc=Xt("rtc");function wc(i,t=lt){es("ec",i,t)}function Vi(i,t,e,s){let n;const r=e&&e[s];if(I(i)||st(i)){n=new Array(i.length);for(let h=0,o=i.length;h<o;h++)n[h]=t(i[h],h,void 0,r&&r[h])}else if(typeof i=="number"){n=new Array(i);for(let h=0;h<i;h++)n[h]=t(h+1,h,void 0,r&&r[h])}else if(tt(i))if(i[Symbol.iterator])n=Array.from(i,(h,o)=>t(h,o,void 0,r&&r[o]));else{const h=Object.keys(i);n=new Array(h.length);for(let o=0,l=h.length;o<l;o++){const c=h[o];n[o]=t(i[c],c,o,r&&r[o])}}else n=[];return e&&(e[s]=n),n}const Js=i=>i?_o(i)?On(i)||i.proxy:Js(i.parent):null,He=ct(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Js(i.parent),$root:i=>Js(i.root),$emit:i=>i.emit,$options:i=>Cn(i),$forceUpdate:i=>i.f||(i.f=()=>{i.effect.dirty=!0,Mn(i.update)}),$nextTick:i=>i.n||(i.n=Xh.bind(i.proxy)),$watch:i=>lc.bind(i)}),ws=(i,t)=>i!==Z&&!i.__isScriptSetup&&q(i,t),_c={get({_:i},t){const{ctx:e,setupState:s,data:n,props:r,accessCache:h,type:o,appContext:l}=i;let c;if(t[0]!=="$"){const m=h[t];if(m!==void 0)switch(m){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(ws(s,t))return h[t]=1,s[t];if(n!==Z&&q(n,t))return h[t]=2,n[t];if((c=i.propsOptions[0])&&q(c,t))return h[t]=3,r[t];if(e!==Z&&q(e,t))return h[t]=4,e[t];Xs&&(h[t]=0)}}const u=He[t];let a,d;if(u)return t==="$attrs"&&mt(i,"get",t),u(i);if((a=o.__cssModules)&&(a=a[t]))return a;if(e!==Z&&q(e,t))return h[t]=4,e[t];if(d=l.config.globalProperties,q(d,t))return d[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return ws(n,t)?(n[t]=e,!0):s!==Z&&q(s,t)?(s[t]=e,!0):q(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},h){let o;return!!e[h]||i!==Z&&q(i,h)||ws(t,h)||(o=r[0])&&q(o,h)||q(s,h)||q(He,h)||q(n.config.globalProperties,h)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:q(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function hr(i){return I(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let Xs=!0;function yc(i){const t=Cn(i),e=i.proxy,s=i.ctx;Xs=!1,t.beforeCreate&&or(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:h,watch:o,provide:l,inject:c,created:u,beforeMount:a,mounted:d,beforeUpdate:m,updated:g,activated:v,deactivated:y,beforeDestroy:L,beforeUnmount:z,destroyed:P,unmounted:R,render:B,renderTracked:W,renderTriggered:K,errorCaptured:F,serverPrefetch:D,expose:Y,inheritAttrs:ht,components:bt,directives:Dt,filters:Ut}=t;if(c&&Sc(c,s,null),h)for(const X in h){const H=h[X];V(H)&&(s[X]=H.bind(e))}if(n){const X=n.call(e,e);tt(X)&&(i.data=Gi(X))}if(Xs=!0,r)for(const X in r){const H=r[X],Mt=V(H)?H.bind(e,e):V(H.get)?H.get.bind(e,e):St,Gt=!V(H)&&V(H.set)?H.set.bind(e):St,Ct=ri({get:Mt,set:Gt});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>Ct.value,set:Rt=>Ct.value=Rt})}if(o)for(const X in o)oo(o[X],s,e,X);if(l){const X=V(l)?l.call(e):l;Reflect.ownKeys(X).forEach(H=>{Oc(H,X[H])})}u&&or(u,i,"c");function j(X,H){I(H)?H.forEach(Mt=>X(Mt.bind(e))):H&&X(H.bind(e))}if(j(fc,a),j(ro,d),j(dc,m),j(pc,g),j(cc,v),j(uc,y),j(wc,F),j(bc,W),j(vc,K),j(mc,z),j(ho,R),j(gc,D),I(Y))if(Y.length){const X=i.exposed||(i.exposed={});Y.forEach(H=>{Object.defineProperty(X,H,{get:()=>e[H],set:Mt=>e[H]=Mt})})}else i.exposed||(i.exposed={});B&&i.render===St&&(i.render=B),ht!=null&&(i.inheritAttrs=ht),bt&&(i.components=bt),Dt&&(i.directives=Dt)}function Sc(i,t,e=St){I(i)&&(i=Ys(i));for(const s in i){const n=i[s];let r;tt(n)?"default"in n?r=Ke(n.from||s,n.default,!0):r=Ke(n.from||s):r=Ke(n),it(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:h=>r.value=h}):t[s]=r}}function or(i,t,e){Pt(I(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function oo(i,t,e,s){const n=s.includes(".")?io(e,s):()=>e[s];if(st(i)){const r=t[i];V(r)&&ze(n,r)}else if(V(i))ze(n,i.bind(e));else if(tt(i))if(I(i))i.forEach(r=>oo(r,t,e,s));else{const r=V(i.handler)?i.handler.bind(e):t[i.handler];V(r)&&ze(n,r,i)}}function Cn(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:h}}=i.appContext,o=r.get(t);let l;return o?l=o:!n.length&&!e&&!s?l=t:(l={},n.length&&n.forEach(c=>Di(l,c,h,!0)),Di(l,t,h)),tt(t)&&r.set(t,l),l}function Di(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&Di(i,r,e,!0),n&&n.forEach(h=>Di(i,h,e,!0));for(const h in t)if(!(s&&h==="expose")){const o=xc[h]||e&&e[h];i[h]=o?o(i[h],t[h]):t[h]}return i}const xc={data:lr,props:cr,emits:cr,methods:qe,computed:qe,beforeCreate:ut,created:ut,beforeMount:ut,mounted:ut,beforeUpdate:ut,updated:ut,beforeDestroy:ut,beforeUnmount:ut,destroyed:ut,unmounted:ut,activated:ut,deactivated:ut,errorCaptured:ut,serverPrefetch:ut,components:qe,directives:qe,watch:Cc,provide:lr,inject:Mc};function lr(i,t){return t?i?function(){return ct(V(i)?i.call(this,this):i,V(t)?t.call(this,this):t)}:t:i}function Mc(i,t){return qe(Ys(i),Ys(t))}function Ys(i){if(I(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function ut(i,t){return i?[...new Set([].concat(i,t))]:t}function qe(i,t){return i?ct(Object.create(null),i,t):t}function cr(i,t){return i?I(i)&&I(t)?[...new Set([...i,...t])]:ct(Object.create(null),hr(i),hr(t??{})):t}function Cc(i,t){if(!i)return t;if(!t)return i;const e=ct(Object.create(null),i);for(const s in t)e[s]=ut(i[s],t[s]);return e}function lo(){return{app:null,config:{isNativeTag:sl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Lc=0;function Ec(i,t){return function(s,n=null){V(s)||(s=ct({},s)),n!=null&&!tt(n)&&(n=null);const r=lo(),h=new WeakSet;let o=!1;const l=r.app={_uid:Lc++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:eu,get config(){return r.config},set config(c){},use(c,...u){return h.has(c)||(c&&V(c.install)?(h.add(c),c.install(l,...u)):V(c)&&(h.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,a){if(!o){const d=Vt(s,n);return d.appContext=r,a===!0?a="svg":a===!1&&(a=void 0),u&&t?t(d,c):i(d,c,a),o=!0,l._container=c,c.__vue_app__=l,On(d.component)||d.component.proxy}},unmount(){o&&(i(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){si=l;try{return c()}finally{si=null}}};return l}}let si=null;function Oc(i,t){if(lt){let e=lt.provides;const s=lt.parent&&lt.parent.provides;s===e&&(e=lt.provides=Object.create(s)),e[i]=t}}function Ke(i,t,e=!1){const s=lt||Ot;if(s||si){const n=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:si._context.provides;if(n&&i in n)return n[i];if(arguments.length>1)return e&&V(t)?t.call(s&&s.proxy):t}}function Tc(){return!!(lt||Ot||si)}function Pc(i,t,e,s=!1){const n={},r={};Wi(r,ss,1),i.propsDefaults=Object.create(null),co(i,t,n,r);for(const h in i.propsOptions[0])h in n||(n[h]=void 0);e?i.props=s?n:Al(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function kc(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:h}}=i,o=$(n),[l]=i.propsOptions;let c=!1;if((s||h>0)&&!(h&16)){if(h&8){const u=i.vnode.dynamicProps;for(let a=0;a<u.length;a++){let d=u[a];if(ts(i.emitsOptions,d))continue;const m=t[d];if(l)if(q(r,d))m!==r[d]&&(r[d]=m,c=!0);else{const g=Fe(d);n[g]=Gs(l,o,g,m,i,!1)}else m!==r[d]&&(r[d]=m,c=!0)}}}else{co(i,t,n,r)&&(c=!0);let u;for(const a in o)(!t||!q(t,a)&&((u=De(a))===a||!q(t,u)))&&(l?e&&(e[a]!==void 0||e[u]!==void 0)&&(n[a]=Gs(l,o,a,void 0,i,!0)):delete n[a]);if(r!==o)for(const a in r)(!t||!q(t,a))&&(delete r[a],c=!0)}c&&Kt(i,"set","$attrs")}function co(i,t,e,s){const[n,r]=i.propsOptions;let h=!1,o;if(t)for(let l in t){if(ki(l))continue;const c=t[l];let u;n&&q(n,u=Fe(l))?!r||!r.includes(u)?e[u]=c:(o||(o={}))[u]=c:ts(i.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,h=!0)}if(r){const l=$(e),c=o||Z;for(let u=0;u<r.length;u++){const a=r[u];e[a]=Gs(n,l,a,c[a],i,!q(c,a))}}return h}function Gs(i,t,e,s,n,r){const h=i[e];if(h!=null){const o=q(h,"default");if(o&&s===void 0){const l=h.default;if(h.type!==Function&&!h.skipFactory&&V(l)){const{propsDefaults:c}=n;if(e in c)s=c[e];else{const u=ui(n);s=c[e]=l.call(null,t),u()}}else s=l}h[0]&&(r&&!o?s=!1:h[1]&&(s===""||s===De(e))&&(s=!0))}return s}function uo(i,t,e=!1){const s=t.propsCache,n=s.get(i);if(n)return n;const r=i.props,h={},o=[];let l=!1;if(!V(i)){const u=a=>{l=!0;const[d,m]=uo(a,t,!0);ct(h,d),m&&o.push(...m)};!e&&t.mixins.length&&t.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!r&&!l)return tt(i)&&s.set(i,Pe),Pe;if(I(r))for(let u=0;u<r.length;u++){const a=Fe(r[u]);ur(a)&&(h[a]=Z)}else if(r)for(const u in r){const a=Fe(u);if(ur(a)){const d=r[u],m=h[a]=I(d)||V(d)?{type:d}:ct({},d);if(m){const g=dr(Boolean,m.type),v=dr(String,m.type);m[0]=g>-1,m[1]=v<0||g<v,(g>-1||q(m,"default"))&&o.push(a)}}}const c=[h,o];return tt(i)&&s.set(i,c),c}function ur(i){return i[0]!=="$"}function ar(i){const t=i&&i.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:i===null?"null":""}function fr(i,t){return ar(i)===ar(t)}function dr(i,t){return I(t)?t.findIndex(e=>fr(e,i)):V(t)&&fr(t,i)?0:-1}const ao=i=>i[0]==="_"||i==="$stable",Ln=i=>I(i)?i.map(Wt):[Wt(i)],Rc=(i,t,e)=>{if(t._n)return t;const s=Ql((...n)=>Ln(t(...n)),e);return s._c=!1,s},fo=(i,t,e)=>{const s=i._ctx;for(const n in i){if(ao(n))continue;const r=i[n];if(V(r))t[n]=Rc(n,r,s);else if(r!=null){const h=Ln(r);t[n]=()=>h}}},po=(i,t)=>{const e=Ln(t);i.slots.default=()=>e},zc=(i,t)=>{if(i.vnode.shapeFlag&32){const e=t._;e?(i.slots=$(t),Wi(t,"_",e)):fo(t,i.slots={})}else i.slots={},t&&po(i,t);Wi(i.slots,ss,1)},Nc=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,h=Z;if(s.shapeFlag&32){const o=t._;o?e&&o===1?r=!1:(ct(n,t),!e&&o===1&&delete n._):(r=!t.$stable,fo(t,n)),h=t}else t&&(po(i,t),h={default:1});if(r)for(const o in n)!ao(o)&&h[o]==null&&delete n[o]};function Qs(i,t,e,s,n=!1){if(I(i)){i.forEach((d,m)=>Qs(d,t&&(I(t)?t[m]:t),e,s,n));return}if(zi(s)&&!n)return;const r=s.shapeFlag&4?On(s.component)||s.component.proxy:s.el,h=n?null:r,{i:o,r:l}=i,c=t&&t.r,u=o.refs===Z?o.refs={}:o.refs,a=o.setupState;if(c!=null&&c!==l&&(st(c)?(u[c]=null,q(a,c)&&(a[c]=null)):it(c)&&(c.value=null)),V(l))re(l,o,12,[h,u]);else{const d=st(l),m=it(l),g=i.f;if(d||m){const v=()=>{if(g){const y=d?q(a,l)?a[l]:u[l]:l.value;n?I(y)&&dn(y,r):I(y)?y.includes(r)||y.push(r):d?(u[l]=[r],q(a,l)&&(a[l]=u[l])):(l.value=[r],i.k&&(u[i.k]=l.value))}else d?(u[l]=h,q(a,l)&&(a[l]=h)):m&&(l.value=h,i.k&&(u[i.k]=h))};n||g?v():(v.id=-1,ft(v,e))}}}const ft=rc;function Fc(i){return Wc(i)}function Wc(i,t){const e=Mh();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:h,createText:o,createComment:l,setText:c,setElementText:u,parentNode:a,nextSibling:d,setScopeId:m=St,insertStaticContent:g}=i,v=(f,p,b,w=null,_=null,C=null,O=void 0,M=null,E=!!p.dynamicChildren)=>{if(f===p)return;f&&!$e(f,p)&&(w=di(f),Rt(f,_,C,!0),f=null),p.patchFlag===-2&&(E=!1,p.dynamicChildren=null);const{type:S,ref:T,shapeFlag:N}=p;switch(S){case is:y(f,p,b,w);break;case ge:L(f,p,b,w);break;case ys:f==null&&z(p,b,w,O);break;case dt:bt(f,p,b,w,_,C,O,M,E);break;default:N&1?B(f,p,b,w,_,C,O,M,E):N&6?Dt(f,p,b,w,_,C,O,M,E):(N&64||N&128)&&S.process(f,p,b,w,_,C,O,M,E,xe)}T!=null&&_&&Qs(T,f&&f.ref,C,p||f,!p)},y=(f,p,b,w)=>{if(f==null)s(p.el=o(p.children),b,w);else{const _=p.el=f.el;p.children!==f.children&&c(_,p.children)}},L=(f,p,b,w)=>{f==null?s(p.el=l(p.children||""),b,w):p.el=f.el},z=(f,p,b,w)=>{[f.el,f.anchor]=g(f.children,p,b,w,f.el,f.anchor)},P=({el:f,anchor:p},b,w)=>{let _;for(;f&&f!==p;)_=d(f),s(f,b,w),f=_;s(p,b,w)},R=({el:f,anchor:p})=>{let b;for(;f&&f!==p;)b=d(f),n(f),f=b;n(p)},B=(f,p,b,w,_,C,O,M,E)=>{p.type==="svg"?O="svg":p.type==="math"&&(O="mathml"),f==null?W(p,b,w,_,C,O,M,E):D(f,p,_,C,O,M,E)},W=(f,p,b,w,_,C,O,M)=>{let E,S;const{props:T,shapeFlag:N,transition:k,dirs:A}=f;if(E=f.el=h(f.type,C,T&&T.is,T),N&8?u(E,f.children):N&16&&F(f.children,E,null,w,_,_s(f,C),O,M),A&&le(f,null,w,"created"),K(E,f,f.scopeId,O,w),T){for(const J in T)J!=="value"&&!ki(J)&&r(E,J,null,T[J],C,f.children,w,_,$t);"value"in T&&r(E,"value",null,T.value,C),(S=T.onVnodeBeforeMount)&&Nt(S,w,f)}A&&le(f,null,w,"beforeMount");const U=Ac(_,k);U&&k.beforeEnter(E),s(E,p,b),((S=T&&T.onVnodeMounted)||U||A)&&ft(()=>{S&&Nt(S,w,f),U&&k.enter(E),A&&le(f,null,w,"mounted")},_)},K=(f,p,b,w,_)=>{if(b&&m(f,b),w)for(let C=0;C<w.length;C++)m(f,w[C]);if(_){let C=_.subTree;if(p===C){const O=_.vnode;K(f,O,O.scopeId,O.slotScopeIds,_.parent)}}},F=(f,p,b,w,_,C,O,M,E=0)=>{for(let S=E;S<f.length;S++){const T=f[S]=M?ie(f[S]):Wt(f[S]);v(null,T,p,b,w,_,C,O,M)}},D=(f,p,b,w,_,C,O)=>{const M=p.el=f.el;let{patchFlag:E,dynamicChildren:S,dirs:T}=p;E|=f.patchFlag&16;const N=f.props||Z,k=p.props||Z;let A;if(b&&ce(b,!1),(A=k.onVnodeBeforeUpdate)&&Nt(A,b,p,f),T&&le(p,f,b,"beforeUpdate"),b&&ce(b,!0),S?Y(f.dynamicChildren,S,M,b,w,_s(p,_),C):O||H(f,p,M,null,b,w,_s(p,_),C,!1),E>0){if(E&16)ht(M,p,N,k,b,w,_);else if(E&2&&N.class!==k.class&&r(M,"class",null,k.class,_),E&4&&r(M,"style",N.style,k.style,_),E&8){const U=p.dynamicProps;for(let J=0;J<U.length;J++){const Q=U[J],nt=N[Q],Lt=k[Q];(Lt!==nt||Q==="value")&&r(M,Q,nt,Lt,_,f.children,b,w,$t)}}E&1&&f.children!==p.children&&u(M,p.children)}else!O&&S==null&&ht(M,p,N,k,b,w,_);((A=k.onVnodeUpdated)||T)&&ft(()=>{A&&Nt(A,b,p,f),T&&le(p,f,b,"updated")},w)},Y=(f,p,b,w,_,C,O)=>{for(let M=0;M<p.length;M++){const E=f[M],S=p[M],T=E.el&&(E.type===dt||!$e(E,S)||E.shapeFlag&70)?a(E.el):b;v(E,S,T,null,w,_,C,O,!0)}},ht=(f,p,b,w,_,C,O)=>{if(b!==w){if(b!==Z)for(const M in b)!ki(M)&&!(M in w)&&r(f,M,b[M],null,O,p.children,_,C,$t);for(const M in w){if(ki(M))continue;const E=w[M],S=b[M];E!==S&&M!=="value"&&r(f,M,S,E,O,p.children,_,C,$t)}"value"in w&&r(f,"value",b.value,w.value,O)}},bt=(f,p,b,w,_,C,O,M,E)=>{const S=p.el=f?f.el:o(""),T=p.anchor=f?f.anchor:o("");let{patchFlag:N,dynamicChildren:k,slotScopeIds:A}=p;A&&(M=M?M.concat(A):A),f==null?(s(S,b,w),s(T,b,w),F(p.children||[],b,T,_,C,O,M,E)):N>0&&N&64&&k&&f.dynamicChildren?(Y(f.dynamicChildren,k,b,_,C,O,M),(p.key!=null||_&&p===_.subTree)&&mo(f,p,!0)):H(f,p,b,T,_,C,O,M,E)},Dt=(f,p,b,w,_,C,O,M,E)=>{p.slotScopeIds=M,f==null?p.shapeFlag&512?_.ctx.activate(p,b,w,O,E):Ut(p,b,w,_,C,O,E):xt(f,p,E)},Ut=(f,p,b,w,_,C,O)=>{const M=f.component=Xc(f,w,_);if(so(f)&&(M.ctx.renderer=xe),Yc(M),M.asyncDep){if(_&&_.registerDep(M,j),!f.el){const E=M.subTree=Vt(ge);L(null,E,p,b)}}else j(M,f,p,b,_,C,O)},xt=(f,p,b)=>{const w=p.component=f.component;if(ec(f,p,b))if(w.asyncDep&&!w.asyncResolved){X(w,p,b);return}else w.next=p,Jl(w.update),w.effect.dirty=!0,w.update();else p.el=f.el,w.vnode=p},j=(f,p,b,w,_,C,O)=>{const M=()=>{if(f.isMounted){let{next:T,bu:N,u:k,parent:A,vnode:U}=f;{const Me=go(f);if(Me){T&&(T.el=U.el,X(f,T,O)),Me.asyncDep.then(()=>{f.isUnmounted||M()});return}}let J=T,Q;ce(f,!1),T?(T.el=U.el,X(f,T,O)):T=U,N&&gs(N),(Q=T.props&&T.props.onVnodeBeforeUpdate)&&Nt(Q,A,T,U),ce(f,!0);const nt=bs(f),Lt=f.subTree;f.subTree=nt,v(Lt,nt,a(Lt.el),di(Lt),f,_,C),T.el=nt.el,J===null&&ic(f,nt.el),k&&ft(k,_),(Q=T.props&&T.props.onVnodeUpdated)&&ft(()=>Nt(Q,A,T,U),_)}else{let T;const{el:N,props:k}=p,{bm:A,m:U,parent:J}=f,Q=zi(p);if(ce(f,!1),A&&gs(A),!Q&&(T=k&&k.onVnodeBeforeMount)&&Nt(T,J,p),ce(f,!0),N&&ps){const nt=()=>{f.subTree=bs(f),ps(N,f.subTree,f,_,null)};Q?p.type.__asyncLoader().then(()=>!f.isUnmounted&&nt()):nt()}else{const nt=f.subTree=bs(f);v(null,nt,b,w,f,_,C),p.el=nt.el}if(U&&ft(U,_),!Q&&(T=k&&k.onVnodeMounted)){const nt=p;ft(()=>Nt(T,J,nt),_)}(p.shapeFlag&256||J&&zi(J.vnode)&&J.vnode.shapeFlag&256)&&f.a&&ft(f.a,_),f.isMounted=!0,p=b=w=null}},E=f.effect=new gn(M,St,()=>Mn(S),f.scope),S=f.update=()=>{E.dirty&&E.run()};S.id=f.uid,ce(f,!0),S()},X=(f,p,b)=>{p.component=f;const w=f.vnode.props;f.vnode=p,f.next=null,kc(f,p.props,w,b),Nc(f,p.children,b),ye(),nr(f),Se()},H=(f,p,b,w,_,C,O,M,E=!1)=>{const S=f&&f.children,T=f?f.shapeFlag:0,N=p.children,{patchFlag:k,shapeFlag:A}=p;if(k>0){if(k&128){Gt(S,N,b,w,_,C,O,M,E);return}else if(k&256){Mt(S,N,b,w,_,C,O,M,E);return}}A&8?(T&16&&$t(S,_,C),N!==S&&u(b,N)):T&16?A&16?Gt(S,N,b,w,_,C,O,M,E):$t(S,_,C,!0):(T&8&&u(b,""),A&16&&F(N,b,w,_,C,O,M,E))},Mt=(f,p,b,w,_,C,O,M,E)=>{f=f||Pe,p=p||Pe;const S=f.length,T=p.length,N=Math.min(S,T);let k;for(k=0;k<N;k++){const A=p[k]=E?ie(p[k]):Wt(p[k]);v(f[k],A,b,null,_,C,O,M,E)}S>T?$t(f,_,C,!0,!1,N):F(p,b,w,_,C,O,M,E,N)},Gt=(f,p,b,w,_,C,O,M,E)=>{let S=0;const T=p.length;let N=f.length-1,k=T-1;for(;S<=N&&S<=k;){const A=f[S],U=p[S]=E?ie(p[S]):Wt(p[S]);if($e(A,U))v(A,U,b,null,_,C,O,M,E);else break;S++}for(;S<=N&&S<=k;){const A=f[N],U=p[k]=E?ie(p[k]):Wt(p[k]);if($e(A,U))v(A,U,b,null,_,C,O,M,E);else break;N--,k--}if(S>N){if(S<=k){const A=k+1,U=A<T?p[A].el:w;for(;S<=k;)v(null,p[S]=E?ie(p[S]):Wt(p[S]),b,U,_,C,O,M,E),S++}}else if(S>k)for(;S<=N;)Rt(f[S],_,C,!0),S++;else{const A=S,U=S,J=new Map;for(S=U;S<=k;S++){const gt=p[S]=E?ie(p[S]):Wt(p[S]);gt.key!=null&&J.set(gt.key,S)}let Q,nt=0;const Lt=k-U+1;let Me=!1,Kn=0;const Ue=new Array(Lt);for(S=0;S<Lt;S++)Ue[S]=0;for(S=A;S<=N;S++){const gt=f[S];if(nt>=Lt){Rt(gt,_,C,!0);continue}let zt;if(gt.key!=null)zt=J.get(gt.key);else for(Q=U;Q<=k;Q++)if(Ue[Q-U]===0&&$e(gt,p[Q])){zt=Q;break}zt===void 0?Rt(gt,_,C,!0):(Ue[zt-U]=S+1,zt>=Kn?Kn=zt:Me=!0,v(gt,p[zt],b,null,_,C,O,M,E),nt++)}const Jn=Me?Ic(Ue):Pe;for(Q=Jn.length-1,S=Lt-1;S>=0;S--){const gt=U+S,zt=p[gt],Xn=gt+1<T?p[gt+1].el:w;Ue[S]===0?v(null,zt,b,Xn,_,C,O,M,E):Me&&(Q<0||S!==Jn[Q]?Ct(zt,b,Xn,2):Q--)}}},Ct=(f,p,b,w,_=null)=>{const{el:C,type:O,transition:M,children:E,shapeFlag:S}=f;if(S&6){Ct(f.component.subTree,p,b,w);return}if(S&128){f.suspense.move(p,b,w);return}if(S&64){O.move(f,p,b,xe);return}if(O===dt){s(C,p,b);for(let N=0;N<E.length;N++)Ct(E[N],p,b,w);s(f.anchor,p,b);return}if(O===ys){P(f,p,b);return}if(w!==2&&S&1&&M)if(w===0)M.beforeEnter(C),s(C,p,b),ft(()=>M.enter(C),_);else{const{leave:N,delayLeave:k,afterLeave:A}=M,U=()=>s(C,p,b),J=()=>{N(C,()=>{U(),A&&A()})};k?k(C,U,J):J()}else s(C,p,b)},Rt=(f,p,b,w=!1,_=!1)=>{const{type:C,props:O,ref:M,children:E,dynamicChildren:S,shapeFlag:T,patchFlag:N,dirs:k}=f;if(M!=null&&Qs(M,null,b,f,!0),T&256){p.ctx.deactivate(f);return}const A=T&1&&k,U=!zi(f);let J;if(U&&(J=O&&O.onVnodeBeforeUnmount)&&Nt(J,p,f),T&6)il(f.component,b,w);else{if(T&128){f.suspense.unmount(b,w);return}A&&le(f,null,p,"beforeUnmount"),T&64?f.type.remove(f,p,b,_,xe,w):S&&(C!==dt||N>0&&N&64)?$t(S,p,b,!1,!0):(C===dt&&N&384||!_&&T&16)&&$t(E,p,b),w&&qn(f)}(U&&(J=O&&O.onVnodeUnmounted)||A)&&ft(()=>{J&&Nt(J,p,f),A&&le(f,null,p,"unmounted")},b)},qn=f=>{const{type:p,el:b,anchor:w,transition:_}=f;if(p===dt){el(b,w);return}if(p===ys){R(f);return}const C=()=>{n(b),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(f.shapeFlag&1&&_&&!_.persisted){const{leave:O,delayLeave:M}=_,E=()=>O(b,C);M?M(f.el,C,E):E()}else C()},el=(f,p)=>{let b;for(;f!==p;)b=d(f),n(f),f=b;n(p)},il=(f,p,b)=>{const{bum:w,scope:_,update:C,subTree:O,um:M}=f;w&&gs(w),_.stop(),C&&(C.active=!1,Rt(O,f,p,b)),M&&ft(M,p),ft(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},$t=(f,p,b,w=!1,_=!1,C=0)=>{for(let O=C;O<f.length;O++)Rt(f[O],p,b,w,_)},di=f=>f.shapeFlag&6?di(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el);let fs=!1;const Hn=(f,p,b)=>{f==null?p._vnode&&Rt(p._vnode,null,null,!0):v(p._vnode||null,f,p,null,null,null,b),fs||(fs=!0,nr(),Gh(),fs=!1),p._vnode=f},xe={p:v,um:Rt,m:Ct,r:qn,mt:Ut,mc:F,pc:H,pbc:Y,n:di,o:i};let ds,ps;return t&&([ds,ps]=t(xe)),{render:Hn,hydrate:ds,createApp:Ec(Hn,ds)}}function _s({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function ce({effect:i,update:t},e){i.allowRecurse=t.allowRecurse=e}function Ac(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function mo(i,t,e=!1){const s=i.children,n=t.children;if(I(s)&&I(n))for(let r=0;r<s.length;r++){const h=s[r];let o=n[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[r]=ie(n[r]),o.el=h.el),e||mo(h,o)),o.type===is&&(o.el=h.el)}}function Ic(i){const t=i.slice(),e=[0];let s,n,r,h,o;const l=i.length;for(s=0;s<l;s++){const c=i[s];if(c!==0){if(n=e[e.length-1],i[n]<c){t[s]=n,e.push(s);continue}for(r=0,h=e.length-1;r<h;)o=r+h>>1,i[e[o]]<c?r=o+1:h=o;c<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,h=e[r-1];r-- >0;)e[r]=h,h=t[h];return e}function go(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:go(t)}const Bc=i=>i.__isTeleport,dt=Symbol.for("v-fgt"),is=Symbol.for("v-txt"),ge=Symbol.for("v-cmt"),ys=Symbol.for("v-stc"),Je=[];let Tt=null;function _t(i=!1){Je.push(Tt=i?null:[])}function Vc(){Je.pop(),Tt=Je[Je.length-1]||null}let ni=1;function pr(i){ni+=i}function vo(i){return i.dynamicChildren=ni>0?Tt||Pe:null,Vc(),ni>0&&Tt&&Tt.push(i),i}function It(i,t,e,s,n,r){return vo(yt(i,t,e,s,n,r,!0))}function bo(i,t,e,s,n){return vo(Vt(i,t,e,s,n,!0))}function Dc(i){return i?i.__v_isVNode===!0:!1}function $e(i,t){return i.type===t.type&&i.key===t.key}const ss="__vInternal",wo=({key:i})=>i??null,Ni=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?st(i)||it(i)||V(i)?{i:Ot,r:i,k:t,f:!!e}:i:null);function yt(i,t=null,e=null,s=0,n=null,r=i===dt?0:1,h=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&wo(t),ref:t&&Ni(t),scopeId:to,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ot};return o?(En(l,e),r&128&&i.normalize(l)):e&&(l.shapeFlag|=st(e)?8:16),ni>0&&!h&&Tt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Tt.push(l),l}const Vt=Uc;function Uc(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===sc)&&(i=ge),Dc(i)){const o=Ae(i,t,!0);return e&&En(o,e),ni>0&&!r&&Tt&&(o.shapeFlag&6?Tt[Tt.indexOf(i)]=o:Tt.push(o)),o.patchFlag|=-2,o}if(tu(i)&&(i=i.__vccOpts),t){t=$c(t);let{class:o,style:l}=t;o&&!st(o)&&(t.class=Xi(o)),tt(l)&&($h(l)&&!I(l)&&(l=ct({},l)),t.style=mn(l))}const h=st(i)?1:nc(i)?128:Bc(i)?64:tt(i)?4:V(i)?2:0;return yt(i,t,e,s,n,h,r,!0)}function $c(i){return i?$h(i)||ss in i?ct({},i):i:null}function Ae(i,t,e=!1){const{props:s,ref:n,patchFlag:r,children:h}=i,o=t?Hc(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:o,key:o&&wo(o),ref:t&&t.ref?e&&n?I(n)?n.concat(Ni(t)):[n,Ni(t)]:Ni(t):n,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:h,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==dt?r===-1?16:r|16:r,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Ae(i.ssContent),ssFallback:i.ssFallback&&Ae(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce}}function jc(i=" ",t=0){return Vt(is,null,i,t)}function qc(i="",t=!1){return t?(_t(),bo(ge,null,i)):Vt(ge,null,i)}function Wt(i){return i==null||typeof i=="boolean"?Vt(ge):I(i)?Vt(dt,null,i.slice()):typeof i=="object"?ie(i):Vt(is,null,String(i))}function ie(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Ae(i)}function En(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(I(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),En(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!(ss in t)?t._ctx=Ot:n===3&&Ot&&(Ot.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else V(t)?(t={default:t,_ctx:Ot},e=32):(t=String(t),s&64?(e=16,t=[jc(t)]):e=8);i.children=t,i.shapeFlag|=e}function Hc(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Xi([t.class,s.class]));else if(n==="style")t.style=mn([t.style,s.style]);else if(Hi(n)){const r=t[n],h=s[n];h&&r!==h&&!(I(r)&&r.includes(h))&&(t[n]=r?[].concat(r,h):h)}else n!==""&&(t[n]=s[n])}return t}function Nt(i,t,e,s=null){Pt(i,t,7,[e,s])}const Kc=lo();let Jc=0;function Xc(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||Kc,r={uid:Jc++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Eh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uo(s,n),emitsOptions:Zh(s,n),emit:null,emitted:null,propsDefaults:Z,inheritAttrs:s.inheritAttrs,ctx:Z,data:Z,props:Z,attrs:Z,slots:Z,refs:Z,setupState:Z,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Gl.bind(null,r),i.ce&&i.ce(r),r}let lt=null,Ui,Zs;{const i=Mh(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(h=>h(r)):n[0](r)}};Ui=t("__VUE_INSTANCE_SETTERS__",e=>lt=e),Zs=t("__VUE_SSR_SETTERS__",e=>ns=e)}const ui=i=>{const t=lt;return Ui(i),i.scope.on(),()=>{i.scope.off(),Ui(t)}},mr=()=>{lt&&lt.scope.off(),Ui(null)};function _o(i){return i.vnode.shapeFlag&4}let ns=!1;function Yc(i,t=!1){t&&Zs(t);const{props:e,children:s}=i.vnode,n=_o(i);Pc(i,e,n,t),zc(i,s);const r=n?Gc(i,t):void 0;return t&&Zs(!1),r}function Gc(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=Qi(new Proxy(i.ctx,_c));const{setup:s}=e;if(s){const n=i.setupContext=s.length>1?Zc(i):null,r=ui(i);ye();const h=re(s,i,0,[i.props,n]);if(Se(),r(),_h(h)){if(h.then(mr,mr),t)return h.then(o=>{gr(i,o,t)}).catch(o=>{Zi(o,i,0)});i.asyncDep=h}else gr(i,h,t)}else yo(i,t)}function gr(i,t,e){V(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:tt(t)&&(i.setupState=Hh(t)),yo(i,e)}let vr;function yo(i,t,e){const s=i.type;if(!i.render){if(!t&&vr&&!s.render){const n=s.template||Cn(i).template;if(n){const{isCustomElement:r,compilerOptions:h}=i.appContext.config,{delimiters:o,compilerOptions:l}=s,c=ct(ct({isCustomElement:r,delimiters:o},h),l);s.render=vr(n,c)}}i.render=s.render||St}{const n=ui(i);ye();try{yc(i)}finally{Se(),n()}}}function Qc(i){return i.attrsProxy||(i.attrsProxy=new Proxy(i.attrs,{get(t,e){return mt(i,"get","$attrs"),t[e]}}))}function Zc(i){const t=e=>{i.exposed=e||{}};return{get attrs(){return Qc(i)},slots:i.slots,emit:i.emit,expose:t}}function On(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(Hh(Qi(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in He)return He[e](i)},has(t,e){return e in t||e in He}}))}function tu(i){return V(i)&&"__vccOpts"in i}const ri=(i,t)=>Il(i,t,ns),eu="3.4.15";/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const iu="http://www.w3.org/2000/svg",su="http://www.w3.org/1998/Math/MathML",se=typeof document<"u"?document:null,br=se&&se.createElement("template"),nu={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t==="svg"?se.createElementNS(iu,i):t==="mathml"?se.createElementNS(su,i):se.createElement(i,e?{is:e}:void 0);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>se.createTextNode(i),createComment:i=>se.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>se.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const h=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{br.innerHTML=s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i;const o=br.content;if(s==="svg"||s==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,e)}return[h?h.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},ru=Symbol("_vtc");function hu(i,t,e){const s=i[ru];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const ou=Symbol("_vod"),lu=Symbol("");function cu(i,t,e){const s=i.style,n=s.display,r=st(e);if(e&&!r){if(t&&!st(t))for(const h in t)e[h]==null&&tn(s,h,"");for(const h in e)tn(s,h,e[h])}else if(r){if(t!==e){const h=s[lu];h&&(e+=";"+h),s.cssText=e}}else t&&i.removeAttribute("style");ou in i&&(s.display=n)}const wr=/\s*!important$/;function tn(i,t,e){if(I(e))e.forEach(s=>tn(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=uu(i,t);wr.test(e)?i.setProperty(De(s),e.replace(wr,""),"important"):i[s]=e}}const _r=["Webkit","Moz","ms"],Ss={};function uu(i,t){const e=Ss[t];if(e)return e;let s=Fe(t);if(s!=="filter"&&s in i)return Ss[t]=s;s=xh(s);for(let n=0;n<_r.length;n++){const r=_r[n]+s;if(r in i)return Ss[t]=r}return t}const yr="http://www.w3.org/1999/xlink";function au(i,t,e,s,n){if(s&&t.startsWith("xlink:"))e==null?i.removeAttributeNS(yr,t.slice(6,t.length)):i.setAttributeNS(yr,t,e);else{const r=pl(t);e==null||r&&!Ch(e)?i.removeAttribute(t):i.setAttribute(t,r?"":e)}}function fu(i,t,e,s,n,r,h){if(t==="innerHTML"||t==="textContent"){s&&h(s,n,r),i[t]=e??"";return}const o=i.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){i._value=e;const c=o==="OPTION"?i.getAttribute("value"):i.value,u=e??"";c!==u&&(i.value=u),e==null&&i.removeAttribute(t);return}let l=!1;if(e===""||e==null){const c=typeof i[t];c==="boolean"?e=Ch(e):e==null&&c==="string"?(e="",l=!0):c==="number"&&(e=0,l=!0)}try{i[t]=e}catch{}l&&i.removeAttribute(t)}function du(i,t,e,s){i.addEventListener(t,e,s)}function pu(i,t,e,s){i.removeEventListener(t,e,s)}const Sr=Symbol("_vei");function mu(i,t,e,s,n=null){const r=i[Sr]||(i[Sr]={}),h=r[t];if(s&&h)h.value=s;else{const[o,l]=gu(t);if(s){const c=r[t]=wu(s,n);du(i,o,c,l)}else h&&(pu(i,o,h,l),r[t]=void 0)}}const xr=/(?:Once|Passive|Capture)$/;function gu(i){let t;if(xr.test(i)){t={};let s;for(;s=i.match(xr);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):De(i.slice(2)),t]}let xs=0;const vu=Promise.resolve(),bu=()=>xs||(vu.then(()=>xs=0),xs=Date.now());function wu(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Pt(_u(s,e.value),t,5,[s])};return e.value=i,e.attached=bu(),e}function _u(i,t){if(I(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const Mr=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,yu=(i,t,e,s,n,r,h,o,l)=>{const c=n==="svg";t==="class"?hu(i,s,c):t==="style"?cu(i,e,s):Hi(t)?fn(t)||mu(i,t,e,s,h):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Su(i,t,s,c))?fu(i,t,s,r,h,o,l):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),au(i,t,s,c))};function Su(i,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in i&&Mr(t)&&V(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Mr(t)&&st(e)?!1:t in i}const xu=ct({patchProp:yu},nu);let Cr;function Mu(){return Cr||(Cr=Fc(xu))}const Cu=(...i)=>{const t=Mu().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=Eu(s);if(!n)return;const r=t._component;!V(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.innerHTML="";const h=e(n,!1,Lu(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),h},t};function Lu(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Eu(i){return st(i)?document.querySelector(i):i}var Ou=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let So;const rs=i=>So=i,xo=Symbol();function en(i){return i&&typeof i=="object"&&Object.prototype.toString.call(i)==="[object Object]"&&typeof i.toJSON!="function"}var Xe;(function(i){i.direct="direct",i.patchObject="patch object",i.patchFunction="patch function"})(Xe||(Xe={}));function Tu(){const i=Oh(!0),t=i.run(()=>fe({}));let e=[],s=[];const n=Qi({install(r){rs(n),n._a=r,r.provide(xo,n),r.config.globalProperties.$pinia=n,s.forEach(h=>e.push(h)),s=[]},use(r){return!this._a&&!Ou?s.push(r):e.push(r),this},_p:e,_a:null,_e:i,_s:new Map,state:t});return n}const Mo=()=>{};function Lr(i,t,e,s=Mo){i.push(t);const n=()=>{const r=i.indexOf(t);r>-1&&(i.splice(r,1),s())};return!e&&Th()&&gl(n),n}function Ce(i,...t){i.slice().forEach(e=>{e(...t)})}const Pu=i=>i();function sn(i,t){i instanceof Map&&t instanceof Map&&t.forEach((e,s)=>i.set(s,e)),i instanceof Set&&t instanceof Set&&t.forEach(i.add,i);for(const e in t){if(!t.hasOwnProperty(e))continue;const s=t[e],n=i[e];en(n)&&en(s)&&i.hasOwnProperty(e)&&!it(s)&&!Jt(s)?i[e]=sn(n,s):i[e]=s}return i}const ku=Symbol();function Ru(i){return!en(i)||!i.hasOwnProperty(ku)}const{assign:te}=Object;function zu(i){return!!(it(i)&&i.effect)}function Nu(i,t,e,s){const{state:n,actions:r,getters:h}=t,o=e.state.value[i];let l;function c(){o||(e.state.value[i]=n?n():{});const u=Ul(e.state.value[i]);return te(u,r,Object.keys(h||{}).reduce((a,d)=>(a[d]=Qi(ri(()=>{rs(e);const m=e._s.get(i);return h[d].call(m,m)})),a),{}))}return l=Co(i,c,t,e,s,!0),l}function Co(i,t,e={},s,n,r){let h;const o=te({actions:{}},e),l={deep:!0};let c,u,a=[],d=[],m;const g=s.state.value[i];!r&&!g&&(s.state.value[i]={}),fe({});let v;function y(F){let D;c=u=!1,typeof F=="function"?(F(s.state.value[i]),D={type:Xe.patchFunction,storeId:i,events:m}):(sn(s.state.value[i],F),D={type:Xe.patchObject,payload:F,storeId:i,events:m});const Y=v=Symbol();Xh().then(()=>{v===Y&&(c=!0)}),u=!0,Ce(a,D,s.state.value[i])}const L=r?function(){const{state:D}=e,Y=D?D():{};this.$patch(ht=>{te(ht,Y)})}:Mo;function z(){h.stop(),a=[],d=[],s._s.delete(i)}function P(F,D){return function(){rs(s);const Y=Array.from(arguments),ht=[],bt=[];function Dt(j){ht.push(j)}function Ut(j){bt.push(j)}Ce(d,{args:Y,name:F,store:B,after:Dt,onError:Ut});let xt;try{xt=D.apply(this&&this.$id===i?this:B,Y)}catch(j){throw Ce(bt,j),j}return xt instanceof Promise?xt.then(j=>(Ce(ht,j),j)).catch(j=>(Ce(bt,j),Promise.reject(j))):(Ce(ht,xt),xt)}}const R={_p:s,$id:i,$onAction:Lr.bind(null,d),$patch:y,$reset:L,$subscribe(F,D={}){const Y=Lr(a,F,D.detached,()=>ht()),ht=h.run(()=>ze(()=>s.state.value[i],bt=>{(D.flush==="sync"?u:c)&&F({storeId:i,type:Xe.direct,events:m},bt)},te({},l,D)));return Y},$dispose:z},B=Gi(R);s._s.set(i,B);const K=(s._a&&s._a.runWithContext||Pu)(()=>s._e.run(()=>(h=Oh()).run(t)));for(const F in K){const D=K[F];if(it(D)&&!zu(D)||Jt(D))r||(g&&Ru(D)&&(it(D)?D.value=g[F]:sn(D,g[F])),s.state.value[i][F]=D);else if(typeof D=="function"){const Y=P(F,D);K[F]=Y,o.actions[F]=D}}return te(B,K),te($(B),K),Object.defineProperty(B,"$state",{get:()=>s.state.value[i],set:F=>{y(D=>{te(D,F)})}}),s._p.forEach(F=>{te(B,h.run(()=>F({store:B,app:s._a,pinia:s,options:o})))}),g&&r&&e.hydrate&&e.hydrate(B.$state,g),c=!0,u=!0,B}function Tn(i,t,e){let s,n;const r=typeof t=="function";typeof i=="string"?(s=i,n=r?e:t):(n=i,s=i.id);function h(o,l){const c=Tc();return o=o||(c?Ke(xo,null):null),o&&rs(o),o=So,o._s.has(s)||(r?Co(s,t,n,o):Nu(s,n,o)),o._s.get(s)}return h.$id=s,h}function Pn(i){{i=$(i);const t={};for(const e in i){const s=i[e];(it(s)||Jt(s))&&(t[e]=ql(i,e))}return t}}const kn=Tn("orderBook",{state:()=>({symbolList:["BTCUSD-PERP","ETHUSD-PERP","XRP_USDT","SOL_USDT","SUI_USDT","FIL_USDT"],requestNum:10,orderBook:new Map,displayNum:5}),actions:{setOrderBook(i,t){this.orderBook.set(i,t),console.log(this.orderBook)}}}),Lo=Tn("candle",{state:()=>({candles:[]}),actions:{setCandles(i){this.candles=i},updateCandles(i){let t=this.candles.length;t>0&&this.candles[t-1].t===i[0].t?this.candles[t-1]=i[0]:this.candles=this.candles.concat(i)}}}),Fu={"1m":"one minute. (Legacy format: M1)","5m":"five minutes. (Legacy format: M5)","15m":"15 minutes. (Legacy format: M15)","30m":"30 minutes. (Legacy format: M30)","1h":"one hour. (Legacy format: H1)","2h":"two hours. (Legacy format: H2)","4h":"4 hours. (Legacy format: H4)","12h":"12 hours. (Legacy format: H12)","1D":"one day. (Legacy format: D1 and 1d)","7D":"1 week starting at 00:00 UTC each Monday","14D":"2 week intervals starting at Monday, Oct-28-2019, 00:00 UTC","1M":"1 month starting at first day of each calendar month, 00:00 UTC"},Eo=Tn("websocket",{state:()=>({wsInstance:null,isReady:!1}),actions:{initWebsocket(i){let t=new WebSocket(Wu);t.onopen=()=>{console.log("websocket connected!"),this.isReady=!0,this.sendSocketMessage(i)},t.onmessage=e=>{let s=JSON.parse(e.data);if(s.code!==0){console.log("Crypto.com expected error: ",_i[s.code]?_i[s.code]:s.message);return}if(s.method==="public/heartbeat"){this.sendSocketMessage({id:s.id,method:"public/respond-heartbeat"});return}if(s.id!==-1&&s.id!==i.id){console.log("----------------unhandling error----------------",s);return}if(!s.result)return;let n=s.result;switch(n.channel){case"book":{kn().setOrderBook(n.instrument_name,n.data[0]);break}case"candlestick":{const r=Lo();if(s.id===i.id){r.setCandles(n.data);return}r.updateCandles(n.data);break}default:console.log("--------------channel not found!!--------------")}},t.onerror=e=>{this.isReady=!1,console.log("error",e)},t.onclose=e=>{console.log(`Socket onclose due to ${_i[e.code]?_i[e.code]:e.reason}! Reconnecting...`),this.isReady=!1,this.initWebsocket(i)},this.wsInstance=t},sendSocketMessage(i){this.wsInstance.readyState===Au.OPEN&&(this.wsInstance.send(JSON.stringify(i)),console.log("message sent: ",JSON.stringify(i)))}}}),Wu="wss://stream.crypto.com/exchange/v1/market",Au={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},_i={1e3:"Normal disconnection by server, usually when the heartbeat isn't handled properly",1006:"Abnormal disconnection",1013:"Server restarting -- try again later"};function G(i){var t=i.width,e=i.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function me(i,t){return i.width===t.width&&i.height===t.height}var Iu=function(){function i(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return i.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(i.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),i.prototype.subscribe=function(t){var e=this,s={next:t};return this._observers.push(s),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==s})}}},i.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},i.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},i.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},i.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},i}();function Bu(i){return new Iu(i)}var Vu=function(){function i(t,e,s){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=G({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??function(r){return r},this._allowResizeObserver=(n=s==null?void 0:s.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return i.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(i.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bitmapSize",{get:function(){return G({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),i.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=G(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},i.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(i.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),i.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},i.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},i.prototype._resizeBitmap=function(t){var e=this.bitmapSize;me(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},i.prototype._emitBitmapSizeChanged=function(t,e){var s=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,s=G(this._transformBitmapSize(t,this._canvasElementClientSize)),n=me(this.bitmapSize,s)?null:s;e===null&&n===null||e!==null&&n!==null&&me(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},i.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Uu().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},i.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=Er(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Bu(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},i.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var s=Er(this._canvasElement);if(s!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:s.devicePixelRatio,r=this._canvasElement.getClientRects(),h=r[0]!==void 0?$u(r[0],n):G({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(h)}}},i.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var s=e.find(function(h){return h.target===t._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var n=s.devicePixelContentBoxSize[0],r=G({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},i}();function Du(i,t){if(t.type==="device-pixel-content-box")return new Vu(i,t.transform,t.options);throw new Error("Unsupported binding target")}function Er(i){return i.ownerDocument.defaultView}function Uu(){return new Promise(function(i){var t=new ResizeObserver(function(e){i(e.every(function(s){return"devicePixelContentBoxSize"in s})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function $u(i,t){return G({width:Math.round(i.left*t+i.width*t)-Math.round(i.left*t),height:Math.round(i.top*t+i.height*t)-Math.round(i.top*t)})}var ju=function(){function i(t,e,s){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=t}return i.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},i.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(i.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),i}();function ve(i,t){var e=i.canvasElementClientSize;if(e.width===0||e.height===0)return null;var s=i.bitmapSize;if(s.width===0||s.height===0)return null;var n=i.canvasElement.getContext("2d",t);return n===null?null:new ju(n,e,s)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.1.2
 * Copyright (c) 2024 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const qu={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Hu={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Ku={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Ju={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Xu={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Yu={color:"#26a69a",base:0},Oo={color:"#2196f3"},To={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Or,Tr;function be(i,t){const e={0:[],1:[i.lineWidth,i.lineWidth],2:[2*i.lineWidth,2*i.lineWidth],3:[6*i.lineWidth,6*i.lineWidth],4:[i.lineWidth,4*i.lineWidth]}[t];i.setLineDash(e)}function Po(i,t,e,s){i.beginPath();const n=i.lineWidth%2?.5:0;i.moveTo(e,t+n),i.lineTo(s,t+n),i.stroke()}function oe(i,t){if(!i)throw new Error("Assertion failed"+(t?": "+t:""))}function at(i){if(i===void 0)throw new Error("Value is undefined");return i}function x(i){if(i===null)throw new Error("Value is null");return i}function Oe(i){return x(at(i))}(function(i){i[i.Simple=0]="Simple",i[i.WithSteps=1]="WithSteps",i[i.Curved=2]="Curved"})(Or||(Or={})),function(i){i[i.Solid=0]="Solid",i[i.Dotted=1]="Dotted",i[i.Dashed=2]="Dashed",i[i.LargeDashed=3]="LargeDashed",i[i.SparseDotted=4]="SparseDotted"}(Tr||(Tr={}));const Pr={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function wt(i){return i<0?0:i>255?255:Math.round(i)||0}function ko(i){return i<=0||i>0?i<0?0:i>1?1:Math.round(1e4*i)/1e4:0}const Gu=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Qu=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Zu=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,ta=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function $i(i){(i=i.toLowerCase())in Pr&&(i=Pr[i]);{const t=ta.exec(i)||Zu.exec(i);if(t)return[wt(parseInt(t[1],10)),wt(parseInt(t[2],10)),wt(parseInt(t[3],10)),ko(t.length<5?1:parseFloat(t[4]))]}{const t=Qu.exec(i);if(t)return[wt(parseInt(t[1],16)),wt(parseInt(t[2],16)),wt(parseInt(t[3],16)),1]}{const t=Gu.exec(i);if(t)return[wt(17*parseInt(t[1],16)),wt(17*parseInt(t[2],16)),wt(17*parseInt(t[3],16)),1]}throw new Error(`Cannot parse color: ${i}`)}function hs(i){const t=$i(i);return{t:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,i:(e=t,.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white")};var e}class et{constructor(){this.h=[]}l(t,e,s){const n={o:t,_:e,u:s===!0};this.h.push(n)}v(t){const e=this.h.findIndex(s=>t===s.o);e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter(e=>e._!==t)}m(t,e,s){const n=[...this.h];this.h=this.h.filter(r=>!r.u),n.forEach(r=>r.o(t,e,s))}M(){return this.h.length>0}S(){this.h=[]}}function kt(i,...t){for(const e of t)for(const s in e)e[s]!==void 0&&(typeof e[s]!="object"||i[s]===void 0||Array.isArray(e[s])?i[s]=e[s]:kt(i[s],e[s]));return i}function Bt(i){return typeof i=="number"&&isFinite(i)}function hi(i){return typeof i=="number"&&i%1==0}function ai(i){return typeof i=="string"}function yi(i){return typeof i=="boolean"}function qt(i){const t=i;if(!t||typeof t!="object")return t;let e,s,n;for(s in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(s)&&(n=t[s],e[s]=n&&typeof n=="object"?qt(n):n);return e}function ea(i){return i!==null}function oi(i){return i===null?void 0:i}const Rn="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Ie(i,t,e){return t===void 0&&(t=Rn),`${e=e!==void 0?`${e} `:""}${i}px ${t}`}class ia{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",V:0,B:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,e=this.j(),s=this.H();return t.P===e&&t.D===s||(t.P=e,t.D=s,t.R=Ie(e,s),t.L=2.5/12*e,t.V=t.L,t.B=e/12*t.T,t.I=e/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class zn{constructor(){this.Y=[]}X(t){this.Y=t}K(t,e,s){this.Y.forEach(n=>{n.K(t,e,s)})}}class Nn{K(t,e,s){t.useMediaCoordinateSpace(n=>this.Z(n,e,s))}G(t,e,s){t.useMediaCoordinateSpace(n=>this.J(n,e,s))}J(t,e,s){}}class sa extends Nn{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z({context:t}){if(this.tt===null||this.tt.nt===null)return;const e=this.tt.nt,s=this.tt,n=r=>{t.beginPath();for(let h=e.to-1;h>=e.from;--h){const o=s.st[h];t.moveTo(o.et,o.rt),t.arc(o.et,o.rt,r,0,2*Math.PI)}t.fill()};s.ht>0&&(t.fillStyle=s.lt,n(s.ot+s.ht)),t.fillStyle=s._t,n(s.ot)}}function na(){return{st:[{et:0,rt:0,ut:0,ct:0}],_t:"",lt:"",ot:0,ht:0,nt:null}}const ra={from:0,to:1};class ha{constructor(t,e){this.dt=new zn,this.ft=[],this.vt=[],this.bt=!0,this.F=t,this.wt=e,this.dt.X(this.ft)}gt(t){const e=this.F.Mt();e.length!==this.ft.length&&(this.vt=e.map(na),this.ft=this.vt.map(s=>{const n=new sa;return n.it(s),n}),this.dt.X(this.ft)),this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.dt}St(){const t=this.wt.W().mode===2,e=this.F.Mt(),s=this.wt.kt(),n=this.F.yt();e.forEach((r,h)=>{var o;const l=this.vt[h],c=r.Ct(s);if(t||c===null||!r.Tt())return void(l.nt=null);const u=x(r.Pt());l._t=c.Rt,l.ot=c.ot,l.ht=c.Dt,l.st[0].ct=c.ct,l.st[0].rt=r.At().Ot(c.ct,u.Vt),l.lt=(o=c.Bt)!==null&&o!==void 0?o:this.F.It(l.st[0].rt/r.At().zt()),l.st[0].ut=s,l.st[0].et=n.Et(s),l.nt=ra})}}class Yt{K(t,e,s){t.useBitmapCoordinateSpace(n=>this.Z(n,e,s))}}class oa extends Yt{constructor(t){super(),this.Lt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Lt===null)return;const r=this.Lt.Nt.Tt,h=this.Lt.Ft.Tt;if(!r&&!h)return;const o=Math.round(this.Lt.et*s),l=Math.round(this.Lt.rt*n);t.lineCap="butt",r&&o>=0&&(t.lineWidth=Math.floor(this.Lt.Nt.ht*s),t.strokeStyle=this.Lt.Nt.O,t.fillStyle=this.Lt.Nt.O,be(t,this.Lt.Nt.Wt),function(c,u,a,d){c.beginPath();const m=c.lineWidth%2?.5:0;c.moveTo(u+m,a),c.lineTo(u+m,d),c.stroke()}(t,o,0,e.height)),h&&l>=0&&(t.lineWidth=Math.floor(this.Lt.Ft.ht*n),t.strokeStyle=this.Lt.Ft.O,t.fillStyle=this.Lt.Ft.O,be(t,this.Lt.Ft.Wt),Po(t,l,0,e.width))}}class la{constructor(t){this.bt=!0,this.jt={Nt:{ht:1,Wt:0,O:"",Tt:!1},Ft:{ht:1,Wt:0,O:"",Tt:!1},et:0,rt:0},this.Ht=new oa(this.jt),this.$t=t}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht}St(){const t=this.$t.Tt(),e=x(this.$t.Ut()),s=e.qt().W().crosshair,n=this.jt;if(s.mode===2)return n.Ft.Tt=!1,void(n.Nt.Tt=!1);n.Ft.Tt=t&&this.$t.Yt(e),n.Nt.Tt=t&&this.$t.Xt(),n.Ft.ht=s.horzLine.width,n.Ft.Wt=s.horzLine.style,n.Ft.O=s.horzLine.color,n.Nt.ht=s.vertLine.width,n.Nt.Wt=s.vertLine.style,n.Nt.O=s.vertLine.color,n.et=this.$t.Kt(),n.rt=this.$t.Zt()}}function ca(i,t,e,s,n,r){i.fillRect(t+r,e,s-2*r,r),i.fillRect(t+r,e+n-r,s-2*r,r),i.fillRect(t,e,r,n),i.fillRect(t+s-r,e,r,n)}function os(i,t,e,s,n,r){i.save(),i.globalCompositeOperation="copy",i.fillStyle=r,i.fillRect(t,e,s,n),i.restore()}function kr(i,t){return i.map(e=>e===0?e:e+t)}function Ms(i,t,e,s,n,r){i.beginPath(),i.lineTo(t+s-r[1],e),r[1]!==0&&i.arcTo(t+s,e,t+s,e+r[1],r[1]),i.lineTo(t+s,e+n-r[2]),r[2]!==0&&i.arcTo(t+s,e+n,t+s-r[2],e+n,r[2]),i.lineTo(t+r[3],e+n),r[3]!==0&&i.arcTo(t,e+n,t,e+n-r[3],r[3]),i.lineTo(t,e+r[0]),r[0]!==0&&i.arcTo(t,e,t+r[0],e,r[0])}function Rr(i,t,e,s,n,r,h=0,o=[0,0,0,0],l=""){if(i.save(),!h||!l||l===r)return Ms(i,t,e,s,n,o),i.fillStyle=r,i.fill(),void i.restore();const c=h/2;r!=="transparent"&&(Ms(i,t+h,e+h,s-2*h,n-2*h,kr(o,-h)),i.fillStyle=r,i.fill()),l!=="transparent"&&(Ms(i,t+c,e+c,s-h,n-h,kr(o,-c)),i.lineWidth=h,i.strokeStyle=l,i.closePath(),i.stroke()),i.restore()}function Ro(i,t,e,s,n,r,h){i.save(),i.globalCompositeOperation="copy";const o=i.createLinearGradient(0,0,0,n);o.addColorStop(0,r),o.addColorStop(1,h),i.fillStyle=o,i.fillRect(t,e,s,n),i.restore()}class zr{constructor(t,e){this.it(t,e)}it(t,e){this.Lt=t,this.Gt=e}zt(t,e){return this.Lt.Tt?t.P+t.L+t.V:0}K(t,e,s,n){if(!this.Lt.Tt||this.Lt.Jt.length===0)return;const r=this.Lt.O,h=this.Gt.t,o=t.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=e.R;const u=this.Qt(l,e,s,n),a=u.ti,d=(m,g)=>{u.ii?Rr(c,a.ni,a.si,a.ei,a.ri,m,a.hi,[a.ot,0,0,a.ot],g):Rr(c,a.li,a.si,a.ei,a.ri,m,a.hi,[0,a.ot,a.ot,0],g)};return d(h,"transparent"),this.Lt.ai&&(c.fillStyle=r,c.fillRect(a.li,a.oi,a._i-a.li,a.ui)),d("transparent",h),this.Lt.ci&&(c.fillStyle=e.A,c.fillRect(u.ii?a.di-a.hi:0,a.si,a.hi,a.fi-a.si)),u});t.useMediaCoordinateSpace(({context:l})=>{const c=o.vi;l.font=e.R,l.textAlign=o.ii?"right":"left",l.textBaseline="middle",l.fillStyle=r,l.fillText(this.Lt.Jt,c.pi,(c.si+c.fi)/2+c.mi)})}Qt(t,e,s,n){var r;const{context:h,bitmapSize:o,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:u}=t,a=this.Lt.ai||!this.Lt.bi?e.T:0,d=this.Lt.wi?e.C:0,m=e.L+this.Gt.gi,g=e.V+this.Gt.Mi,v=e.B,y=e.I,L=this.Lt.Jt,z=e.P,P=s.xi(h,L),R=Math.ceil(s.Si(h,L)),B=z+m+g,W=e.C+v+y+R+a,K=Math.max(1,Math.floor(u));let F=Math.round(B*u);F%2!=K%2&&(F+=1);const D=d>0?Math.max(1,Math.floor(d*c)):0,Y=Math.round(W*c),ht=Math.round(a*c),bt=(r=this.Gt.ki)!==null&&r!==void 0?r:this.Gt.yi,Dt=Math.round(bt*u)-Math.floor(.5*u),Ut=Math.floor(Dt+K/2-F/2),xt=Ut+F,j=n==="right",X=j?l.width-d:d,H=j?o.width-D:D;let Mt,Gt,Ct;return j?(Mt=H-Y,Gt=H-ht,Ct=X-a-v-d):(Mt=H+Y,Gt=H+ht,Ct=X+a+v),{ii:j,ti:{si:Ut,oi:Dt,fi:xt,ei:Y,ri:F,ot:2*c,hi:D,ni:Mt,li:H,_i:Gt,ui:K,di:o.width},vi:{si:Ut/u,fi:xt/u,pi:Ct,mi:P}}}}class ls{constructor(t){this.Ci={yi:0,t:"#000",Mi:0,gi:0},this.Ti={Jt:"",Tt:!1,ai:!0,bi:!1,Bt:"",O:"#FFF",ci:!1,wi:!1},this.Pi={Jt:"",Tt:!1,ai:!1,bi:!0,Bt:"",O:"#FFF",ci:!0,wi:!0},this.bt=!0,this.Ri=new(t||zr)(this.Ti,this.Ci),this.Di=new(t||zr)(this.Pi,this.Ci)}Jt(){return this.Oi(),this.Ti.Jt}yi(){return this.Oi(),this.Ci.yi}gt(){this.bt=!0}zt(t,e=!1){return Math.max(this.Ri.zt(t,e),this.Di.zt(t,e))}Ai(){return this.Ci.ki||0}Vi(t){this.Ci.ki=t}Bi(){return this.Oi(),this.Ti.Tt||this.Pi.Tt}Ii(){return this.Oi(),this.Ti.Tt}xt(t){return this.Oi(),this.Ti.ai=this.Ti.ai&&t.W().ticksVisible,this.Pi.ai=this.Pi.ai&&t.W().ticksVisible,this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Ri}zi(){return this.Oi(),this.Ri.it(this.Ti,this.Ci),this.Di.it(this.Pi,this.Ci),this.Di}Oi(){this.bt&&(this.Ti.ai=!0,this.Pi.ai=!1,this.Ei(this.Ti,this.Pi,this.Ci))}}class ua extends ls{constructor(t,e,s){super(),this.$t=t,this.Li=e,this.Ni=s}Ei(t,e,s){if(t.Tt=!1,this.$t.W().mode===2)return;const n=this.$t.W().horzLine;if(!n.labelVisible)return;const r=this.Li.Pt();if(!this.$t.Tt()||this.Li.Fi()||r===null)return;const h=hs(n.labelBackgroundColor);s.t=h.t,t.O=h.i;const o=2/12*this.Li.P();s.gi=o,s.Mi=o;const l=this.Ni(this.Li);s.yi=l.yi,t.Jt=this.Li.Wi(l.ct,r),t.Tt=!0}}const aa=/[1-9]/g;class zo{constructor(){this.Lt=null}it(t){this.Lt=t}K(t,e){if(this.Lt===null||this.Lt.Tt===!1||this.Lt.Jt.length===0)return;const s=t.useMediaCoordinateSpace(({context:d})=>(d.font=e.R,Math.round(e.ji.Si(d,x(this.Lt).Jt,aa))));if(s<=0)return;const n=e.Hi,r=s+2*n,h=r/2,o=this.Lt.$i;let l=this.Lt.yi,c=Math.floor(l-h)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-h)+.5):c+r>o&&(l-=Math.abs(o-(c+r)),c=Math.floor(l-h)+.5);const u=c+r,a=Math.ceil(0+e.C+e.T+e.L+e.P+e.V);t.useBitmapCoordinateSpace(({context:d,horizontalPixelRatio:m,verticalPixelRatio:g})=>{const v=x(this.Lt);d.fillStyle=v.t;const y=Math.round(c*m),L=Math.round(0*g),z=Math.round(u*m),P=Math.round(a*g),R=Math.round(2*m);if(d.beginPath(),d.moveTo(y,L),d.lineTo(y,P-R),d.arcTo(y,P,y+R,P,R),d.lineTo(z-R,P),d.arcTo(z,P,z,P-R,R),d.lineTo(z,L),d.fill(),v.ai){const B=Math.round(v.yi*m),W=L,K=Math.round((W+e.T)*g);d.fillStyle=v.O;const F=Math.max(1,Math.floor(m)),D=Math.floor(.5*m);d.fillRect(B-D,W,F,K-W)}}),t.useMediaCoordinateSpace(({context:d})=>{const m=x(this.Lt),g=0+e.C+e.T+e.L+e.P/2;d.font=e.R,d.textAlign="left",d.textBaseline="middle",d.fillStyle=m.O;const v=e.ji.xi(d,"Apr0");d.translate(c+n,g+v),d.fillText(m.Jt,0,0)})}}class fa{constructor(t,e,s){this.bt=!0,this.Ht=new zo,this.jt={Tt:!1,t:"#4c525e",O:"white",Jt:"",$i:0,yi:NaN,ai:!0},this.wt=t,this.Ui=e,this.Ni=s}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht.it(this.jt),this.Ht}St(){const t=this.jt;if(t.Tt=!1,this.wt.W().mode===2)return;const e=this.wt.W().vertLine;if(!e.labelVisible)return;const s=this.Ui.yt();if(s.Fi())return;t.$i=s.$i();const n=this.Ni();if(n===null)return;t.yi=n.yi;const r=s.qi(this.wt.kt());t.Jt=s.Yi(x(r)),t.Tt=!0;const h=hs(e.labelBackgroundColor);t.t=h.t,t.O=h.i,t.ai=s.W().ticksVisible}}class Fn{constructor(){this.Xi=null,this.Ki=0}Zi(){return this.Ki}Gi(t){this.Ki=t}At(){return this.Xi}Ji(t){this.Xi=t}Qi(t){return[]}tn(){return[]}Tt(){return!0}}var Nr;(function(i){i[i.Normal=0]="Normal",i[i.Magnet=1]="Magnet",i[i.Hidden=2]="Hidden"})(Nr||(Nr={}));class da extends Fn{constructor(t,e){super(),this.nn=null,this.sn=NaN,this.en=0,this.rn=!0,this.hn=new Map,this.ln=!1,this.an=NaN,this.on=NaN,this._n=NaN,this.un=NaN,this.Ui=t,this.cn=e,this.dn=new ha(t,this),this.fn=((n,r)=>h=>{const o=r(),l=n();if(h===x(this.nn).vn())return{ct:l,yi:o};{const c=x(h.Pt());return{ct:h.pn(o,c),yi:o}}})(()=>this.sn,()=>this.on);const s=((n,r)=>()=>{const h=this.Ui.yt().mn(n()),o=r();return h&&Number.isFinite(o)?{ut:h,yi:o}:null})(()=>this.en,()=>this.Kt());this.bn=new fa(this,t,s),this.wn=new la(this)}W(){return this.cn}gn(t,e){this._n=t,this.un=e}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(t,e,s){this.ln||(this.ln=!0),this.rn=!0,this.yn(t,e,s)}kt(){return this.en}Kt(){return this.an}Zt(){return this.on}Tt(){return this.rn}Cn(){this.rn=!1,this.Tn(),this.sn=NaN,this.an=NaN,this.on=NaN,this.nn=null,this.Mn()}Pn(t){return this.nn!==null?[this.wn,this.dn]:[]}Yt(t){return t===this.nn&&this.cn.horzLine.visible}Xt(){return this.cn.vertLine.visible}Rn(t,e){this.rn&&this.nn===t||this.hn.clear();const s=[];return this.nn===t&&s.push(this.Dn(this.hn,e,this.fn)),s}tn(){return this.rn?[this.bn]:[]}Ut(){return this.nn}On(){this.wn.gt(),this.hn.forEach(t=>t.gt()),this.bn.gt(),this.dn.gt()}An(t){return t&&!t.vn().Fi()?t.vn():null}yn(t,e,s){this.Vn(t,e,s)&&this.On()}Vn(t,e,s){const n=this.an,r=this.on,h=this.sn,o=this.en,l=this.nn,c=this.An(s);this.en=t,this.an=isNaN(t)?NaN:this.Ui.yt().Et(t),this.nn=s;const u=c!==null?c.Pt():null;return c!==null&&u!==null?(this.sn=e,this.on=c.Ot(e,u)):(this.sn=NaN,this.on=NaN),n!==this.an||r!==this.on||o!==this.en||h!==this.sn||l!==this.nn}Tn(){const t=this.Ui.Mt().map(s=>s.In().Bn()).filter(ea),e=t.length===0?null:Math.max(...t);this.en=e!==null?e:NaN}Dn(t,e,s){let n=t.get(e);return n===void 0&&(n=new ua(this,e,s),t.set(e,n)),n}}function cs(i){return i==="left"||i==="right"}class rt{constructor(t){this.zn=new Map,this.En=[],this.Ln=t}Nn(t,e){const s=function(n,r){return n===void 0?r:{Fn:Math.max(n.Fn,r.Fn),Wn:n.Wn||r.Wn}}(this.zn.get(t),e);this.zn.set(t,s)}jn(){return this.Ln}Hn(t){const e=this.zn.get(t);return e===void 0?{Fn:this.Ln}:{Fn:Math.max(this.Ln,e.Fn),Wn:e.Wn}}$n(){this.Un(),this.En=[{qn:0}]}Yn(t){this.Un(),this.En=[{qn:1,Vt:t}]}Xn(t){this.Kn(),this.En.push({qn:5,Vt:t})}Un(){this.Kn(),this.En.push({qn:6})}Zn(){this.Un(),this.En=[{qn:4}]}Gn(t){this.Un(),this.En.push({qn:2,Vt:t})}Jn(t){this.Un(),this.En.push({qn:3,Vt:t})}Qn(){return this.En}ts(t){for(const e of t.En)this.ns(e);this.Ln=Math.max(this.Ln,t.Ln),t.zn.forEach((e,s)=>{this.Nn(s,e)})}static ss(){return new rt(2)}static es(){return new rt(3)}ns(t){switch(t.qn){case 0:this.$n();break;case 1:this.Yn(t.Vt);break;case 2:this.Gn(t.Vt);break;case 3:this.Jn(t.Vt);break;case 4:this.Zn();break;case 5:this.Xn(t.Vt);break;case 6:this.Kn()}}Kn(){const t=this.En.findIndex(e=>e.qn===5);t!==-1&&this.En.splice(t,1)}}const Fr=".";function Ht(i,t){if(!Bt(i))return"n/a";if(!hi(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?i.toString():("0000000000000000"+i.toString()).slice(-t)}class us{constructor(t,e){if(e||(e=1),Bt(t)&&hi(t)||(t=100),t<0)throw new TypeError("invalid base");this.Li=t,this.rs=e,this.hs()}format(t){const e=t<0?"−":"";return t=Math.abs(t),e+this.ls(t)}hs(){if(this.os=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this.os++}}ls(t){const e=this.Li/this.rs;let s=Math.floor(t),n="";const r=this.os!==void 0?this.os:NaN;if(e>1){let h=+(Math.round(t*e)-s*e).toFixed(this.os);h>=e&&(h-=e,s+=1),n=Fr+Ht(+h.toFixed(this.os)*this.rs,r)}else s=Math.round(s*e)/e,r>0&&(n=Fr+Ht(0,r));return s.toFixed(0)+n}}class No extends us{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class pa{constructor(t){this._s=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.us(t):t<999995?e+this.us(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.us(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.us(t/1e9)+"B")}us(t){let e;const s=Math.pow(10,this._s);return e=(t=Math.round(t*s)/s)>=1e-15&&t<1?t.toFixed(this._s).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,(n,r)=>r)}}function Fo(i,t,e,s,n,r,h){if(t.length===0||s.from>=t.length||s.to<=0)return;const{context:o,horizontalPixelRatio:l,verticalPixelRatio:c}=i,u=t[s.from];let a=r(i,u),d=u;if(s.to-s.from<2){const m=n/2;o.beginPath();const g={et:u.et-m,rt:u.rt},v={et:u.et+m,rt:u.rt};o.moveTo(g.et*l,g.rt*c),o.lineTo(v.et*l,v.rt*c),h(i,a,g,v)}else{const m=(v,y)=>{h(i,a,d,y),o.beginPath(),a=v,d=y};let g=d;o.beginPath(),o.moveTo(u.et*l,u.rt*c);for(let v=s.from+1;v<s.to;++v){g=t[v];const y=r(i,g);switch(e){case 0:o.lineTo(g.et*l,g.rt*c);break;case 1:o.lineTo(g.et*l,t[v-1].rt*c),y!==a&&(m(y,g),o.lineTo(g.et*l,t[v-1].rt*c)),o.lineTo(g.et*l,g.rt*c);break;case 2:{const[L,z]=ma(t,v-1,v);o.bezierCurveTo(L.et*l,L.rt*c,z.et*l,z.rt*c,g.et*l,g.rt*c);break}}e!==1&&y!==a&&(m(y,g),o.moveTo(g.et*l,g.rt*c))}(d!==g||d===g&&e===1)&&h(i,a,d,g)}}const Wr=6;function Cs(i,t){return{et:i.et-t.et,rt:i.rt-t.rt}}function Ar(i,t){return{et:i.et/t,rt:i.rt/t}}function ma(i,t,e){const s=Math.max(0,t-1),n=Math.min(i.length-1,e+1);var r,h;return[(r=i[t],h=Ar(Cs(i[e],i[s]),Wr),{et:r.et+h.et,rt:r.rt+h.rt}),Cs(i[e],Ar(Cs(i[n],i[t]),Wr))]}function ga(i,t,e,s,n){const{context:r,horizontalPixelRatio:h,verticalPixelRatio:o}=t;r.lineTo(n.et*h,i*o),r.lineTo(s.et*h,i*o),r.closePath(),r.fillStyle=e,r.fill()}class Wo extends Yt{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z(t){var e;if(this.tt===null)return;const{st:s,nt:n,cs:r,ht:h,Wt:o,ds:l}=this.tt,c=(e=this.tt.fs)!==null&&e!==void 0?e:this.tt.vs?0:t.mediaSize.height;if(n===null)return;const u=t.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=h,be(u,o),u.lineWidth=1,Fo(t,s,l,n,r,this.ps.bind(this),ga.bind(null,c))}}function nn(i,t,e){return Math.min(Math.max(i,t),e)}function Si(i,t,e){return t-i<=e}function Ao(i){const t=Math.ceil(i);return t%2==0?t-1:t}class Wn{bs(t,e){const s=this.ws,{gs:n,Ms:r,xs:h,Ss:o,ks:l,fs:c}=e;if(this.ys===void 0||s===void 0||s.gs!==n||s.Ms!==r||s.xs!==h||s.Ss!==o||s.fs!==c||s.ks!==l){const u=t.context.createLinearGradient(0,0,0,l);if(u.addColorStop(0,n),c!=null){const a=nn(c*t.verticalPixelRatio/l,0,1);u.addColorStop(a,r),u.addColorStop(a,h)}u.addColorStop(1,o),this.ys=u,this.ws=e}return this.ys}}class va extends Wo{constructor(){super(...arguments),this.Cs=new Wn}ps(t,e){return this.Cs.bs(t,{gs:e.Ts,Ms:"",xs:"",Ss:e.Ps,ks:t.bitmapSize.height})}}function ba(i,t){const e=i.context;e.strokeStyle=t,e.stroke()}class Io extends Yt{constructor(){super(...arguments),this.tt=null}it(t){this.tt=t}Z(t){if(this.tt===null)return;const{st:e,nt:s,cs:n,ds:r,ht:h,Wt:o,Rs:l}=this.tt;if(s===null)return;const c=t.context;c.lineCap="butt",c.lineWidth=h*t.verticalPixelRatio,be(c,o),c.lineJoin="round";const u=this.Ds.bind(this);r!==void 0&&Fo(t,e,r,s,n,u,ba),l&&function(a,d,m,g,v){const{horizontalPixelRatio:y,verticalPixelRatio:L,context:z}=a;let P=null;const R=Math.max(1,Math.floor(y))%2/2,B=m*L+R;for(let W=g.to-1;W>=g.from;--W){const K=d[W];if(K){const F=v(a,K);F!==P&&(z.beginPath(),P!==null&&z.fill(),z.fillStyle=F,P=F);const D=Math.round(K.et*y)+R,Y=K.rt*L;z.moveTo(D,Y),z.arc(D,Y,B,0,2*Math.PI)}}z.fill()}(t,e,l,s,u)}}class Bo extends Io{Ds(t,e){return e._t}}function Vo(i,t,e,s,n=0,r=t.length){let h=r-n;for(;0<h;){const o=h>>1,l=n+o;s(t[l],e)===i?(n=l+1,h-=o+1):h=o}return n}const fi=Vo.bind(null,!0),Do=Vo.bind(null,!1);function wa(i,t){return i.ut<t}function _a(i,t){return t<i.ut}function Uo(i,t,e){const s=t.Os(),n=t.di(),r=fi(i,s,wa),h=Do(i,n,_a);if(!e)return{from:r,to:h};let o=r,l=h;return r>0&&r<i.length&&i[r].ut>=s&&(o=r-1),h>0&&h<i.length&&i[h-1].ut<=n&&(l=h+1),{from:o,to:l}}class An{constructor(t,e,s){this.As=!0,this.Vs=!0,this.Bs=!0,this.Is=[],this.zs=null,this.Es=t,this.Ls=e,this.Ns=s}gt(t){this.As=!0,t==="data"&&(this.Vs=!0),t==="options"&&(this.Bs=!0)}xt(){return this.Es.Tt()?(this.Fs(),this.zs===null?null:this.Ws):null}js(){this.Is=this.Is.map(t=>Object.assign(Object.assign({},t),this.Es.$s().Hs(t.ut)))}Us(){this.zs=null}Fs(){this.Vs&&(this.qs(),this.Vs=!1),this.Bs&&(this.js(),this.Bs=!1),this.As&&(this.Ys(),this.As=!1)}Ys(){const t=this.Es.At(),e=this.Ls.yt();if(this.Us(),e.Fi()||t.Fi())return;const s=e.Xs();if(s===null||this.Es.In().Ks()===0)return;const n=this.Es.Pt();n!==null&&(this.zs=Uo(this.Is,s,this.Ns),this.Zs(t,e,n.Vt),this.Gs())}}class as extends An{constructor(t,e){super(t,e,!0)}Zs(t,e,s){e.Js(this.Is,oi(this.zs)),t.Qs(this.Is,s,oi(this.zs))}te(t,e){return{ut:t,ct:e,et:NaN,rt:NaN}}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map(e=>{const s=e.Vt[3];return this.ne(e.se,s,t)})}}class ya extends as{constructor(t,e){super(t,e),this.Ws=new zn,this.ee=new va,this.re=new Bo,this.Ws.X([this.ee,this.re])}ne(t,e,s){return Object.assign(Object.assign({},this.te(t,e)),s.Hs(t))}Gs(){const t=this.Es.W();this.ee.it({ds:t.lineType,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,fs:null,vs:t.invertFilledArea,nt:this.zs,cs:this.Ls.yt().he()}),this.re.it({ds:t.lineVisible?t.lineType:void 0,st:this.Is,Wt:t.lineStyle,ht:t.lineWidth,nt:this.zs,cs:this.Ls.yt().he(),Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class Sa extends Yt{constructor(){super(...arguments),this.Lt=null,this.le=0,this.ae=0}it(t){this.Lt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.Lt===null||this.Lt.In.length===0||this.Lt.nt===null)return;this.le=this.oe(e),this.le>=2&&Math.max(1,Math.floor(e))%2!=this.le%2&&this.le--,this.ae=this.Lt._e?Math.min(this.le,Math.floor(e)):this.le;let n=null;const r=this.ae<=this.le&&this.Lt.he>=Math.floor(1.5*e);for(let h=this.Lt.nt.from;h<this.Lt.nt.to;++h){const o=this.Lt.In[h];n!==o.ue&&(t.fillStyle=o.ue,n=o.ue);const l=Math.floor(.5*this.ae),c=Math.round(o.et*e),u=c-l,a=this.ae,d=u+a-1,m=Math.min(o.ce,o.de),g=Math.max(o.ce,o.de),v=Math.round(m*s)-l,y=Math.round(g*s)+l,L=Math.max(y-v,this.ae);t.fillRect(u,v,a,L);const z=Math.ceil(1.5*this.le);if(r){if(this.Lt.fe){const W=c-z;let K=Math.max(v,Math.round(o.ve*s)-l),F=K+a-1;F>v+L-1&&(F=v+L-1,K=F-a+1),t.fillRect(W,K,u-W,F-K+1)}const P=c+z;let R=Math.max(v,Math.round(o.pe*s)-l),B=R+a-1;B>v+L-1&&(B=v+L-1,R=B-a+1),t.fillRect(d+1,R,P-d,B-R+1)}}}oe(t){const e=Math.floor(t);return Math.max(e,Math.floor(function(s,n){return Math.floor(.3*s*n)}(x(this.Lt).he,t)))}}class $o extends An{constructor(t,e){super(t,e,!1)}Zs(t,e,s){e.Js(this.Is,oi(this.zs)),t.me(this.Is,s,oi(this.zs))}be(t,e,s){return{ut:t,we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3],et:NaN,ve:NaN,ce:NaN,de:NaN,pe:NaN}}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map(e=>this.ne(e.se,e,t))}}class xa extends $o{constructor(){super(...arguments),this.Ws=new Sa}ne(t,e,s){return Object.assign(Object.assign({},this.be(t,e,s)),s.Hs(t))}Gs(){const t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),fe:t.openVisible,_e:t.thinBars,nt:this.zs})}}class Ma extends Wo{constructor(){super(...arguments),this.Cs=new Wn}ps(t,e){const s=this.tt;return this.Cs.bs(t,{gs:e.Se,Ms:e.ke,xs:e.ye,Ss:e.Ce,ks:t.bitmapSize.height,fs:s.fs})}}class Ca extends Io{constructor(){super(...arguments),this.Te=new Wn}Ds(t,e){const s=this.tt;return this.Te.bs(t,{gs:e.Pe,Ms:e.Pe,xs:e.Re,Ss:e.Re,ks:t.bitmapSize.height,fs:s.fs})}}class La extends as{constructor(t,e){super(t,e),this.Ws=new zn,this.De=new Ma,this.Oe=new Ca,this.Ws.X([this.De,this.Oe])}ne(t,e,s){return Object.assign(Object.assign({},this.te(t,e)),s.Hs(t))}Gs(){const t=this.Es.Pt();if(t===null)return;const e=this.Es.W(),s=this.Es.At().Ot(e.baseValue.price,t.Vt),n=this.Ls.yt().he();this.De.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineType,fs:s,vs:!1,nt:this.zs,cs:n}),this.Oe.it({st:this.Is,ht:e.lineWidth,Wt:e.lineStyle,ds:e.lineVisible?e.lineType:void 0,Rs:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,fs:s,nt:this.zs,cs:n})}}class Ea extends Yt{constructor(){super(...arguments),this.Lt=null,this.le=0}it(t){this.Lt=t}Z(t){if(this.Lt===null||this.Lt.In.length===0||this.Lt.nt===null)return;const{horizontalPixelRatio:e}=t;this.le=function(r,h){if(r>=2.5&&r<=4)return Math.floor(3*h);const o=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),l=Math.floor(r*o*h),c=Math.floor(r*h),u=Math.min(l,c);return Math.max(Math.floor(h),u)}(this.Lt.he,e),this.le>=2&&Math.floor(e)%2!=this.le%2&&this.le--;const s=this.Lt.In;this.Lt.Ae&&this.Ve(t,s,this.Lt.nt),this.Lt.ci&&this.Be(t,s,this.Lt.nt);const n=this.Ie(e);(!this.Lt.ci||this.le>2*n)&&this.ze(t,s,this.Lt.nt)}Ve(t,e,s){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:h}=t;let o="",l=Math.min(Math.floor(r),Math.floor(this.Lt.he*r));l=Math.max(Math.floor(r),Math.min(l,this.le));const c=Math.floor(.5*l);let u=null;for(let a=s.from;a<s.to;a++){const d=e[a];d.Ee!==o&&(n.fillStyle=d.Ee,o=d.Ee);const m=Math.round(Math.min(d.ve,d.pe)*h),g=Math.round(Math.max(d.ve,d.pe)*h),v=Math.round(d.ce*h),y=Math.round(d.de*h);let L=Math.round(r*d.et)-c;const z=L+l-1;u!==null&&(L=Math.max(u+1,L),L=Math.min(L,z));const P=z-L+1;n.fillRect(L,v,P,m-v),n.fillRect(L,g+1,P,y-g),u=z}}Ie(t){let e=Math.floor(1*t);this.le<=2*e&&(e=Math.floor(.5*(this.le-1)));const s=Math.max(Math.floor(t),e);return this.le<=2*s?Math.max(Math.floor(t),Math.floor(1*t)):s}Be(t,e,s){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:h}=t;let o="";const l=this.Ie(r);let c=null;for(let u=s.from;u<s.to;u++){const a=e[u];a.Le!==o&&(n.fillStyle=a.Le,o=a.Le);let d=Math.round(a.et*r)-Math.floor(.5*this.le);const m=d+this.le-1,g=Math.round(Math.min(a.ve,a.pe)*h),v=Math.round(Math.max(a.ve,a.pe)*h);if(c!==null&&(d=Math.max(c+1,d),d=Math.min(d,m)),this.Lt.he*r>2*l)ca(n,d,g,m-d+1,v-g+1,l);else{const y=m-d+1;n.fillRect(d,g,y,v-g+1)}c=m}}ze(t,e,s){if(this.Lt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:h}=t;let o="";const l=this.Ie(r);for(let c=s.from;c<s.to;c++){const u=e[c];let a=Math.round(Math.min(u.ve,u.pe)*h),d=Math.round(Math.max(u.ve,u.pe)*h),m=Math.round(u.et*r)-Math.floor(.5*this.le),g=m+this.le-1;if(u.ue!==o){const v=u.ue;n.fillStyle=v,o=v}this.Lt.ci&&(m+=l,a+=l,g-=l,d-=l),a>d||n.fillRect(m,a,g-m+1,d-a+1)}}}class Oa extends $o{constructor(){super(...arguments),this.Ws=new Ea}ne(t,e,s){return Object.assign(Object.assign({},this.be(t,e,s)),s.Hs(t))}Gs(){const t=this.Es.W();this.Ws.it({In:this.Is,he:this.Ls.yt().he(),Ae:t.wickVisible,ci:t.borderVisible,nt:this.zs})}}class Ta{constructor(t,e){this.Ne=t,this.Li=e}K(t,e,s){this.Ne.draw(t,this.Li,e,s)}}class Ls extends An{constructor(t,e,s){super(t,e,!1),this.wn=s,this.Ws=new Ta(this.wn.renderer(),n=>{const r=t.Pt();return r===null?null:t.At().Ot(n,r.Vt)})}Fe(t){return this.wn.priceValueBuilder(t)}We(t){return this.wn.isWhitespace(t)}qs(){const t=this.Es.$s();this.Is=this.Es.In().ie().map(e=>Object.assign(Object.assign({ut:e.se,et:NaN},t.Hs(e.se)),{je:e.He}))}Zs(t,e){e.Js(this.Is,oi(this.zs))}Gs(){this.wn.update({bars:this.Is.map(Pa),barSpacing:this.Ls.yt().he(),visibleRange:this.zs},this.Es.W())}}function Pa(i){return{x:i.et,time:i.ut,originalData:i.je,barColor:i.ue}}class ka extends Yt{constructor(){super(...arguments),this.Lt=null,this.$e=[]}it(t){this.Lt=t,this.$e=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.Lt===null||this.Lt.st.length===0||this.Lt.nt===null)return;this.$e.length||this.Ue(e);const n=Math.max(1,Math.floor(s)),r=Math.round(this.Lt.qe*s)-Math.floor(n/2),h=r+n;for(let o=this.Lt.nt.from;o<this.Lt.nt.to;o++){const l=this.Lt.st[o],c=this.$e[o-this.Lt.nt.from],u=Math.round(l.rt*s);let a,d;t.fillStyle=l.ue,u<=r?(a=u,d=h):(a=r,d=u-Math.floor(n/2)+n),t.fillRect(c.Os,a,c.di-c.Os+1,d-a)}}Ue(t){if(this.Lt===null||this.Lt.st.length===0||this.Lt.nt===null)return void(this.$e=[]);const e=Math.ceil(this.Lt.he*t)<=1?0:Math.max(1,Math.floor(t)),s=Math.round(this.Lt.he*t)-e;this.$e=new Array(this.Lt.nt.to-this.Lt.nt.from);for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const h=this.Lt.st[r],o=Math.round(h.et*t);let l,c;if(s%2){const u=(s-1)/2;l=o-u,c=o+u}else{const u=s/2;l=o-u,c=o+u-1}this.$e[r-this.Lt.nt.from]={Os:l,di:c,Ye:o,Xe:h.et*t,ut:h.ut}}for(let r=this.Lt.nt.from+1;r<this.Lt.nt.to;r++){const h=this.$e[r-this.Lt.nt.from],o=this.$e[r-this.Lt.nt.from-1];h.ut===o.ut+1&&h.Os-o.di!==e+1&&(o.Ye>o.Xe?o.di=h.Os-e-1:h.Os=o.di+e+1)}let n=Math.ceil(this.Lt.he*t);for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const h=this.$e[r-this.Lt.nt.from];h.di<h.Os&&(h.di=h.Os);const o=h.di-h.Os+1;n=Math.min(o,n)}if(e>0&&n<4)for(let r=this.Lt.nt.from;r<this.Lt.nt.to;r++){const h=this.$e[r-this.Lt.nt.from];h.di-h.Os+1>n&&(h.Ye>h.Xe?h.di-=1:h.Os+=1)}}}class Ra extends as{constructor(){super(...arguments),this.Ws=new ka}ne(t,e,s){return Object.assign(Object.assign({},this.te(t,e)),s.Hs(t))}Gs(){const t={st:this.Is,he:this.Ls.yt().he(),nt:this.zs,qe:this.Es.At().Ot(this.Es.W().base,x(this.Es.Pt()).Vt)};this.Ws.it(t)}}class za extends as{constructor(){super(...arguments),this.Ws=new Bo}ne(t,e,s){return Object.assign(Object.assign({},this.te(t,e)),s.Hs(t))}Gs(){const t=this.Es.W(),e={st:this.Is,Wt:t.lineStyle,ds:t.lineVisible?t.lineType:void 0,ht:t.lineWidth,Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,nt:this.zs,cs:this.Ls.yt().he()};this.Ws.it(e)}}const Na=/[2-9]/g;class li{constructor(t=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Je={},this.Qe=new Map,this.tr=t}ir(){this.Ke=0,this.Qe.clear(),this.Ze=1,this.Ge=1,this.Je={}}Si(t,e,s){return this.nr(t,e,s).width}xi(t,e,s){const n=this.nr(t,e,s);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}nr(t,e,s){const n=s||Na,r=String(e).replace(n,"0");if(this.Qe.has(r))return at(this.Qe.get(r)).sr;if(this.Ke===this.tr){const o=this.Je[this.Ge];delete this.Je[this.Ge],this.Qe.delete(o),this.Ge++,this.Ke--}t.save(),t.textBaseline="middle";const h=t.measureText(r);return t.restore(),h.width===0&&e.length||(this.Qe.set(r,{sr:h,er:this.Ze}),this.Je[this.Ze]=r,this.Ke++,this.Ze++),h}}class Fa{constructor(t){this.rr=null,this.k=null,this.hr="right",this.lr=t}ar(t,e,s){this.rr=t,this.k=e,this.hr=s}K(t){this.k!==null&&this.rr!==null&&this.rr.K(t,this.k,this.lr,this.hr)}}class jo{constructor(t,e,s){this._r=t,this.lr=new li(50),this.ur=e,this.F=s,this.j=-1,this.Ht=new Fa(this.lr)}xt(){const t=this.F.cr(this.ur);if(t===null)return null;const e=t.dr(this.ur)?t.vr():this.ur.At();if(e===null)return null;const s=t.pr(e);if(s==="overlay")return null;const n=this.F.mr();return n.P!==this.j&&(this.j=n.P,this.lr.ir()),this.Ht.ar(this._r.zi(),n,s),this.Ht}}class Wa extends Yt{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}br(t,e){var s;if(!(!((s=this.Lt)===null||s===void 0)&&s.Tt))return null;const{rt:n,ht:r,wr:h}=this.Lt;return e>=n-r-7&&e<=n+r+7?{gr:this.Lt,wr:h}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Lt===null||this.Lt.Tt===!1)return;const r=Math.round(this.Lt.rt*n);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.Lt.O,t.lineWidth=Math.floor(this.Lt.ht*s),be(t,this.Lt.Wt),Po(t,r,0,e.width))}}class In{constructor(t){this.Mr={rt:0,O:"rgba(0, 0, 0, 0)",ht:1,Wt:0,Tt:!1},this.Sr=new Wa,this.bt=!0,this.Es=t,this.Ls=t.qt(),this.Sr.it(this.Mr)}gt(){this.bt=!0}xt(){return this.Es.Tt()?(this.bt&&(this.kr(),this.bt=!1),this.Sr):null}}class Aa extends In{constructor(t){super(t)}kr(){this.Mr.Tt=!1;const t=this.Es.At(),e=t.yr().yr;if(e!==2&&e!==3)return;const s=this.Es.W();if(!s.baseLineVisible||!this.Es.Tt())return;const n=this.Es.Pt();n!==null&&(this.Mr.Tt=!0,this.Mr.rt=t.Ot(n.Vt,n.Vt),this.Mr.O=s.baseLineColor,this.Mr.ht=s.baseLineWidth,this.Mr.Wt=s.baseLineStyle)}}class Ia extends Yt{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}He(){return this.Lt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){const n=this.Lt;if(n===null)return;const r=Math.max(1,Math.floor(e)),h=r%2/2,o=Math.round(n.Xe.x*e)+h,l=n.Xe.y*s;t.fillStyle=n.Cr,t.beginPath();const c=Math.max(2,1.5*n.Tr)*e;t.arc(o,l,c,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.Pr,t.beginPath(),t.arc(o,l,n.ot*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=n.Rr,t.beginPath(),t.arc(o,l,n.ot*e+r/2,0,2*Math.PI,!1),t.stroke()}}const Ba=[{Dr:0,Or:.25,Ar:4,Vr:10,Br:.25,Ir:0,zr:.4,Er:.8},{Dr:.25,Or:.525,Ar:10,Vr:14,Br:0,Ir:0,zr:.8,Er:0},{Dr:.525,Or:1,Ar:14,Vr:14,Br:0,Ir:0,zr:0,Er:0}];function Ir(i,t,e,s){return function(n,r){if(n==="transparent")return n;const h=$i(n),o=h[3];return`rgba(${h[0]}, ${h[1]}, ${h[2]}, ${r*o})`}(i,e+(s-e)*t)}function Br(i,t){const e=i%2600/2600;let s;for(const l of Ba)if(e>=l.Dr&&e<=l.Or){s=l;break}oe(s!==void 0,"Last price animation internal logic error");const n=(e-s.Dr)/(s.Or-s.Dr);return{Pr:Ir(t,n,s.Br,s.Ir),Rr:Ir(t,n,s.zr,s.Er),ot:(r=n,h=s.Ar,o=s.Vr,h+(o-h)*r)};var r,h,o}class Va{constructor(t){this.Ht=new Ia,this.bt=!0,this.Lr=!0,this.Nr=performance.now(),this.Fr=this.Nr-1,this.Wr=t}jr(){this.Fr=this.Nr-1,this.gt()}Hr(){if(this.gt(),this.Wr.W().lastPriceAnimation===2){const t=performance.now(),e=this.Fr-t;if(e>0)return void(e<650&&(this.Fr+=2600));this.Nr=t,this.Fr=t+2600}}gt(){this.bt=!0}$r(){this.Lr=!0}Tt(){return this.Wr.W().lastPriceAnimation!==0}Ur(){switch(this.Wr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Fr}}xt(){return this.bt?(this.St(),this.bt=!1,this.Lr=!1):this.Lr&&(this.qr(),this.Lr=!1),this.Ht}St(){this.Ht.it(null);const t=this.Wr.qt().yt(),e=t.Xs(),s=this.Wr.Pt();if(e===null||s===null)return;const n=this.Wr.Yr(!0);if(n.Xr||!e.Kr(n.se))return;const r={x:t.Et(n.se),y:this.Wr.At().Ot(n.ct,s.Vt)},h=n.O,o=this.Wr.W().lineWidth,l=Br(this.Zr(),h);this.Ht.it({Cr:h,Tr:o,Pr:l.Pr,Rr:l.Rr,ot:l.ot,Xe:r})}qr(){const t=this.Ht.He();if(t!==null){const e=Br(this.Zr(),t.Cr);t.Pr=e.Pr,t.Rr=e.Rr,t.ot=e.ot}}Zr(){return this.Ur()?performance.now()-this.Nr:2599}}function Ye(i,t){return Ao(Math.min(Math.max(i,12),30)*t)}function ci(i,t){switch(i){case"arrowDown":case"arrowUp":return Ye(t,1);case"circle":return Ye(t,.8);case"square":return Ye(t,.7)}}function qo(i){return function(t){const e=Math.ceil(t);return e%2!=0?e-1:e}(Ye(i,1))}function Vr(i){return Math.max(Ye(i,.1),3)}function Ho(i,t,e,s,n){const r=ci("square",e),h=(r-1)/2,o=i-h,l=t-h;return s>=o&&s<=o+r&&n>=l&&n<=l+r}function Dr(i,t,e,s,n){const r=(ci("arrowUp",n)-1)/2,h=(Ao(n/2)-1)/2;t.beginPath(),i?(t.moveTo(e-r,s),t.lineTo(e,s-r),t.lineTo(e+r,s),t.lineTo(e+h,s),t.lineTo(e+h,s+r),t.lineTo(e-h,s+r),t.lineTo(e-h,s)):(t.moveTo(e-r,s),t.lineTo(e,s+r),t.lineTo(e+r,s),t.lineTo(e+h,s),t.lineTo(e+h,s-r),t.lineTo(e-h,s-r),t.lineTo(e-h,s)),t.fill()}function Da(i,t,e,s,n,r){return Ho(t,e,s,n,r)}class Ua extends Nn{constructor(){super(...arguments),this.Lt=null,this.lr=new li,this.j=-1,this.H="",this.Gr=""}it(t){this.Lt=t}ar(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Gr=Ie(t,e),this.lr.ir())}br(t,e){if(this.Lt===null||this.Lt.nt===null)return null;for(let s=this.Lt.nt.from;s<this.Lt.nt.to;s++){const n=this.Lt.st[s];if(ja(n,t,e))return{gr:n.Jr,wr:n.wr}}return null}Z({context:t},e,s){if(this.Lt!==null&&this.Lt.nt!==null){t.textBaseline="middle",t.font=this.Gr;for(let n=this.Lt.nt.from;n<this.Lt.nt.to;n++){const r=this.Lt.st[n];r.Jt!==void 0&&(r.Jt.$i=this.lr.Si(t,r.Jt.Qr),r.Jt.zt=this.j,r.Jt.et=r.et-r.Jt.$i/2),$a(r,t)}}}}function $a(i,t){t.fillStyle=i.O,i.Jt!==void 0&&function(e,s,n,r){e.fillText(s,n,r)}(t,i.Jt.Qr,i.Jt.et,i.Jt.rt),function(e,s){if(e.Ks!==0){switch(e.th){case"arrowDown":return void Dr(!1,s,e.et,e.rt,e.Ks);case"arrowUp":return void Dr(!0,s,e.et,e.rt,e.Ks);case"circle":return void function(n,r,h,o){const l=(ci("circle",o)-1)/2;n.beginPath(),n.arc(r,h,l,0,2*Math.PI,!1),n.fill()}(s,e.et,e.rt,e.Ks);case"square":return void function(n,r,h,o){const l=ci("square",o),c=(l-1)/2,u=r-c,a=h-c;n.fillRect(u,a,l,l)}(s,e.et,e.rt,e.Ks)}e.th}}(i,t)}function ja(i,t,e){return!(i.Jt===void 0||!function(s,n,r,h,o,l){const c=h/2;return o>=s&&o<=s+r&&l>=n-c&&l<=n+c}(i.Jt.et,i.Jt.rt,i.Jt.$i,i.Jt.zt,t,e))||function(s,n,r){if(s.Ks===0)return!1;switch(s.th){case"arrowDown":case"arrowUp":return Da(0,s.et,s.rt,s.Ks,n,r);case"circle":return function(h,o,l,c,u){const a=2+ci("circle",l)/2,d=h-c,m=o-u;return Math.sqrt(d*d+m*m)<=a}(s.et,s.rt,s.Ks,n,r);case"square":return Ho(s.et,s.rt,s.Ks,n,r)}}(i,t,e)}function qa(i,t,e,s,n,r,h,o,l){const c=Bt(e)?e:e.xe,u=Bt(e)?e:e.ge,a=Bt(e)?e:e.Me,d=Bt(t.size)?Math.max(t.size,0):1,m=qo(o.he())*d,g=m/2;switch(i.Ks=m,t.position){case"inBar":return i.rt=h.Ot(c,l),void(i.Jt!==void 0&&(i.Jt.rt=i.rt+g+r+.6*n));case"aboveBar":return i.rt=h.Ot(u,l)-g-s.ih,i.Jt!==void 0&&(i.Jt.rt=i.rt-g-.6*n,s.ih+=1.2*n),void(s.ih+=m+r);case"belowBar":return i.rt=h.Ot(a,l)+g+s.nh,i.Jt!==void 0&&(i.Jt.rt=i.rt+g+r+.6*n,s.nh+=1.2*n),void(s.nh+=m+r)}t.position}class Ha{constructor(t,e){this.bt=!0,this.sh=!0,this.eh=!0,this.rh=null,this.Ht=new Ua,this.Wr=t,this.Ui=e,this.Lt={st:[],nt:null}}gt(t){this.bt=!0,this.eh=!0,t==="data"&&(this.sh=!0)}xt(t){if(!this.Wr.Tt())return null;this.bt&&this.hh();const e=this.Ui.W().layout;return this.Ht.ar(e.fontSize,e.fontFamily),this.Ht.it(this.Lt),this.Ht}lh(){if(this.eh){if(this.Wr.ah().length>0){const t=this.Ui.yt().he(),e=Vr(t),s=1.5*qo(t)+2*e;this.rh={above:s,below:s}}else this.rh=null;this.eh=!1}return this.rh}hh(){const t=this.Wr.At(),e=this.Ui.yt(),s=this.Wr.ah();this.sh&&(this.Lt.st=s.map(u=>({ut:u.time,et:0,rt:0,Ks:0,th:u.shape,O:u.color,Jr:u.Jr,wr:u.id,Jt:void 0})),this.sh=!1);const n=this.Ui.W().layout;this.Lt.nt=null;const r=e.Xs();if(r===null)return;const h=this.Wr.Pt();if(h===null||this.Lt.st.length===0)return;let o=NaN;const l=Vr(e.he()),c={ih:l,nh:l};this.Lt.nt=Uo(this.Lt.st,r,!0);for(let u=this.Lt.nt.from;u<this.Lt.nt.to;u++){const a=s[u];a.time!==o&&(c.ih=l,c.nh=l,o=a.time);const d=this.Lt.st[u];d.et=e.Et(a.time),a.text!==void 0&&a.text.length>0&&(d.Jt={Qr:a.text,et:0,rt:0,$i:0,zt:0});const m=this.Wr.oh(a.time);m!==null&&qa(d,a,m,c,n.fontSize,l,t,e,h.Vt)}this.bt=!1}}class Ka extends In{constructor(t){super(t)}kr(){const t=this.Mr;t.Tt=!1;const e=this.Es.W();if(!e.priceLineVisible||!this.Es.Tt())return;const s=this.Es.Yr(e.priceLineSource===0);s.Xr||(t.Tt=!0,t.rt=s.yi,t.O=this.Es._h(s.O),t.ht=e.priceLineWidth,t.Wt=e.priceLineStyle)}}class Ja extends ls{constructor(t){super(),this.$t=t}Ei(t,e,s){t.Tt=!1,e.Tt=!1;const n=this.$t;if(!n.Tt())return;const r=n.W(),h=r.lastValueVisible,o=n.uh()!=="",l=r.seriesLastValueMode===0,c=n.Yr(!1);if(c.Xr)return;h&&(t.Jt=this.dh(c,h,l),t.Tt=t.Jt.length!==0),(o||l)&&(e.Jt=this.fh(c,h,o,l),e.Tt=e.Jt.length>0);const u=n._h(c.O),a=hs(u);s.t=a.t,s.yi=c.yi,e.Bt=n.qt().It(c.yi/n.At().zt()),t.Bt=u,t.O=a.i,e.O=a.i}fh(t,e,s,n){let r="";const h=this.$t.uh();return s&&h.length!==0&&(r+=`${h} `),e&&n&&(r+=this.$t.At().ph()?t.mh:t.bh),r.trim()}dh(t,e,s){return e?s?this.$t.At().ph()?t.bh:t.mh:t.Jt:""}}function Ur(i,t,e,s){const n=Number.isFinite(t),r=Number.isFinite(e);return n&&r?i(t,e):n||r?n?t:e:s}class pt{constructor(t,e){this.wh=t,this.gh=e}Mh(t){return t!==null&&this.wh===t.wh&&this.gh===t.gh}xh(){return new pt(this.wh,this.gh)}Sh(){return this.wh}kh(){return this.gh}yh(){return this.gh-this.wh}Fi(){return this.gh===this.wh||Number.isNaN(this.gh)||Number.isNaN(this.wh)}ts(t){return t===null?this:new pt(Ur(Math.min,this.Sh(),t.Sh(),-1/0),Ur(Math.max,this.kh(),t.kh(),1/0))}Ch(t){if(!Bt(t)||this.gh-this.wh===0)return;const e=.5*(this.gh+this.wh);let s=this.gh-e,n=this.wh-e;s*=t,n*=t,this.gh=e+s,this.wh=e+n}Th(t){Bt(t)&&(this.gh+=t,this.wh+=t)}Ph(){return{minValue:this.wh,maxValue:this.gh}}static Rh(t){return t===null?null:new pt(t.minValue,t.maxValue)}}class ji{constructor(t,e){this.Dh=t,this.Oh=e||null}Ah(){return this.Dh}Vh(){return this.Oh}Ph(){return this.Dh===null?null:{priceRange:this.Dh.Ph(),margins:this.Oh||void 0}}static Rh(t){return t===null?null:new ji(pt.Rh(t.priceRange),t.margins)}}class Xa extends In{constructor(t,e){super(t),this.Bh=e}kr(){const t=this.Mr;t.Tt=!1;const e=this.Bh.W();if(!this.Es.Tt()||!e.lineVisible)return;const s=this.Bh.Ih();s!==null&&(t.Tt=!0,t.rt=s,t.O=e.color,t.ht=e.lineWidth,t.Wt=e.lineStyle,t.wr=this.Bh.W().id)}}class Ya extends ls{constructor(t,e){super(),this.Wr=t,this.Bh=e}Ei(t,e,s){t.Tt=!1,e.Tt=!1;const n=this.Bh.W(),r=n.axisLabelVisible,h=n.title!=="",o=this.Wr;if(!r||!o.Tt())return;const l=this.Bh.Ih();if(l===null)return;h&&(e.Jt=n.title,e.Tt=!0),e.Bt=o.qt().It(l/o.At().zt()),t.Jt=this.zh(n.price),t.Tt=!0;const c=hs(n.axisLabelColor||n.color);s.t=c.t;const u=n.axisLabelTextColor||c.i;t.O=u,e.O=u,s.yi=l}zh(t){const e=this.Wr.Pt();return e===null?"":this.Wr.At().Wi(t,e.Vt)}}class Ga{constructor(t,e){this.Wr=t,this.cn=e,this.Eh=new Xa(t,this),this._r=new Ya(t,this),this.Lh=new jo(this._r,t,t.qt())}Nh(t){kt(this.cn,t),this.gt(),this.Wr.qt().Fh()}W(){return this.cn}Wh(){return this.Eh}jh(){return this.Lh}Hh(){return this._r}gt(){this.Eh.gt(),this._r.gt()}Ih(){const t=this.Wr,e=t.At();if(t.qt().yt().Fi()||e.Fi())return null;const s=t.Pt();return s===null?null:e.Ot(this.cn.price,s.Vt)}}class Qa extends Fn{constructor(t){super(),this.Ui=t}qt(){return this.Ui}}const Za={Bar:(i,t,e,s)=>{var n;const r=t.upColor,h=t.downColor,o=x(i(e,s)),l=Oe(o.Vt[0])<=Oe(o.Vt[3]);return{ue:(n=o.O)!==null&&n!==void 0?n:l?r:h}},Candlestick:(i,t,e,s)=>{var n,r,h;const o=t.upColor,l=t.downColor,c=t.borderUpColor,u=t.borderDownColor,a=t.wickUpColor,d=t.wickDownColor,m=x(i(e,s)),g=Oe(m.Vt[0])<=Oe(m.Vt[3]);return{ue:(n=m.O)!==null&&n!==void 0?n:g?o:l,Le:(r=m.Bt)!==null&&r!==void 0?r:g?c:u,Ee:(h=m.$h)!==null&&h!==void 0?h:g?a:d}},Custom:(i,t,e,s)=>{var n;return{ue:(n=x(i(e,s)).O)!==null&&n!==void 0?n:t.color}},Area:(i,t,e,s)=>{var n,r,h,o;const l=x(i(e,s));return{ue:(n=l._t)!==null&&n!==void 0?n:t.lineColor,_t:(r=l._t)!==null&&r!==void 0?r:t.lineColor,Ts:(h=l.Ts)!==null&&h!==void 0?h:t.topColor,Ps:(o=l.Ps)!==null&&o!==void 0?o:t.bottomColor}},Baseline:(i,t,e,s)=>{var n,r,h,o,l,c;const u=x(i(e,s));return{ue:u.Vt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,Pe:(n=u.Pe)!==null&&n!==void 0?n:t.topLineColor,Re:(r=u.Re)!==null&&r!==void 0?r:t.bottomLineColor,Se:(h=u.Se)!==null&&h!==void 0?h:t.topFillColor1,ke:(o=u.ke)!==null&&o!==void 0?o:t.topFillColor2,ye:(l=u.ye)!==null&&l!==void 0?l:t.bottomFillColor1,Ce:(c=u.Ce)!==null&&c!==void 0?c:t.bottomFillColor2}},Line:(i,t,e,s)=>{var n,r;const h=x(i(e,s));return{ue:(n=h.O)!==null&&n!==void 0?n:t.color,_t:(r=h.O)!==null&&r!==void 0?r:t.color}},Histogram:(i,t,e,s)=>{var n;return{ue:(n=x(i(e,s)).O)!==null&&n!==void 0?n:t.color}}};class tf{constructor(t){this.Uh=(e,s)=>s!==void 0?s.Vt:this.Wr.In().qh(e),this.Wr=t,this.Yh=Za[t.Xh()]}Hs(t,e){return this.Yh(this.Uh,this.Wr.W(),t,e)}}var $r;(function(i){i[i.NearestLeft=-1]="NearestLeft",i[i.None=0]="None",i[i.NearestRight=1]="NearestRight"})($r||($r={}));const Zt=30;class ef{constructor(){this.Kh=[],this.Zh=new Map,this.Gh=new Map}Jh(){return this.Ks()>0?this.Kh[this.Kh.length-1]:null}Qh(){return this.Ks()>0?this.tl(0):null}Bn(){return this.Ks()>0?this.tl(this.Kh.length-1):null}Ks(){return this.Kh.length}Fi(){return this.Ks()===0}Kr(t){return this.il(t,0)!==null}qh(t){return this.nl(t)}nl(t,e=0){const s=this.il(t,e);return s===null?null:Object.assign(Object.assign({},this.sl(s)),{se:this.tl(s)})}ie(){return this.Kh}el(t,e,s){if(this.Fi())return null;let n=null;for(const r of s)n=xi(n,this.rl(t,e,r));return n}it(t){this.Gh.clear(),this.Zh.clear(),this.Kh=t}tl(t){return this.Kh[t].se}sl(t){return this.Kh[t]}il(t,e){const s=this.hl(t);if(s===null&&e!==0)switch(e){case-1:return this.ll(t);case 1:return this.al(t);default:throw new TypeError("Unknown search mode")}return s}ll(t){let e=this.ol(t);return e>0&&(e-=1),e!==this.Kh.length&&this.tl(e)<t?e:null}al(t){const e=this._l(t);return e!==this.Kh.length&&t<this.tl(e)?e:null}hl(t){const e=this.ol(t);return e===this.Kh.length||t<this.Kh[e].se?null:e}ol(t){return fi(this.Kh,t,(e,s)=>e.se<s)}_l(t){return Do(this.Kh,t,(e,s)=>e.se>s)}ul(t,e,s){let n=null;for(let r=t;r<e;r++){const h=this.Kh[r].Vt[s];Number.isNaN(h)||(n===null?n={cl:h,dl:h}:(h<n.cl&&(n.cl=h),h>n.dl&&(n.dl=h)))}return n}rl(t,e,s){if(this.Fi())return null;let n=null;const r=x(this.Qh()),h=x(this.Bn()),o=Math.max(t,r),l=Math.min(e,h),c=Math.ceil(o/Zt)*Zt,u=Math.max(c,Math.floor(l/Zt)*Zt);{const d=this.ol(o),m=this._l(Math.min(l,c,e));n=xi(n,this.ul(d,m,s))}let a=this.Zh.get(s);a===void 0&&(a=new Map,this.Zh.set(s,a));for(let d=Math.max(c+1,o);d<u;d+=Zt){const m=Math.floor(d/Zt);let g=a.get(m);if(g===void 0){const v=this.ol(m*Zt),y=this._l((m+1)*Zt-1);g=this.ul(v,y,s),a.set(m,g)}n=xi(n,g)}{const d=this.ol(u),m=this._l(l);n=xi(n,this.ul(d,m,s))}return n}}function xi(i,t){return i===null?t:t===null?i:{cl:Math.min(i.cl,t.cl),dl:Math.max(i.dl,t.dl)}}class sf{constructor(t){this.fl=t}K(t,e,s){this.fl.draw(t)}G(t,e,s){var n,r;(r=(n=this.fl).drawBackground)===null||r===void 0||r.call(n,t)}}class Es{constructor(t){this.Qe=null,this.wn=t}xt(){var t;const e=this.wn.renderer();if(e===null)return null;if(((t=this.Qe)===null||t===void 0?void 0:t.vl)===e)return this.Qe.pl;const s=new sf(e);return this.Qe={vl:e,pl:s},s}ml(){var t,e,s;return(s=(e=(t=this.wn).zOrder)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:"normal"}}function Ko(i){var t,e,s,n,r;return{Jt:i.text(),yi:i.coordinate(),ki:(t=i.fixedCoordinate)===null||t===void 0?void 0:t.call(i),O:i.textColor(),t:i.backColor(),Tt:(s=(e=i.visible)===null||e===void 0?void 0:e.call(i))===null||s===void 0||s,ai:(r=(n=i.tickVisible)===null||n===void 0?void 0:n.call(i))===null||r===void 0||r}}class nf{constructor(t,e){this.Ht=new zo,this.bl=t,this.wl=e}xt(){return this.Ht.it(Object.assign({$i:this.wl.$i()},Ko(this.bl))),this.Ht}}class rf extends ls{constructor(t,e){super(),this.bl=t,this.Li=e}Ei(t,e,s){const n=Ko(this.bl);s.t=n.t,t.O=n.O;const r=2/12*this.Li.P();s.gi=r,s.Mi=r,s.yi=n.yi,s.ki=n.ki,t.Jt=n.Jt,t.Tt=n.Tt,t.ai=n.ai}}class hf{constructor(t,e){this.gl=null,this.Ml=null,this.xl=null,this.Sl=null,this.kl=null,this.yl=t,this.Wr=e}Cl(){return this.yl}On(){var t,e;(e=(t=this.yl).updateAllViews)===null||e===void 0||e.call(t)}Pn(){var t,e,s,n;const r=(s=(e=(t=this.yl).paneViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.gl)===null||n===void 0?void 0:n.vl)===r)return this.gl.pl;const h=r.map(o=>new Es(o));return this.gl={vl:r,pl:h},h}tn(){var t,e,s,n;const r=(s=(e=(t=this.yl).timeAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.Ml)===null||n===void 0?void 0:n.vl)===r)return this.Ml.pl;const h=this.Wr.qt().yt(),o=r.map(l=>new nf(l,h));return this.Ml={vl:r,pl:o},o}Rn(){var t,e,s,n;const r=(s=(e=(t=this.yl).priceAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.xl)===null||n===void 0?void 0:n.vl)===r)return this.xl.pl;const h=this.Wr.At(),o=r.map(l=>new rf(l,h));return this.xl={vl:r,pl:o},o}Tl(){var t,e,s,n;const r=(s=(e=(t=this.yl).priceAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.Sl)===null||n===void 0?void 0:n.vl)===r)return this.Sl.pl;const h=r.map(o=>new Es(o));return this.Sl={vl:r,pl:h},h}Pl(){var t,e,s,n;const r=(s=(e=(t=this.yl).timeAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.kl)===null||n===void 0?void 0:n.vl)===r)return this.kl.pl;const h=r.map(o=>new Es(o));return this.kl={vl:r,pl:h},h}Rl(t,e){var s,n,r;return(r=(n=(s=this.yl).autoscaleInfo)===null||n===void 0?void 0:n.call(s,t,e))!==null&&r!==void 0?r:null}br(t,e){var s,n,r;return(r=(n=(s=this.yl).hitTest)===null||n===void 0?void 0:n.call(s,t,e))!==null&&r!==void 0?r:null}}function Os(i,t,e,s){i.forEach(n=>{t(n).forEach(r=>{r.ml()===e&&s.push(r)})})}function Ts(i){return i.Pn()}function of(i){return i.Tl()}function lf(i){return i.Pl()}class Bn extends Qa{constructor(t,e,s,n,r){super(t),this.Lt=new ef,this.Eh=new Ka(this),this.Dl=[],this.Ol=new Aa(this),this.Al=null,this.Vl=null,this.Bl=[],this.Il=[],this.zl=null,this.El=[],this.cn=e,this.Ll=s;const h=new Ja(this);this.hn=[h],this.Lh=new jo(h,this,t),s!=="Area"&&s!=="Line"&&s!=="Baseline"||(this.Al=new Va(this)),this.Nl(),this.Fl(r)}S(){this.zl!==null&&clearTimeout(this.zl)}_h(t){return this.cn.priceLineColor||t}Yr(t){const e={Xr:!0},s=this.At();if(this.qt().yt().Fi()||s.Fi()||this.Lt.Fi())return e;const n=this.qt().yt().Xs(),r=this.Pt();if(n===null||r===null)return e;let h,o;if(t){const a=this.Lt.Jh();if(a===null)return e;h=a,o=a.se}else{const a=this.Lt.nl(n.di(),-1);if(a===null||(h=this.Lt.qh(a.se),h===null))return e;o=a.se}const l=h.Vt[3],c=this.$s().Hs(o,{Vt:h}),u=s.Ot(l,r.Vt);return{Xr:!1,ct:l,Jt:s.Wi(l,r.Vt),mh:s.Wl(l),bh:s.jl(l,r.Vt),O:c.ue,yi:u,se:o}}$s(){return this.Vl!==null||(this.Vl=new tf(this)),this.Vl}W(){return this.cn}Nh(t){const e=t.priceScaleId;e!==void 0&&e!==this.cn.priceScaleId&&this.qt().Hl(this,e),kt(this.cn,t),t.priceFormat!==void 0&&(this.Nl(),this.qt().$l()),this.qt().Ul(this),this.qt().ql(),this.wn.gt("options")}it(t,e){this.Lt.it(t),this.Yl(),this.wn.gt("data"),this.dn.gt("data"),this.Al!==null&&(e&&e.Xl?this.Al.Hr():t.length===0&&this.Al.jr());const s=this.qt().cr(this);this.qt().Kl(s),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}Zl(t){this.Bl=t,this.Yl();const e=this.qt().cr(this);this.dn.gt("data"),this.qt().Kl(e),this.qt().Ul(this),this.qt().ql(),this.qt().Fh()}Gl(){return this.Bl}ah(){return this.Il}Jl(t){const e=new Ga(this,t);return this.Dl.push(e),this.qt().Ul(this),e}Ql(t){const e=this.Dl.indexOf(t);e!==-1&&this.Dl.splice(e,1),this.qt().Ul(this)}Xh(){return this.Ll}Pt(){const t=this.ta();return t===null?null:{Vt:t.Vt[3],ia:t.ut}}ta(){const t=this.qt().yt().Xs();if(t===null)return null;const e=t.Os();return this.Lt.nl(e,1)}In(){return this.Lt}oh(t){const e=this.Lt.qh(t);return e===null?null:this.Ll==="Bar"||this.Ll==="Candlestick"||this.Ll==="Custom"?{we:e.Vt[0],ge:e.Vt[1],Me:e.Vt[2],xe:e.Vt[3]}:e.Vt[3]}na(t){const e=[];Os(this.El,Ts,"top",e);const s=this.Al;return s!==null&&s.Tt()&&(this.zl===null&&s.Ur()&&(this.zl=setTimeout(()=>{this.zl=null,this.qt().sa()},0)),s.$r(),e.push(s)),e}Pn(){const t=[];this.ea()||t.push(this.Ol),t.push(this.wn,this.Eh,this.dn);const e=this.Dl.map(s=>s.Wh());return t.push(...e),Os(this.El,Ts,"normal",t),t}ra(){return this.ha(Ts,"bottom")}la(t){return this.ha(of,t)}aa(t){return this.ha(lf,t)}oa(t,e){return this.El.map(s=>s.br(t,e)).filter(s=>s!==null)}Qi(t){return[this.Lh,...this.Dl.map(e=>e.jh())]}Rn(t,e){if(e!==this.Xi&&!this.ea())return[];const s=[...this.hn];for(const n of this.Dl)s.push(n.Hh());return this.El.forEach(n=>{s.push(...n.Rn())}),s}tn(){const t=[];return this.El.forEach(e=>{t.push(...e.tn())}),t}Rl(t,e){if(this.cn.autoscaleInfoProvider!==void 0){const s=this.cn.autoscaleInfoProvider(()=>{const n=this._a(t,e);return n===null?null:n.Ph()});return ji.Rh(s)}return this._a(t,e)}ua(){return this.cn.priceFormat.minMove}ca(){return this.da}On(){var t;this.wn.gt(),this.dn.gt();for(const e of this.hn)e.gt();for(const e of this.Dl)e.gt();this.Eh.gt(),this.Ol.gt(),(t=this.Al)===null||t===void 0||t.gt(),this.El.forEach(e=>e.On())}At(){return x(super.At())}Ct(t){if(!((this.Ll==="Line"||this.Ll==="Area"||this.Ll==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const e=this.Lt.qh(t);return e===null?null:{ct:e.Vt[3],ot:this.fa(),Bt:this.va(),Dt:this.pa(),Rt:this.ma(t)}}uh(){return this.cn.title}Tt(){return this.cn.visible}ba(t){this.El.push(new hf(t,this))}wa(t){this.El=this.El.filter(e=>e.Cl()!==t)}ga(){if(this.wn instanceof Ls)return t=>this.wn.Fe(t)}Ma(){if(this.wn instanceof Ls)return t=>this.wn.We(t)}ea(){return!cs(this.At().xa())}_a(t,e){if(!hi(t)||!hi(e)||this.Lt.Fi())return null;const s=this.Ll==="Line"||this.Ll==="Area"||this.Ll==="Baseline"||this.Ll==="Histogram"?[3]:[2,1],n=this.Lt.el(t,e,s);let r=n!==null?new pt(n.cl,n.dl):null;if(this.Xh()==="Histogram"){const o=this.cn.base,l=new pt(o,o);r=r!==null?r.ts(l):l}let h=this.dn.lh();return this.El.forEach(o=>{const l=o.Rl(t,e);if(l!=null&&l.priceRange){const m=new pt(l.priceRange.minValue,l.priceRange.maxValue);r=r!==null?r.ts(m):m}var c,u,a,d;l!=null&&l.margins&&(c=h,u=l.margins,h={above:Math.max((a=c==null?void 0:c.above)!==null&&a!==void 0?a:0,u.above),below:Math.max((d=c==null?void 0:c.below)!==null&&d!==void 0?d:0,u.below)})}),new ji(r,h)}fa(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}va(){switch(this.Ll){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}pa(){switch(this.Ll){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}ma(t){switch(this.Ll){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.$s().Hs(t).ue}Nl(){switch(this.cn.priceFormat.type){case"custom":this.da={format:this.cn.priceFormat.formatter};break;case"volume":this.da=new pa(this.cn.priceFormat.precision);break;case"percent":this.da=new No(this.cn.priceFormat.precision);break;default:{const t=Math.pow(10,this.cn.priceFormat.precision);this.da=new us(t,this.cn.priceFormat.minMove*t)}}this.Xi!==null&&this.Xi.Sa()}Yl(){const t=this.qt().yt();if(!t.ka()||this.Lt.Fi())return void(this.Il=[]);const e=x(this.Lt.Qh());this.Il=this.Bl.map((s,n)=>{const r=x(t.ya(s.time,!0)),h=r<e?1:-1;return{time:x(this.Lt.nl(r,h)).se,position:s.position,shape:s.shape,color:s.color,id:s.id,Jr:n,text:s.text,size:s.size,originalTime:s.originalTime}})}Fl(t){switch(this.dn=new Ha(this,this.qt()),this.Ll){case"Bar":this.wn=new xa(this,this.qt());break;case"Candlestick":this.wn=new Oa(this,this.qt());break;case"Line":this.wn=new za(this,this.qt());break;case"Custom":this.wn=new Ls(this,this.qt(),at(t));break;case"Area":this.wn=new ya(this,this.qt());break;case"Baseline":this.wn=new La(this,this.qt());break;case"Histogram":this.wn=new Ra(this,this.qt());break;default:throw Error("Unknown chart style assigned: "+this.Ll)}}ha(t,e){const s=[];return Os(this.El,t,e,s),s}}class cf{constructor(t){this.cn=t}Ca(t,e,s){let n=t;if(this.cn.mode===0)return n;const r=s.vn(),h=r.Pt();if(h===null)return n;const o=r.Ot(t,h),l=s.Ta().filter(u=>u instanceof Bn).reduce((u,a)=>{if(s.dr(a)||!a.Tt())return u;const d=a.At(),m=a.In();if(d.Fi()||!m.Kr(e))return u;const g=m.qh(e);if(g===null)return u;const v=Oe(a.Pt());return u.concat([d.Ot(g.Vt[3],v.Vt)])},[]);if(l.length===0)return n;l.sort((u,a)=>Math.abs(u-o)-Math.abs(a-o));const c=l[0];return n=r.pn(c,h),n}}class uf extends Yt{constructor(){super(...arguments),this.Lt=null}it(t){this.Lt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Lt===null)return;const r=Math.max(1,Math.floor(s));t.lineWidth=r,function(h,o){h.save(),h.lineWidth%2&&h.translate(.5,.5),o(),h.restore()}(t,()=>{const h=x(this.Lt);if(h.Pa){t.strokeStyle=h.Ra,be(t,h.Da),t.beginPath();for(const o of h.Oa){const l=Math.round(o.Aa*s);t.moveTo(l,-r),t.lineTo(l,e.height+r)}t.stroke()}if(h.Va){t.strokeStyle=h.Ba,be(t,h.Ia),t.beginPath();for(const o of h.za){const l=Math.round(o.Aa*n);t.moveTo(-r,l),t.lineTo(e.width+r,l)}t.stroke()}})}}class af{constructor(t){this.Ht=new uf,this.bt=!0,this.nn=t}gt(){this.bt=!0}xt(){if(this.bt){const t=this.nn.qt().W().grid,e={Va:t.horzLines.visible,Pa:t.vertLines.visible,Ba:t.horzLines.color,Ra:t.vertLines.color,Ia:t.horzLines.style,Da:t.vertLines.style,za:this.nn.vn().Ea(),Oa:(this.nn.qt().yt().Ea()||[]).map(s=>({Aa:s.coord}))};this.Ht.it(e),this.bt=!1}return this.Ht}}class ff{constructor(t){this.wn=new af(t)}Wh(){return this.wn}}const Ps={La:4,Na:1e-4};function Te(i,t){const e=100*(i-t)/t;return t<0?-e:e}function df(i,t){const e=Te(i.Sh(),t),s=Te(i.kh(),t);return new pt(e,s)}function Ge(i,t){const e=100*(i-t)/t+100;return t<0?-e:e}function pf(i,t){const e=Ge(i.Sh(),t),s=Ge(i.kh(),t);return new pt(e,s)}function qi(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=Math.log10(e+t.Na)+t.La;return i<0?-s:s}function Qe(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=Math.pow(10,e-t.La)-t.Na;return i<0?-s:s}function je(i,t){if(i===null)return null;const e=qi(i.Sh(),t),s=qi(i.kh(),t);return new pt(e,s)}function Mi(i,t){if(i===null)return null;const e=Qe(i.Sh(),t),s=Qe(i.kh(),t);return new pt(e,s)}function ks(i){if(i===null)return Ps;const t=Math.abs(i.kh()-i.Sh());if(t>=1||t<1e-15)return Ps;const e=Math.ceil(Math.abs(Math.log10(t))),s=Ps.La+e;return{La:s,Na:1/Math.pow(10,s)}}class Rs{constructor(t,e){if(this.Fa=t,this.Wa=e,function(s){if(s<0)return!1;for(let n=s;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.Fa))this.ja=[2,2.5,2];else{this.ja=[];for(let s=this.Fa;s!==1;){if(s%2==0)this.ja.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.ja.push(2,2.5),s/=5}if(this.ja.length>100)throw new Error("something wrong with base")}}}Ha(t,e,s){const n=this.Fa===0?0:1/this.Fa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),h=0,o=this.Wa[0];for(;;){const a=Si(r,n,1e-14)&&r>n+1e-14,d=Si(r,s*o,1e-14),m=Si(r,1,1e-14);if(!(a&&d&&m))break;r/=o,o=this.Wa[++h%this.Wa.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.ja.length>0&&(l=r,c=1,u=1e-14,Math.abs(l-c)<u))for(h=0,o=this.ja[0];Si(r,s*o,1e-14)&&r>n+1e-14;)r/=o,o=this.ja[++h%this.ja.length];var l,c,u;return r}}class jr{constructor(t,e,s,n){this.$a=[],this.Li=t,this.Fa=e,this.Ua=s,this.qa=n}Ha(t,e){if(t<e)throw new Error("high < low");const s=this.Li.zt(),n=(t-e)*this.Ya()/s,r=new Rs(this.Fa,[2,2.5,2]),h=new Rs(this.Fa,[2,2,2.5]),o=new Rs(this.Fa,[2.5,2,2]),l=[];return l.push(r.Ha(t,e,n),h.Ha(t,e,n),o.Ha(t,e,n)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let a=1;a<c.length;++a)c[a]<u&&(u=c[a]);return u}(l)}Xa(){const t=this.Li,e=t.Pt();if(e===null)return void(this.$a=[]);const s=t.zt(),n=this.Ua(s-1,e),r=this.Ua(0,e),h=this.Li.W().entireTextOnly?this.Ka()/2:0,o=h,l=s-1-h,c=Math.max(n,r),u=Math.min(n,r);if(c===u)return void(this.$a=[]);let a=this.Ha(c,u),d=c%a;d+=d<0?a:0;const m=c>=u?1:-1;let g=null,v=0;for(let y=c-d;y>u;y-=a){const L=this.qa(y,e,!0);g!==null&&Math.abs(L-g)<this.Ya()||L<o||L>l||(v<this.$a.length?(this.$a[v].Aa=L,this.$a[v].Za=t.Ga(y)):this.$a.push({Aa:L,Za:t.Ga(y)}),v++,g=L,t.Ja()&&(a=this.Ha(y*m,u)))}this.$a.length=v}Ea(){return this.$a}Ka(){return this.Li.P()}Ya(){return Math.ceil(2.5*this.Ka())}}function Jo(i){return i.slice().sort((t,e)=>x(t.Zi())-x(e.Zi()))}var qr;(function(i){i[i.Normal=0]="Normal",i[i.Logarithmic=1]="Logarithmic",i[i.Percentage=2]="Percentage",i[i.IndexedTo100=3]="IndexedTo100"})(qr||(qr={}));const Hr=new No,Kr=new us(100,1);class mf{constructor(t,e,s,n){this.Qa=0,this.io=null,this.Dh=null,this.no=null,this.so={eo:!1,ro:null},this.ho=0,this.lo=0,this.ao=new et,this.oo=new et,this._o=[],this.uo=null,this.co=null,this.do=null,this.fo=null,this.da=Kr,this.vo=ks(null),this.po=t,this.cn=e,this.mo=s,this.bo=n,this.wo=new jr(this,100,this.Mo.bind(this),this.xo.bind(this))}xa(){return this.po}W(){return this.cn}Nh(t){if(kt(this.cn,t),this.Sa(),t.mode!==void 0&&this.So({yr:t.mode}),t.scaleMargins!==void 0){const e=at(t.scaleMargins.top),s=at(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(e+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+s}`);this.ko(),this.co=null}}yo(){return this.cn.autoScale}Ja(){return this.cn.mode===1}ph(){return this.cn.mode===2}Co(){return this.cn.mode===3}yr(){return{Wn:this.cn.autoScale,To:this.cn.invertScale,yr:this.cn.mode}}So(t){const e=this.yr();let s=null;t.Wn!==void 0&&(this.cn.autoScale=t.Wn),t.yr!==void 0&&(this.cn.mode=t.yr,t.yr!==2&&t.yr!==3||(this.cn.autoScale=!0),this.so.eo=!1),e.yr===1&&t.yr!==e.yr&&(function(r,h){if(r===null)return!1;const o=Qe(r.Sh(),h),l=Qe(r.kh(),h);return isFinite(o)&&isFinite(l)}(this.Dh,this.vo)?(s=Mi(this.Dh,this.vo),s!==null&&this.Po(s)):this.cn.autoScale=!0),t.yr===1&&t.yr!==e.yr&&(s=je(this.Dh,this.vo),s!==null&&this.Po(s));const n=e.yr!==this.cn.mode;n&&(e.yr===2||this.ph())&&this.Sa(),n&&(e.yr===3||this.Co())&&this.Sa(),t.To!==void 0&&e.To!==t.To&&(this.cn.invertScale=t.To,this.Ro()),this.oo.m(e,this.yr())}Do(){return this.oo}P(){return this.mo.fontSize}zt(){return this.Qa}Oo(t){this.Qa!==t&&(this.Qa=t,this.ko(),this.co=null)}Ao(){if(this.io)return this.io;const t=this.zt()-this.Vo()-this.Bo();return this.io=t,t}Ah(){return this.Io(),this.Dh}Po(t,e){const s=this.Dh;(e||s===null&&t!==null||s!==null&&!s.Mh(t))&&(this.co=null,this.Dh=t)}Fi(){return this.Io(),this.Qa===0||!this.Dh||this.Dh.Fi()}zo(t){return this.To()?t:this.zt()-1-t}Ot(t,e){return this.ph()?t=Te(t,e):this.Co()&&(t=Ge(t,e)),this.xo(t,e)}Qs(t,e,s){this.Io();const n=this.Bo(),r=x(this.Ah()),h=r.Sh(),o=r.kh(),l=this.Ao()-1,c=this.To(),u=l/(o-h),a=s===void 0?0:s.from,d=s===void 0?t.length:s.to,m=this.Eo();for(let g=a;g<d;g++){const v=t[g],y=v.ct;if(isNaN(y))continue;let L=y;m!==null&&(L=m(v.ct,e));const z=n+u*(L-h),P=c?z:this.Qa-1-z;v.rt=P}}me(t,e,s){this.Io();const n=this.Bo(),r=x(this.Ah()),h=r.Sh(),o=r.kh(),l=this.Ao()-1,c=this.To(),u=l/(o-h),a=s===void 0?0:s.from,d=s===void 0?t.length:s.to,m=this.Eo();for(let g=a;g<d;g++){const v=t[g];let y=v.we,L=v.ge,z=v.Me,P=v.xe;m!==null&&(y=m(v.we,e),L=m(v.ge,e),z=m(v.Me,e),P=m(v.xe,e));let R=n+u*(y-h),B=c?R:this.Qa-1-R;v.ve=B,R=n+u*(L-h),B=c?R:this.Qa-1-R,v.ce=B,R=n+u*(z-h),B=c?R:this.Qa-1-R,v.de=B,R=n+u*(P-h),B=c?R:this.Qa-1-R,v.pe=B}}pn(t,e){const s=this.Mo(t,e);return this.Lo(s,e)}Lo(t,e){let s=t;return this.ph()?s=function(n,r){return r<0&&(n=-n),n/100*r+r}(s,e):this.Co()&&(s=function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r}(s,e)),s}Ta(){return this._o}No(){if(this.uo)return this.uo;let t=[];for(let e=0;e<this._o.length;e++){const s=this._o[e];s.Zi()===null&&s.Gi(e+1),t.push(s)}return t=Jo(t),this.uo=t,this.uo}Fo(t){this._o.indexOf(t)===-1&&(this._o.push(t),this.Sa(),this.Wo())}jo(t){const e=this._o.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this._o.splice(e,1),this._o.length===0&&(this.So({Wn:!0}),this.Po(null)),this.Sa(),this.Wo()}Pt(){let t=null;for(const e of this._o){const s=e.Pt();s!==null&&(t===null||s.ia<t.ia)&&(t=s)}return t===null?null:t.Vt}To(){return this.cn.invertScale}Ea(){const t=this.Pt()===null;if(this.co!==null&&(t||this.co.Ho===t))return this.co.Ea;this.wo.Xa();const e=this.wo.Ea();return this.co={Ea:e,Ho:t},this.ao.m(),e}$o(){return this.ao}Uo(t){this.ph()||this.Co()||this.do===null&&this.no===null&&(this.Fi()||(this.do=this.Qa-t,this.no=x(this.Ah()).xh()))}qo(t){if(this.ph()||this.Co()||this.do===null)return;this.So({Wn:!1}),(t=this.Qa-t)<0&&(t=0);let e=(this.do+.2*(this.Qa-1))/(t+.2*(this.Qa-1));const s=x(this.no).xh();e=Math.max(e,.1),s.Ch(e),this.Po(s)}Yo(){this.ph()||this.Co()||(this.do=null,this.no=null)}Xo(t){this.yo()||this.fo===null&&this.no===null&&(this.Fi()||(this.fo=t,this.no=x(this.Ah()).xh()))}Ko(t){if(this.yo()||this.fo===null)return;const e=x(this.Ah()).yh()/(this.Ao()-1);let s=t-this.fo;this.To()&&(s*=-1);const n=s*e,r=x(this.no).xh();r.Th(n),this.Po(r,!0),this.co=null}Zo(){this.yo()||this.fo!==null&&(this.fo=null,this.no=null)}ca(){return this.da||this.Sa(),this.da}Wi(t,e){switch(this.cn.mode){case 2:return this.Go(Te(t,e));case 3:return this.ca().format(Ge(t,e));default:return this.zh(t)}}Ga(t){switch(this.cn.mode){case 2:return this.Go(t);case 3:return this.ca().format(t);default:return this.zh(t)}}Wl(t){return this.zh(t,x(this.Jo()).ca())}jl(t,e){return t=Te(t,e),this.Go(t,Hr)}Qo(){return this._o}t_(t){this.so={ro:t,eo:!1}}On(){this._o.forEach(t=>t.On())}Sa(){this.co=null;const t=this.Jo();let e=100;t!==null&&(e=Math.round(1/t.ua())),this.da=Kr,this.ph()?(this.da=Hr,e=100):this.Co()?(this.da=new us(100,1),e=100):t!==null&&(this.da=t.ca()),this.wo=new jr(this,e,this.Mo.bind(this),this.xo.bind(this)),this.wo.Xa()}Wo(){this.uo=null}Jo(){return this._o[0]||null}Vo(){return this.To()?this.cn.scaleMargins.bottom*this.zt()+this.lo:this.cn.scaleMargins.top*this.zt()+this.ho}Bo(){return this.To()?this.cn.scaleMargins.top*this.zt()+this.ho:this.cn.scaleMargins.bottom*this.zt()+this.lo}Io(){this.so.eo||(this.so.eo=!0,this.i_())}ko(){this.io=null}xo(t,e){if(this.Io(),this.Fi())return 0;t=this.Ja()&&t?qi(t,this.vo):t;const s=x(this.Ah()),n=this.Bo()+(this.Ao()-1)*(t-s.Sh())/s.yh();return this.zo(n)}Mo(t,e){if(this.Io(),this.Fi())return 0;const s=this.zo(t),n=x(this.Ah()),r=n.Sh()+n.yh()*((s-this.Bo())/(this.Ao()-1));return this.Ja()?Qe(r,this.vo):r}Ro(){this.co=null,this.wo.Xa()}i_(){const t=this.so.ro;if(t===null)return;let e=null;const s=this.Qo();let n=0,r=0;for(const l of s){if(!l.Tt())continue;const c=l.Pt();if(c===null)continue;const u=l.Rl(t.Os(),t.di());let a=u&&u.Ah();if(a!==null){switch(this.cn.mode){case 1:a=je(a,this.vo);break;case 2:a=df(a,c.Vt);break;case 3:a=pf(a,c.Vt)}if(e=e===null?a:e.ts(x(a)),u!==null){const d=u.Vh();d!==null&&(n=Math.max(n,d.above),r=Math.max(n,d.below))}}}if(n===this.ho&&r===this.lo||(this.ho=n,this.lo=r,this.co=null,this.ko()),e!==null){if(e.Sh()===e.kh()){const l=this.Jo(),c=5*(l===null||this.ph()||this.Co()?1:l.ua());this.Ja()&&(e=Mi(e,this.vo)),e=new pt(e.Sh()-c,e.kh()+c),this.Ja()&&(e=je(e,this.vo))}if(this.Ja()){const l=Mi(e,this.vo),c=ks(l);if(h=c,o=this.vo,h.La!==o.La||h.Na!==o.Na){const u=this.no!==null?Mi(this.no,this.vo):null;this.vo=c,e=je(l,c),u!==null&&(this.no=je(u,c))}}this.Po(e)}else this.Dh===null&&(this.Po(new pt(-.5,.5)),this.vo=ks(null));var h,o;this.so.eo=!0}Eo(){return this.ph()?Te:this.Co()?Ge:this.Ja()?t=>qi(t,this.vo):null}n_(t,e,s){return e===void 0?(s===void 0&&(s=this.ca()),s.format(t)):e(t)}zh(t,e){return this.n_(t,this.bo.priceFormatter,e)}Go(t,e){return this.n_(t,this.bo.percentageFormatter,e)}}class gf{constructor(t,e){this._o=[],this.s_=new Map,this.Qa=0,this.e_=0,this.r_=1e3,this.uo=null,this.h_=new et,this.wl=t,this.Ui=e,this.l_=new ff(this);const s=e.W();this.a_=this.o_("left",s.leftPriceScale),this.__=this.o_("right",s.rightPriceScale),this.a_.Do().l(this.u_.bind(this,this.a_),this),this.__.Do().l(this.u_.bind(this,this.__),this),this.c_(s)}c_(t){if(t.leftPriceScale&&this.a_.Nh(t.leftPriceScale),t.rightPriceScale&&this.__.Nh(t.rightPriceScale),t.localization&&(this.a_.Sa(),this.__.Sa()),t.overlayPriceScales){const e=Array.from(this.s_.values());for(const s of e){const n=x(s[0].At());n.Nh(t.overlayPriceScales),t.localization&&n.Sa()}}}d_(t){switch(t){case"left":return this.a_;case"right":return this.__}return this.s_.has(t)?at(this.s_.get(t))[0].At():null}S(){this.qt().f_().p(this),this.a_.Do().p(this),this.__.Do().p(this),this._o.forEach(t=>{t.S&&t.S()}),this.h_.m()}v_(){return this.r_}p_(t){this.r_=t}qt(){return this.Ui}$i(){return this.e_}zt(){return this.Qa}m_(t){this.e_=t,this.b_()}Oo(t){this.Qa=t,this.a_.Oo(t),this.__.Oo(t),this._o.forEach(e=>{if(this.dr(e)){const s=e.At();s!==null&&s.Oo(t)}}),this.b_()}Ta(){return this._o}dr(t){const e=t.At();return e===null||this.a_!==e&&this.__!==e}Fo(t,e,s){const n=s!==void 0?s:this.g_().w_+1;this.M_(t,e,n)}jo(t){const e=this._o.indexOf(t);oe(e!==-1,"removeDataSource: invalid data source"),this._o.splice(e,1);const s=x(t.At()).xa();if(this.s_.has(s)){const r=at(this.s_.get(s)),h=r.indexOf(t);h!==-1&&(r.splice(h,1),r.length===0&&this.s_.delete(s))}const n=t.At();n&&n.Ta().indexOf(t)>=0&&n.jo(t),n!==null&&(n.Wo(),this.x_(n)),this.uo=null}pr(t){return t===this.a_?"left":t===this.__?"right":"overlay"}S_(){return this.a_}k_(){return this.__}y_(t,e){t.Uo(e)}C_(t,e){t.qo(e),this.b_()}T_(t){t.Yo()}P_(t,e){t.Xo(e)}R_(t,e){t.Ko(e),this.b_()}D_(t){t.Zo()}b_(){this._o.forEach(t=>{t.On()})}vn(){let t=null;return this.Ui.W().rightPriceScale.visible&&this.__.Ta().length!==0?t=this.__:this.Ui.W().leftPriceScale.visible&&this.a_.Ta().length!==0?t=this.a_:this._o.length!==0&&(t=this._o[0].At()),t===null&&(t=this.__),t}vr(){let t=null;return this.Ui.W().rightPriceScale.visible?t=this.__:this.Ui.W().leftPriceScale.visible&&(t=this.a_),t}x_(t){t!==null&&t.yo()&&this.O_(t)}A_(t){const e=this.wl.Xs();t.So({Wn:!0}),e!==null&&t.t_(e),this.b_()}V_(){this.O_(this.a_),this.O_(this.__)}B_(){this.x_(this.a_),this.x_(this.__),this._o.forEach(t=>{this.dr(t)&&this.x_(t.At())}),this.b_(),this.Ui.Fh()}No(){return this.uo===null&&(this.uo=Jo(this._o)),this.uo}I_(){return this.h_}z_(){return this.l_}O_(t){const e=t.Qo();if(e&&e.length>0&&!this.wl.Fi()){const s=this.wl.Xs();s!==null&&t.t_(s)}t.On()}g_(){const t=this.No();if(t.length===0)return{E_:0,w_:0};let e=0,s=0;for(let n=0;n<t.length;n++){const r=t[n].Zi();r!==null&&(r<e&&(e=r),r>s&&(s=r))}return{E_:e,w_:s}}M_(t,e,s){let n=this.d_(e);if(n===null&&(n=this.o_(e,this.Ui.W().overlayPriceScales)),this._o.push(t),!cs(e)){const r=this.s_.get(e)||[];r.push(t),this.s_.set(e,r)}n.Fo(t),t.Ji(n),t.Gi(s),this.x_(n),this.uo=null}u_(t,e,s){e.yr!==s.yr&&this.O_(t)}o_(t,e){const s=Object.assign({visible:!0,autoScale:!0},qt(e)),n=new mf(t,s,this.Ui.W().layout,this.Ui.W().localization);return n.Oo(this.zt()),n}}class vf{constructor(t,e,s=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Qe=new Map,this.Je=new Map,this.L_=t,this.N_=e,this.tr=s}F_(t){const e=t.time,s=this.N_.cacheKey(e),n=this.Qe.get(s);if(n!==void 0)return n.W_;if(this.Ke===this.tr){const h=this.Je.get(this.Ge);this.Je.delete(this.Ge),this.Qe.delete(at(h)),this.Ge++,this.Ke--}const r=this.L_(t);return this.Qe.set(s,{W_:r,er:this.Ze}),this.Je.set(this.Ze,s),this.Ke++,this.Ze++,r}}class Ze{constructor(t,e){oe(t<=e,"right should be >= left"),this.j_=t,this.H_=e}Os(){return this.j_}di(){return this.H_}U_(){return this.H_-this.j_+1}Kr(t){return this.j_<=t&&t<=this.H_}Mh(t){return this.j_===t.Os()&&this.H_===t.di()}}function Jr(i,t){return i===null||t===null?i===t:i.Mh(t)}class bf{constructor(){this.q_=new Map,this.Qe=null,this.Y_=!1}X_(t){this.Y_=t,this.Qe=null}K_(t,e){this.Z_(e),this.Qe=null;for(let s=e;s<t.length;++s){const n=t[s];let r=this.q_.get(n.timeWeight);r===void 0&&(r=[],this.q_.set(n.timeWeight,r)),r.push({index:s,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}G_(t,e){const s=Math.ceil(e/t);return this.Qe!==null&&this.Qe.J_===s||(this.Qe={Ea:this.Q_(s),J_:s}),this.Qe.Ea}Z_(t){if(t===0)return void this.q_.clear();const e=[];this.q_.forEach((s,n)=>{t<=s[0].index?e.push(n):s.splice(fi(s,t,r=>r.index<t),1/0)});for(const s of e)this.q_.delete(s)}Q_(t){let e=[];for(const s of Array.from(this.q_.keys()).sort((n,r)=>r-n)){if(!this.q_.get(s))continue;const n=e;e=[];const r=n.length;let h=0;const o=at(this.q_.get(s)),l=o.length;let c=1/0,u=-1/0;for(let a=0;a<l;a++){const d=o[a],m=d.index;for(;h<r;){const g=n[h],v=g.index;if(!(v<m)){c=v;break}h++,e.push(g),u=v,c=1/0}if(c-m>=t&&m-u>=t)e.push(d),u=m;else if(this.Y_)return n}for(;h<r;h++)e.push(n[h])}return e}}class Ne{constructor(t){this.tu=t}iu(){return this.tu===null?null:new Ze(Math.floor(this.tu.Os()),Math.ceil(this.tu.di()))}nu(){return this.tu}static su(){return new Ne(null)}}function wf(i,t){return i.weight>t.weight?i:t}class _f{constructor(t,e,s,n){this.e_=0,this.eu=null,this.ru=[],this.fo=null,this.do=null,this.hu=new bf,this.lu=new Map,this.au=Ne.su(),this.ou=!0,this._u=new et,this.uu=new et,this.cu=new et,this.du=null,this.fu=null,this.vu=[],this.cn=e,this.bo=s,this.pu=e.rightOffset,this.mu=e.barSpacing,this.Ui=t,this.N_=n,this.bu(),this.hu.X_(e.uniformDistribution)}W(){return this.cn}wu(t){kt(this.bo,t),this.gu(),this.bu()}Nh(t,e){var s;kt(this.cn,t),this.cn.fixLeftEdge&&this.Mu(),this.cn.fixRightEdge&&this.xu(),t.barSpacing!==void 0&&this.Ui.Gn(t.barSpacing),t.rightOffset!==void 0&&this.Ui.Jn(t.rightOffset),t.minBarSpacing!==void 0&&this.Ui.Gn((s=t.barSpacing)!==null&&s!==void 0?s:this.mu),this.gu(),this.bu(),this.cu.m()}mn(t){var e,s;return(s=(e=this.ru[t])===null||e===void 0?void 0:e.time)!==null&&s!==void 0?s:null}qi(t){var e;return(e=this.ru[t])!==null&&e!==void 0?e:null}ya(t,e){if(this.ru.length<1)return null;if(this.N_.key(t)>this.N_.key(this.ru[this.ru.length-1].time))return e?this.ru.length-1:null;const s=fi(this.ru,this.N_.key(t),(n,r)=>this.N_.key(n.time)<r);return this.N_.key(t)<this.N_.key(this.ru[s].time)?e?s:null:s}Fi(){return this.e_===0||this.ru.length===0||this.eu===null}ka(){return this.ru.length>0}Xs(){return this.Su(),this.au.iu()}ku(){return this.Su(),this.au.nu()}yu(){const t=this.Xs();if(t===null)return null;const e={from:t.Os(),to:t.di()};return this.Cu(e)}Cu(t){const e=Math.round(t.from),s=Math.round(t.to),n=x(this.Tu()),r=x(this.Pu());return{from:x(this.qi(Math.max(n,e))),to:x(this.qi(Math.min(r,s)))}}Ru(t){return{from:x(this.ya(t.from,!0)),to:x(this.ya(t.to,!0))}}$i(){return this.e_}m_(t){if(!isFinite(t)||t<=0||this.e_===t)return;const e=this.ku(),s=this.e_;if(this.e_=t,this.ou=!0,this.cn.lockVisibleTimeRangeOnResize&&s!==0){const n=this.mu*t/s;this.mu=n}if(this.cn.fixLeftEdge&&e!==null&&e.Os()<=0){const n=s-t;this.pu-=Math.round(n/this.mu)+1,this.ou=!0}this.Du(),this.Ou()}Et(t){if(this.Fi()||!hi(t))return 0;const e=this.Au()+this.pu-t;return this.e_-(e+.5)*this.mu-1}Js(t,e){const s=this.Au(),n=e===void 0?0:e.from,r=e===void 0?t.length:e.to;for(let h=n;h<r;h++){const o=t[h].ut,l=s+this.pu-o,c=this.e_-(l+.5)*this.mu-1;t[h].et=c}}Vu(t){return Math.ceil(this.Bu(t))}Jn(t){this.ou=!0,this.pu=t,this.Ou(),this.Ui.Iu(),this.Ui.Fh()}he(){return this.mu}Gn(t){this.zu(t),this.Ou(),this.Ui.Iu(),this.Ui.Fh()}Eu(){return this.pu}Ea(){if(this.Fi())return null;if(this.fu!==null)return this.fu;const t=this.mu,e=5*(this.Ui.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),s=Math.round(e/t),n=x(this.Xs()),r=Math.max(n.Os(),n.Os()-s),h=Math.max(n.di(),n.di()-s),o=this.hu.G_(t,e),l=this.Tu()+s,c=this.Pu()-s,u=this.Lu(),a=this.cn.fixLeftEdge||u,d=this.cn.fixRightEdge||u;let m=0;for(const g of o){if(!(r<=g.index&&g.index<=h))continue;let v;m<this.vu.length?(v=this.vu[m],v.coord=this.Et(g.index),v.label=this.Nu(g),v.weight=g.weight):(v={needAlignCoordinate:!1,coord:this.Et(g.index),label:this.Nu(g),weight:g.weight},this.vu.push(v)),this.mu>e/2&&!u?v.needAlignCoordinate=!1:v.needAlignCoordinate=a&&g.index<=l||d&&g.index>=c,m++}return this.vu.length=m,this.fu=this.vu,this.vu}Fu(){this.ou=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Wu(t){this.ou=!0,this.eu=t,this.Ou(),this.Mu()}ju(t,e){const s=this.Bu(t),n=this.he(),r=n+e*(n/10);this.Gn(r),this.cn.rightBarStaysOnScroll||this.Jn(this.Eu()+(s-this.Bu(t)))}Uo(t){this.fo&&this.Zo(),this.do===null&&this.du===null&&(this.Fi()||(this.do=t,this.Hu()))}qo(t){if(this.du===null)return;const e=nn(this.e_-t,0,this.e_),s=nn(this.e_-x(this.do),0,this.e_);e!==0&&s!==0&&this.Gn(this.du.he*e/s)}Yo(){this.do!==null&&(this.do=null,this.$u())}Xo(t){this.fo===null&&this.du===null&&(this.Fi()||(this.fo=t,this.Hu()))}Ko(t){if(this.fo===null)return;const e=(this.fo-t)/this.he();this.pu=x(this.du).Eu+e,this.ou=!0,this.Ou()}Zo(){this.fo!==null&&(this.fo=null,this.$u())}Uu(){this.qu(this.cn.rightOffset)}qu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.pu,n=performance.now();this.Ui.Xn({Yu:r=>(r-n)/e>=1,Xu:r=>{const h=(r-n)/e;return h>=1?t:s+(t-s)*h}})}gt(t,e){this.ou=!0,this.ru=t,this.hu.K_(t,e),this.Ou()}Ku(){return this._u}Zu(){return this.uu}Gu(){return this.cu}Au(){return this.eu||0}Ju(t){const e=t.U_();this.zu(this.e_/e),this.pu=t.di()-this.Au(),this.Ou(),this.ou=!0,this.Ui.Iu(),this.Ui.Fh()}Qu(){const t=this.Tu(),e=this.Pu();t!==null&&e!==null&&this.Ju(new Ze(t,e+this.cn.rightOffset))}tc(t){const e=new Ze(t.from,t.to);this.Ju(e)}Yi(t){return this.bo.timeFormatter!==void 0?this.bo.timeFormatter(t.originalTime):this.N_.formatHorzItem(t.time)}Lu(){const{handleScroll:t,handleScale:e}=this.Ui.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Tu(){return this.ru.length===0?null:0}Pu(){return this.ru.length===0?null:this.ru.length-1}ic(t){return(this.e_-1-t)/this.mu}Bu(t){const e=this.ic(t),s=this.Au()+this.pu-e;return Math.round(1e6*s)/1e6}zu(t){const e=this.mu;this.mu=t,this.Du(),e!==this.mu&&(this.ou=!0,this.nc())}Su(){if(!this.ou)return;if(this.ou=!1,this.Fi())return void this.sc(Ne.su());const t=this.Au(),e=this.e_/this.mu,s=this.pu+t,n=new Ze(s-e+1,s);this.sc(new Ne(n))}Du(){const t=this.ec();if(this.mu<t&&(this.mu=t,this.ou=!0),this.e_!==0){const e=.5*this.e_;this.mu>e&&(this.mu=e,this.ou=!0)}}ec(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.ru.length!==0?this.e_/this.ru.length:this.cn.minBarSpacing}Ou(){const t=this.rc();this.pu>t&&(this.pu=t,this.ou=!0);const e=this.hc();e!==null&&this.pu<e&&(this.pu=e,this.ou=!0)}hc(){const t=this.Tu(),e=this.eu;return t===null||e===null?null:t-e-1+(this.cn.fixLeftEdge?this.e_/this.mu:Math.min(2,this.ru.length))}rc(){return this.cn.fixRightEdge?0:this.e_/this.mu-Math.min(2,this.ru.length)}Hu(){this.du={he:this.he(),Eu:this.Eu()}}$u(){this.du=null}Nu(t){let e=this.lu.get(t.weight);return e===void 0&&(e=new vf(s=>this.lc(s),this.N_),this.lu.set(t.weight,e)),e.F_(t)}lc(t){return this.N_.formatTickmark(t,this.bo)}sc(t){const e=this.au;this.au=t,Jr(e.iu(),this.au.iu())||this._u.m(),Jr(e.nu(),this.au.nu())||this.uu.m(),this.nc()}nc(){this.fu=null}gu(){this.nc(),this.lu.clear()}bu(){this.N_.updateFormatter(this.bo)}Mu(){if(!this.cn.fixLeftEdge)return;const t=this.Tu();if(t===null)return;const e=this.Xs();if(e===null)return;const s=e.Os()-t;if(s<0){const n=this.pu-s-1;this.Jn(n)}this.Du()}xu(){this.Ou(),this.Du()}}class yf extends Nn{constructor(t){super(),this.ac=new Map,this.Lt=t}Z(t){}J(t){if(!this.Lt.Tt)return;const{context:e,mediaSize:s}=t;let n=0;for(const h of this.Lt.oc){if(h.Jt.length===0)continue;e.font=h.R;const o=this._c(e,h.Jt);o>s.width?h.ju=s.width/o:h.ju=1,n+=h.uc*h.ju}let r=0;switch(this.Lt.cc){case"top":r=0;break;case"center":r=Math.max((s.height-n)/2,0);break;case"bottom":r=Math.max(s.height-n,0)}e.fillStyle=this.Lt.O;for(const h of this.Lt.oc){e.save();let o=0;switch(this.Lt.dc){case"left":e.textAlign="left",o=h.uc/2;break;case"center":e.textAlign="center",o=s.width/2;break;case"right":e.textAlign="right",o=s.width-1-h.uc/2}e.translate(o,r),e.textBaseline="top",e.font=h.R,e.scale(h.ju,h.ju),e.fillText(h.Jt,0,h.fc),e.restore(),r+=h.uc*h.ju}}_c(t,e){const s=this.vc(t.font);let n=s.get(e);return n===void 0&&(n=t.measureText(e).width,s.set(e,n)),n}vc(t){let e=this.ac.get(t);return e===void 0&&(e=new Map,this.ac.set(t,e)),e}}class Sf{constructor(t){this.bt=!0,this.jt={Tt:!1,O:"",oc:[],cc:"center",dc:"center"},this.Ht=new yf(this.jt),this.$t=t}gt(){this.bt=!0}xt(){return this.bt&&(this.St(),this.bt=!1),this.Ht}St(){const t=this.$t.W(),e=this.jt;e.Tt=t.visible,e.Tt&&(e.O=t.color,e.dc=t.horzAlign,e.cc=t.vertAlign,e.oc=[{Jt:t.text,R:Ie(t.fontSize,t.fontFamily,t.fontStyle),uc:1.2*t.fontSize,fc:0,ju:0}])}}class xf extends Fn{constructor(t,e){super(),this.cn=e,this.wn=new Sf(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}On(){this.wn.gt()}}var Xr,Yr,Gr,rn,Qr;(function(i){i[i.OnTouchEnd=0]="OnTouchEnd",i[i.OnNextTap=1]="OnNextTap"})(Xr||(Xr={}));class Mf{constructor(t,e,s){this.mc=[],this.bc=[],this.e_=0,this.wc=null,this.gc=new et,this.Mc=new et,this.xc=null,this.Sc=t,this.cn=e,this.N_=s,this.kc=new ia(this),this.wl=new _f(this,e.timeScale,this.cn.localization,s),this.wt=new da(this,e.crosshair),this.yc=new cf(e.crosshair),this.Cc=new xf(this,e.watermark),this.Tc(),this.mc[0].p_(2e3),this.Pc=this.Rc(0),this.Dc=this.Rc(1)}$l(){this.Oc(rt.es())}Fh(){this.Oc(rt.ss())}sa(){this.Oc(new rt(1))}Ul(t){const e=this.Ac(t);this.Oc(e)}Vc(){return this.wc}Bc(t){const e=this.wc;this.wc=t,e!==null&&this.Ul(e.Ic),t!==null&&this.Ul(t.Ic)}W(){return this.cn}Nh(t){kt(this.cn,t),this.mc.forEach(e=>e.c_(t)),t.timeScale!==void 0&&this.wl.Nh(t.timeScale),t.localization!==void 0&&this.wl.wu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.gc.m(),this.Pc=this.Rc(0),this.Dc=this.Rc(1),this.$l()}zc(t,e){if(t==="left")return void this.Nh({leftPriceScale:e});if(t==="right")return void this.Nh({rightPriceScale:e});const s=this.Ec(t);s!==null&&(s.At.Nh(e),this.gc.m())}Ec(t){for(const e of this.mc){const s=e.d_(t);if(s!==null)return{Ut:e,At:s}}return null}yt(){return this.wl}Lc(){return this.mc}Nc(){return this.Cc}Fc(){return this.wt}Wc(){return this.Mc}jc(t,e){t.Oo(e),this.Iu()}m_(t){this.e_=t,this.wl.m_(this.e_),this.mc.forEach(e=>e.m_(t)),this.Iu()}Tc(t){const e=new gf(this.wl,this);t!==void 0?this.mc.splice(t,0,e):this.mc.push(e);const s=t===void 0?this.mc.length-1:t,n=rt.es();return n.Nn(s,{Fn:0,Wn:!0}),this.Oc(n),e}y_(t,e,s){t.y_(e,s)}C_(t,e,s){t.C_(e,s),this.ql(),this.Oc(this.Hc(t,2))}T_(t,e){t.T_(e),this.Oc(this.Hc(t,2))}P_(t,e,s){e.yo()||t.P_(e,s)}R_(t,e,s){e.yo()||(t.R_(e,s),this.ql(),this.Oc(this.Hc(t,2)))}D_(t,e){e.yo()||(t.D_(e),this.Oc(this.Hc(t,2)))}A_(t,e){t.A_(e),this.Oc(this.Hc(t,2))}$c(t){this.wl.Uo(t)}Uc(t,e){const s=this.yt();if(s.Fi()||e===0)return;const n=s.$i();t=Math.max(1,Math.min(t,n)),s.ju(t,e),this.Iu()}qc(t){this.Yc(0),this.Xc(t),this.Kc()}Zc(t){this.wl.qo(t),this.Iu()}Gc(){this.wl.Yo(),this.Fh()}Yc(t){this.wl.Xo(t)}Xc(t){this.wl.Ko(t),this.Iu()}Kc(){this.wl.Zo(),this.Fh()}Mt(){return this.bc}Jc(t,e,s,n,r){this.wt.gn(t,e);let h=NaN,o=this.wl.Vu(t);const l=this.wl.Xs();l!==null&&(o=Math.min(Math.max(l.Os(),o),l.di()));const c=n.vn(),u=c.Pt();u!==null&&(h=c.pn(e,u)),h=this.yc.Ca(h,o,n),this.wt.kn(o,h,n),this.sa(),r||this.Mc.m(this.wt.kt(),{x:t,y:e},s)}Qc(t,e,s){const n=s.vn(),r=n.Pt(),h=n.Ot(t,x(r)),o=this.wl.ya(e,!0),l=this.wl.Et(x(o));this.Jc(l,h,null,s,!0)}td(t){this.Fc().Cn(),this.sa(),t||this.Mc.m(null,null,null)}ql(){const t=this.wt.Ut();if(t!==null){const e=this.wt.xn(),s=this.wt.Sn();this.Jc(e,s,null,t)}this.wt.On()}nd(t,e,s){const n=this.wl.mn(0);e!==void 0&&s!==void 0&&this.wl.gt(e,s);const r=this.wl.mn(0),h=this.wl.Au(),o=this.wl.Xs();if(o!==null&&n!==null&&r!==null){const l=o.Kr(h),c=this.N_.key(n)>this.N_.key(r),u=t!==null&&t>h&&!c,a=this.wl.W().allowShiftVisibleRangeOnWhitespaceReplacement,d=l&&(s!==void 0||a)&&this.wl.W().shiftVisibleRangeOnNewBar;if(u&&!d){const m=t-h;this.wl.Jn(this.wl.Eu()-m)}}this.wl.Wu(t)}Kl(t){t!==null&&t.B_()}cr(t){const e=this.mc.find(s=>s.No().includes(t));return e===void 0?null:e}Iu(){this.Cc.On(),this.mc.forEach(t=>t.B_()),this.ql()}S(){this.mc.forEach(t=>t.S()),this.mc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}sd(){return this.kc}mr(){return this.kc.W()}f_(){return this.gc}ed(t,e,s){const n=this.mc[0],r=this.rd(e,t,n,s);return this.bc.push(r),this.bc.length===1?this.$l():this.Fh(),r}hd(t){const e=this.cr(t),s=this.bc.indexOf(t);oe(s!==-1,"Series not found"),this.bc.splice(s,1),x(e).jo(t),t.S&&t.S()}Hl(t,e){const s=x(this.cr(t));s.jo(t);const n=this.Ec(e);if(n===null){const r=t.Zi();s.Fo(t,e,r)}else{const r=n.Ut===s?t.Zi():void 0;n.Ut.Fo(t,e,r)}}Qu(){const t=rt.ss();t.$n(),this.Oc(t)}ld(t){const e=rt.ss();e.Yn(t),this.Oc(e)}Zn(){const t=rt.ss();t.Zn(),this.Oc(t)}Gn(t){const e=rt.ss();e.Gn(t),this.Oc(e)}Jn(t){const e=rt.ss();e.Jn(t),this.Oc(e)}Xn(t){const e=rt.ss();e.Xn(t),this.Oc(e)}Un(){const t=rt.ss();t.Un(),this.Oc(t)}ad(){return this.cn.rightPriceScale.visible?"right":"left"}od(){return this.Dc}q(){return this.Pc}It(t){const e=this.Dc,s=this.Pc;if(e===s)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.xc===null||this.xc.Ts!==s||this.xc.Ps!==e)this.xc={Ts:s,Ps:e,_d:new Map};else{const r=this.xc._d.get(t);if(r!==void 0)return r}const n=function(r,h,o){const[l,c,u,a]=$i(r),[d,m,g,v]=$i(h),y=[wt(l+o*(d-l)),wt(c+o*(m-c)),wt(u+o*(g-u)),ko(a+o*(v-a))];return`rgba(${y[0]}, ${y[1]}, ${y[2]}, ${y[3]})`}(s,e,t/100);return this.xc._d.set(t,n),n}Hc(t,e){const s=new rt(e);if(t!==null){const n=this.mc.indexOf(t);s.Nn(n,{Fn:e})}return s}Ac(t,e){return e===void 0&&(e=2),this.Hc(this.cr(t),e)}Oc(t){this.Sc&&this.Sc(t),this.mc.forEach(e=>e.z_().Wh().gt())}rd(t,e,s,n){const r=new Bn(this,t,e,s,n),h=t.priceScaleId!==void 0?t.priceScaleId:this.ad();return s.Fo(r,h),cs(h)||r.Nh(t),r}Rc(t){const e=this.cn.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}}function hn(i){return!Bt(i)&&!ai(i)}function Xo(i){return Bt(i)}(function(i){i[i.Disabled=0]="Disabled",i[i.Continuous=1]="Continuous",i[i.OnDataUpdate=2]="OnDataUpdate"})(Yr||(Yr={})),function(i){i[i.LastBar=0]="LastBar",i[i.LastVisible=1]="LastVisible"}(Gr||(Gr={})),function(i){i.Solid="solid",i.VerticalGradient="gradient"}(rn||(rn={})),function(i){i[i.Year=0]="Year",i[i.Month=1]="Month",i[i.DayOfMonth=2]="DayOfMonth",i[i.Time=3]="Time",i[i.TimeWithSeconds=4]="TimeWithSeconds"}(Qr||(Qr={}));const Zr=i=>i.getUTCFullYear();function Cf(i,t,e){return t.replace(/yyyy/g,(s=>Ht(Zr(s),4))(i)).replace(/yy/g,(s=>Ht(Zr(s)%100,2))(i)).replace(/MMMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(i,e)).replace(/MMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(i,e)).replace(/MM/g,(s=>Ht((n=>n.getUTCMonth()+1)(s),2))(i)).replace(/dd/g,(s=>Ht((n=>n.getUTCDate())(s),2))(i))}class Yo{constructor(t="yyyy-MM-dd",e="default"){this.ud=t,this.dd=e}F_(t){return Cf(t,this.ud,this.dd)}}class Lf{constructor(t){this.fd=t||"%h:%m:%s"}F_(t){return this.fd.replace("%h",Ht(t.getUTCHours(),2)).replace("%m",Ht(t.getUTCMinutes(),2)).replace("%s",Ht(t.getUTCSeconds(),2))}}const Ef={vd:"yyyy-MM-dd",pd:"%h:%m:%s",md:" ",bd:"default"};class Of{constructor(t={}){const e=Object.assign(Object.assign({},Ef),t);this.wd=new Yo(e.vd,e.bd),this.gd=new Lf(e.pd),this.Md=e.md}F_(t){return`${this.wd.F_(t)}${this.Md}${this.gd.F_(t)}`}}function Ci(i){return 60*i*60*1e3}function zs(i){return 60*i*1e3}const Li=[{xd:(th=1,1e3*th),Sd:10},{xd:zs(1),Sd:20},{xd:zs(5),Sd:21},{xd:zs(30),Sd:22},{xd:Ci(1),Sd:30},{xd:Ci(3),Sd:31},{xd:Ci(6),Sd:32},{xd:Ci(12),Sd:33}];var th;function eh(i,t){if(i.getUTCFullYear()!==t.getUTCFullYear())return 70;if(i.getUTCMonth()!==t.getUTCMonth())return 60;if(i.getUTCDate()!==t.getUTCDate())return 50;for(let e=Li.length-1;e>=0;--e)if(Math.floor(t.getTime()/Li[e].xd)!==Math.floor(i.getTime()/Li[e].xd))return Li[e].Sd;return 0}function Ns(i){let t=i;if(ai(i)&&(t=Vn(i)),!hn(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{kd:Math.round(e.getTime()/1e3),yd:t}}function ih(i){if(!Xo(i))throw new Error("time must be of type isUTCTimestamp");return{kd:i}}function Vn(i){const t=new Date(i);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${i}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function sh(i){ai(i.time)&&(i.time=Vn(i.time))}class nh{options(){return this.cn}setOptions(t){this.cn=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(e){e.forEach(sh)}(t):sh(t)}createConverterToInternalObj(t){return x(function(e){return e.length===0?null:hn(e[0].time)||ai(e[0].time)?Ns:ih}(t))}key(t){return typeof t=="object"&&"kd"in t?t.kd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.yd===void 0?new Date(1e3*e.kd).getTime():new Date(Date.UTC(e.yd.year,e.yd.month-1,e.yd.day)).getTime()}convertHorzItemToInternal(t){return Xo(e=t)?ih(e):hn(e)?Ns(e):Ns(Vn(e));var e}updateFormatter(t){if(!this.cn)return;const e=t.dateFormat;this.cn.timeScale.timeVisible?this.Cd=new Of({vd:e,pd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",md:"   ",bd:t.locale}):this.Cd=new Yo(e,t.locale)}formatHorzItem(t){const e=t;return this.Cd.F_(new Date(1e3*e.kd))}formatTickmark(t,e){const s=function(r,h,o){switch(r){case 0:case 10:return h?o?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return h?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),n=this.cn.timeScale;if(n.tickMarkFormatter!==void 0){const r=n.tickMarkFormatter(t.originalTime,s,e.locale);if(r!==null)return r}return function(r,h,o){const l={};switch(h){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=r.yd===void 0?new Date(1e3*r.kd):new Date(Date.UTC(r.yd.year,r.yd.month-1,r.yd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(o,l)}(t.time,s,e.locale)}maxTickMarkWeight(t){let e=t.reduce(wf,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(s,n=0){if(s.length===0)return;let r=n===0?null:s[n-1].time.kd,h=r!==null?new Date(1e3*r):null,o=0;for(let l=n;l<s.length;++l){const c=s[l],u=new Date(1e3*c.time.kd);h!==null&&(c.timeWeight=eh(u,h)),o+=c.time.kd-(r||c.time.kd),r=c.time.kd,h=u}if(n===0&&s.length>1){const l=Math.ceil(o/(s.length-1)),c=new Date(1e3*(s[0].time.kd-l));s[0].timeWeight=eh(new Date(1e3*s[0].time.kd),c)}})(t,e)}static Td(t){return kt({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const Be=typeof window<"u";function rh(){return!!Be&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Fs(){return!!Be&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function on(i){return i+i%2}function Ws(i,t){return i.Pd-t.Pd}function As(i,t,e){const s=(i.Pd-t.Pd)/(i.ut-t.ut);return Math.sign(s)*Math.min(Math.abs(s),e)}class Tf{constructor(t,e,s,n){this.Rd=null,this.Dd=null,this.Od=null,this.Ad=null,this.Vd=null,this.Bd=0,this.Id=0,this.zd=t,this.Ed=e,this.Ld=s,this.rs=n}Nd(t,e){if(this.Rd!==null){if(this.Rd.ut===e)return void(this.Rd.Pd=t);if(Math.abs(this.Rd.Pd-t)<this.rs)return}this.Ad=this.Od,this.Od=this.Dd,this.Dd=this.Rd,this.Rd={ut:e,Pd:t}}Dr(t,e){if(this.Rd===null||this.Dd===null||e-this.Rd.ut>50)return;let s=0;const n=As(this.Rd,this.Dd,this.Ed),r=Ws(this.Rd,this.Dd),h=[n],o=[r];if(s+=r,this.Od!==null){const c=As(this.Dd,this.Od,this.Ed);if(Math.sign(c)===Math.sign(n)){const u=Ws(this.Dd,this.Od);if(h.push(c),o.push(u),s+=u,this.Ad!==null){const a=As(this.Od,this.Ad,this.Ed);if(Math.sign(a)===Math.sign(n)){const d=Ws(this.Od,this.Ad);h.push(a),o.push(d),s+=d}}}}let l=0;for(let c=0;c<h.length;++c)l+=o[c]/s*h[c];Math.abs(l)<this.zd||(this.Vd={Pd:t,ut:e},this.Id=l,this.Bd=function(c,u){const a=Math.log(u);return Math.log(1*a/-c)/a}(Math.abs(l),this.Ld))}Xu(t){const e=x(this.Vd),s=t-e.ut;return e.Pd+this.Id*(Math.pow(this.Ld,s)-1)/Math.log(this.Ld)}Yu(t){return this.Vd===null||this.Fd(t)===this.Bd}Fd(t){const e=t-x(this.Vd).ut;return Math.min(e,this.Bd)}}function we(i,t){const e=x(i.ownerDocument).createElement("canvas");i.appendChild(e);const s=Du(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return s.resizeCanvasElement(t),s}function _e(i){var t;i.width=1,i.height=1,(t=i.getContext("2d"))===null||t===void 0||t.clearRect(0,0,1,1)}function ln(i,t,e,s){i.G&&i.G(t,e,s)}function Fi(i,t,e,s){i.K(t,e,s)}function cn(i,t,e,s){const n=i(e,s);for(const r of n){const h=r.xt();h!==null&&t(h)}}function Pf(i){Be&&window.chrome!==void 0&&i.addEventListener("mousedown",t=>{if(t.button===1)return t.preventDefault(),!1})}class Dn{constructor(t,e,s){this.Wd=0,this.jd=null,this.Hd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.$d=0,this.Ud=null,this.qd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY},this.Yd=null,this.Xd=!1,this.Kd=null,this.Zd=null,this.Gd=!1,this.Jd=!1,this.Qd=!1,this.tf=null,this.if=null,this.nf=null,this.sf=null,this.ef=null,this.rf=null,this.hf=null,this.lf=0,this.af=!1,this._f=!1,this.uf=!1,this.cf=0,this.df=null,this.ff=!Fs(),this.vf=n=>{this.pf(n)},this.mf=n=>{if(this.bf(n)){const r=this.wf(n);if(++this.$d,this.Ud&&this.$d>1){const{gf:h}=this.Mf(Ft(n),this.qd);h<30&&!this.Qd&&this.xf(r,this.kf.Sf),this.yf()}}else{const r=this.wf(n);if(++this.Wd,this.jd&&this.Wd>1){const{gf:h}=this.Mf(Ft(n),this.Hd);h<5&&!this.Jd&&this.Cf(r,this.kf.Tf),this.Pf()}}},this.Rf=t,this.kf=e,this.cn=s,this.Df()}S(){this.tf!==null&&(this.tf(),this.tf=null),this.if!==null&&(this.if(),this.if=null),this.sf!==null&&(this.sf(),this.sf=null),this.ef!==null&&(this.ef(),this.ef=null),this.rf!==null&&(this.rf(),this.rf=null),this.nf!==null&&(this.nf(),this.nf=null),this.Of(),this.Pf()}Af(t){this.sf&&this.sf();const e=this.Vf.bind(this);if(this.sf=()=>{this.Rf.removeEventListener("mousemove",e)},this.Rf.addEventListener("mousemove",e),this.bf(t))return;const s=this.wf(t);this.Cf(s,this.kf.Bf),this.ff=!0}Pf(){this.jd!==null&&clearTimeout(this.jd),this.Wd=0,this.jd=null,this.Hd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}yf(){this.Ud!==null&&clearTimeout(this.Ud),this.$d=0,this.Ud=null,this.qd={et:Number.NEGATIVE_INFINITY,rt:Number.POSITIVE_INFINITY}}Vf(t){if(this.uf||this.Zd!==null||this.bf(t))return;const e=this.wf(t);this.Cf(e,this.kf.If),this.ff=!0}zf(t){const e=Is(t.changedTouches,x(this.df));if(e===null||(this.cf=Ei(t),this.hf!==null)||this._f)return;this.af=!0;const s=this.Mf(Ft(e),x(this.Zd)),{Ef:n,Lf:r,gf:h}=s;if(this.Gd||!(h<5)){if(!this.Gd){const o=.5*n,l=r>=o&&!this.cn.Nf(),c=o>r&&!this.cn.Ff();l||c||(this._f=!0),this.Gd=!0,this.Qd=!0,this.Of(),this.yf()}if(!this._f){const o=this.wf(t,e);this.xf(o,this.kf.Wf),Le(t)}}}jf(t){if(t.button!==0)return;const e=this.Mf(Ft(t),x(this.Kd)),{gf:s}=e;if(s>=5&&(this.Jd=!0,this.Pf()),this.Jd){const n=this.wf(t);this.Cf(n,this.kf.Hf)}}Mf(t,e){const s=Math.abs(e.et-t.et),n=Math.abs(e.rt-t.rt);return{Ef:s,Lf:n,gf:s+n}}$f(t){let e=Is(t.changedTouches,x(this.df));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.df=null,this.cf=Ei(t),this.Of(),this.Zd=null,this.rf&&(this.rf(),this.rf=null);const s=this.wf(t,e);if(this.xf(s,this.kf.Uf),++this.$d,this.Ud&&this.$d>1){const{gf:n}=this.Mf(Ft(e),this.qd);n<30&&!this.Qd&&this.xf(s,this.kf.Sf),this.yf()}else this.Qd||(this.xf(s,this.kf.qf),this.kf.qf&&Le(t));this.$d===0&&Le(t),t.touches.length===0&&this.Xd&&(this.Xd=!1,Le(t))}pf(t){if(t.button!==0)return;const e=this.wf(t);if(this.Kd=null,this.uf=!1,this.ef&&(this.ef(),this.ef=null),rh()&&this.Rf.ownerDocument.documentElement.removeEventListener("mouseleave",this.vf),!this.bf(t))if(this.Cf(e,this.kf.Yf),++this.Wd,this.jd&&this.Wd>1){const{gf:s}=this.Mf(Ft(t),this.Hd);s<5&&!this.Jd&&this.Cf(e,this.kf.Tf),this.Pf()}else this.Jd||this.Cf(e,this.kf.Xf)}Of(){this.Yd!==null&&(clearTimeout(this.Yd),this.Yd=null)}Kf(t){if(this.df!==null)return;const e=t.changedTouches[0];this.df=e.identifier,this.cf=Ei(t);const s=this.Rf.ownerDocument.documentElement;this.Qd=!1,this.Gd=!1,this._f=!1,this.Zd=Ft(e),this.rf&&(this.rf(),this.rf=null);{const r=this.zf.bind(this),h=this.$f.bind(this);this.rf=()=>{s.removeEventListener("touchmove",r),s.removeEventListener("touchend",h)},s.addEventListener("touchmove",r,{passive:!1}),s.addEventListener("touchend",h,{passive:!1}),this.Of(),this.Yd=setTimeout(this.Zf.bind(this,t),240)}const n=this.wf(t,e);this.xf(n,this.kf.Gf),this.Ud||(this.$d=0,this.Ud=setTimeout(this.yf.bind(this),500),this.qd=Ft(e))}Jf(t){if(t.button!==0)return;const e=this.Rf.ownerDocument.documentElement;rh()&&e.addEventListener("mouseleave",this.vf),this.Jd=!1,this.Kd=Ft(t),this.ef&&(this.ef(),this.ef=null);{const n=this.jf.bind(this),r=this.pf.bind(this);this.ef=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",r)}if(this.uf=!0,this.bf(t))return;const s=this.wf(t);this.Cf(s,this.kf.Qf),this.jd||(this.Wd=0,this.jd=setTimeout(this.Pf.bind(this),500),this.Hd=Ft(t))}Df(){this.Rf.addEventListener("mouseenter",this.Af.bind(this)),this.Rf.addEventListener("touchcancel",this.Of.bind(this));{const t=this.Rf.ownerDocument,e=s=>{this.kf.tv&&(s.composed&&this.Rf.contains(s.composedPath()[0])||s.target&&this.Rf.contains(s.target)||this.kf.tv())};this.if=()=>{t.removeEventListener("touchstart",e)},this.tf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Fs()&&(this.nf=()=>{this.Rf.removeEventListener("dblclick",this.mf)},this.Rf.addEventListener("dblclick",this.mf)),this.Rf.addEventListener("mouseleave",this.iv.bind(this)),this.Rf.addEventListener("touchstart",this.Kf.bind(this),{passive:!0}),Pf(this.Rf),this.Rf.addEventListener("mousedown",this.Jf.bind(this)),this.nv(),this.Rf.addEventListener("touchmove",()=>{},{passive:!1})}nv(){this.kf.sv===void 0&&this.kf.ev===void 0&&this.kf.rv===void 0||(this.Rf.addEventListener("touchstart",t=>this.hv(t.touches),{passive:!0}),this.Rf.addEventListener("touchmove",t=>{if(t.touches.length===2&&this.hf!==null&&this.kf.ev!==void 0){const e=hh(t.touches[0],t.touches[1])/this.lf;this.kf.ev(this.hf,e),Le(t)}},{passive:!1}),this.Rf.addEventListener("touchend",t=>{this.hv(t.touches)}))}hv(t){t.length===1&&(this.af=!1),t.length!==2||this.af||this.Xd?this.lv():this.av(t)}av(t){const e=this.Rf.getBoundingClientRect()||{left:0,top:0};this.hf={et:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,rt:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.lf=hh(t[0],t[1]),this.kf.sv!==void 0&&this.kf.sv(),this.Of()}lv(){this.hf!==null&&(this.hf=null,this.kf.rv!==void 0&&this.kf.rv())}iv(t){if(this.sf&&this.sf(),this.bf(t)||!this.ff)return;const e=this.wf(t);this.Cf(e,this.kf.ov),this.ff=!Fs()}Zf(t){const e=Is(t.touches,x(this.df));if(e===null)return;const s=this.wf(t,e);this.xf(s,this.kf._v),this.Qd=!0,this.Xd=!0}bf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:Ei(t)<this.cf+500}xf(t,e){e&&e.call(this.kf,t)}Cf(t,e){e&&e.call(this.kf,t)}wf(t,e){const s=e||t,n=this.Rf.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-n.left,localY:s.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,uv:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",cv:t.type,dv:s.target,fv:t.view,vv:()=>{t.type!=="touchstart"&&Le(t)}}}}function hh(i,t){const e=i.clientX-t.clientX,s=i.clientY-t.clientY;return Math.sqrt(e*e+s*s)}function Le(i){i.cancelable&&i.preventDefault()}function Ft(i){return{et:i.pageX,rt:i.pageY}}function Ei(i){return i.timeStamp||performance.now()}function Is(i,t){for(let e=0;e<i.length;++e)if(i[e].identifier===t)return i[e];return null}function Oi(i){return{Ic:i.Ic,pv:{wr:i.mv.externalId},bv:i.mv.cursorStyle}}function kf(i,t,e){for(const s of i){const n=s.xt();if(n!==null&&n.br){const r=n.br(t,e);if(r!==null)return{fv:s,pv:r}}}return null}function Bs(i,t){return e=>{var s,n,r,h;return((n=(s=e.At())===null||s===void 0?void 0:s.xa())!==null&&n!==void 0?n:"")!==t?[]:(h=(r=e.la)===null||r===void 0?void 0:r.call(e,i))!==null&&h!==void 0?h:[]}}class oh{constructor(t,e,s,n){this.Li=null,this.wv=null,this.gv=!1,this.Mv=new li(200),this.Gr=null,this.xv=0,this.Sv=!1,this.kv=()=>{this.Sv||this.nn.yv().qt().Fh()},this.Cv=()=>{this.Sv||this.nn.yv().qt().Fh()},this.nn=t,this.cn=e,this.mo=e.layout,this.kc=s,this.Tv=n==="left",this.Pv=Bs("normal",n),this.Rv=Bs("top",n),this.Dv=Bs("bottom",n),this.Ov=document.createElement("div"),this.Ov.style.height="100%",this.Ov.style.overflow="hidden",this.Ov.style.width="25px",this.Ov.style.left="0",this.Ov.style.position="relative",this.Av=we(this.Ov,G({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.kv);const r=this.Av.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Vv=we(this.Ov,G({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.Cv);const h=this.Vv.canvasElement;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0";const o={Qf:this.Bv.bind(this),Gf:this.Bv.bind(this),Hf:this.Iv.bind(this),Wf:this.Iv.bind(this),tv:this.zv.bind(this),Yf:this.Ev.bind(this),Uf:this.Ev.bind(this),Tf:this.Lv.bind(this),Sf:this.Lv.bind(this),Bf:this.Nv.bind(this),ov:this.Fv.bind(this)};this.Wv=new Dn(this.Vv.canvasElement,o,{Nf:()=>!this.cn.handleScroll.vertTouchDrag,Ff:()=>!0})}S(){this.Wv.S(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.Cv),_e(this.Vv.canvasElement),this.Vv.dispose(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.kv),_e(this.Av.canvasElement),this.Av.dispose(),this.Li!==null&&this.Li.$o().p(this),this.Li=null}jv(){return this.Ov}P(){return this.mo.fontSize}Hv(){const t=this.kc.W();return this.Gr!==t.R&&(this.Mv.ir(),this.Gr=t.R),t}$v(){if(this.Li===null)return 0;let t=0;const e=this.Hv(),s=x(this.Av.canvasElement.getContext("2d"));s.save();const n=this.Li.Ea();s.font=this.Uv(),n.length>0&&(t=Math.max(this.Mv.Si(s,n[0].Za),this.Mv.Si(s,n[n.length-1].Za)));const r=this.qv();for(let l=r.length;l--;){const c=this.Mv.Si(s,r[l].Jt());c>t&&(t=c)}const h=this.Li.Pt();if(h!==null&&this.wv!==null){const l=this.Li.pn(1,h),c=this.Li.pn(this.wv.height-2,h);t=Math.max(t,this.Mv.Si(s,this.Li.Wi(Math.floor(Math.min(l,c))+.11111111111111,h)),this.Mv.Si(s,this.Li.Wi(Math.ceil(Math.max(l,c))-.11111111111111,h)))}s.restore();const o=t||34;return on(Math.ceil(e.C+e.T+e.B+e.I+5+o))}Yv(t){this.wv!==null&&me(this.wv,t)||(this.wv=t,this.Sv=!0,this.Av.resizeCanvasElement(t),this.Vv.resizeCanvasElement(t),this.Sv=!1,this.Ov.style.width=`${t.width}px`,this.Ov.style.height=`${t.height}px`)}Xv(){return x(this.wv).width}Ji(t){this.Li!==t&&(this.Li!==null&&this.Li.$o().p(this),this.Li=t,t.$o().l(this.ao.bind(this),this))}At(){return this.Li}ir(){const t=this.nn.Kv();this.nn.yv().qt().A_(t,x(this.At()))}Zv(t){if(this.wv===null)return;if(t!==1){this.Gv(),this.Av.applySuggestedBitmapSize();const s=ve(this.Av);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.Jv(n),this.Be(n)}),this.nn.Qv(s,this.Dv),this.tp(s),this.nn.Qv(s,this.Pv),this.ip(s))}this.Vv.applySuggestedBitmapSize();const e=ve(this.Vv);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.np(e),this.nn.Qv(e,this.Rv))}sp(){return this.Av.bitmapSize}ep(t,e,s){const n=this.sp();n.width>0&&n.height>0&&t.drawImage(this.Av.canvasElement,e,s)}gt(){var t;(t=this.Li)===null||t===void 0||t.Ea()}Bv(t){if(this.Li===null||this.Li.Fi()||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.yv().qt(),s=this.nn.Kv();this.gv=!0,e.y_(s,this.Li,t.localY)}Iv(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.yv().qt(),s=this.nn.Kv(),n=this.Li;e.C_(s,n,t.localY)}zv(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.nn.yv().qt(),e=this.nn.Kv(),s=this.Li;this.gv&&(this.gv=!1,t.T_(e,s))}Ev(t){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.nn.yv().qt(),s=this.nn.Kv();this.gv=!1,e.T_(s,this.Li)}Lv(t){this.cn.handleScale.axisDoubleClickReset.price&&this.ir()}Nv(t){this.Li!==null&&(!this.nn.yv().qt().W().handleScale.axisPressedMouseMove.price||this.Li.ph()||this.Li.Co()||this.rp(1))}Fv(t){this.rp(0)}qv(){const t=[],e=this.Li===null?void 0:this.Li;return(s=>{for(let n=0;n<s.length;++n){const r=s[n].Rn(this.nn.Kv(),e);for(let h=0;h<r.length;h++)t.push(r[h])}})(this.nn.Kv().No()),t}Jv({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.nn.Kv().qt(),h=r.q(),o=r.od();h===o?os(t,0,0,s,n,h):Ro(t,0,0,s,n,h,o)}Be({context:t,bitmapSize:e,horizontalPixelRatio:s}){if(this.wv===null||this.Li===null||!this.Li.W().borderVisible)return;t.fillStyle=this.Li.W().borderColor;const n=Math.max(1,Math.floor(this.Hv().C*s));let r;r=this.Tv?e.width-n:0,t.fillRect(r,0,n,e.height)}tp(t){if(this.wv===null||this.Li===null)return;const e=this.Li.Ea(),s=this.Li.W(),n=this.Hv(),r=this.Tv?this.wv.width-n.T:0;s.borderVisible&&s.ticksVisible&&t.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:o,verticalPixelRatio:l})=>{h.fillStyle=s.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),a=Math.round(n.T*o);h.beginPath();for(const d of e)h.rect(Math.floor(r*o),Math.round(d.Aa*l)-u,a,c);h.fill()}),t.useMediaCoordinateSpace(({context:h})=>{var o;h.font=this.Uv(),h.fillStyle=(o=s.textColor)!==null&&o!==void 0?o:this.mo.textColor,h.textAlign=this.Tv?"right":"left",h.textBaseline="middle";const l=this.Tv?Math.round(r-n.B):Math.round(r+n.T+n.B),c=e.map(u=>this.Mv.xi(h,u.Za));for(let u=e.length;u--;){const a=e[u];h.fillText(a.Za,l,a.Aa+c[u])}})}Gv(){if(this.wv===null||this.Li===null)return;let t=this.wv.height/2;const e=[],s=this.Li.No().slice(),n=this.nn.Kv(),r=this.Hv();this.Li===n.vr()&&this.nn.Kv().No().forEach(l=>{n.dr(l)&&s.push(l)});const h=this.Li.Ta()[0],o=this.Li;s.forEach(l=>{const c=l.Rn(n,o);c.forEach(u=>{u.Vi(null),u.Bi()&&e.push(u)}),h===l&&c.length>0&&(t=c[0].yi())}),e.forEach(l=>l.Vi(l.yi())),this.Li.W().alignLabels&&this.hp(e,r,t)}hp(t,e,s){if(this.wv===null)return;const n=t.filter(h=>h.yi()<=s),r=t.filter(h=>h.yi()>s);n.sort((h,o)=>o.yi()-h.yi()),n.length&&r.length&&r.push(n[0]),r.sort((h,o)=>h.yi()-o.yi());for(const h of t){const o=Math.floor(h.zt(e)/2),l=h.yi();l>-o&&l<o&&h.Vi(o),l>this.wv.height-o&&l<this.wv.height+o&&h.Vi(this.wv.height-o)}for(let h=1;h<n.length;h++){const o=n[h],l=n[h-1],c=l.zt(e,!1),u=o.yi(),a=l.Ai();u>a-c&&o.Vi(a-c)}for(let h=1;h<r.length;h++){const o=r[h],l=r[h-1],c=l.zt(e,!0),u=o.yi(),a=l.Ai();u<a+c&&o.Vi(a+c)}}ip(t){if(this.wv===null)return;const e=this.qv(),s=this.Hv(),n=this.Tv?"right":"left";e.forEach(r=>{r.Ii()&&r.xt(x(this.Li)).K(t,s,this.Mv,n)})}np(t){if(this.wv===null||this.Li===null)return;const e=this.nn.yv().qt(),s=[],n=this.nn.Kv(),r=e.Fc().Rn(n,this.Li);r.length&&s.push(r);const h=this.Hv(),o=this.Tv?"right":"left";s.forEach(l=>{l.forEach(c=>{c.xt(x(this.Li)).K(t,h,this.Mv,o)})})}rp(t){this.Ov.style.cursor=t===1?"ns-resize":"default"}ao(){const t=this.$v();this.xv<t&&this.nn.yv().qt().$l(),this.xv=t}Uv(){return Ie(this.mo.fontSize,this.mo.fontFamily)}}function Rf(i,t){var e,s;return(s=(e=i.ra)===null||e===void 0?void 0:e.call(i,t))!==null&&s!==void 0?s:[]}function Ti(i,t){var e,s;return(s=(e=i.Pn)===null||e===void 0?void 0:e.call(i,t))!==null&&s!==void 0?s:[]}function zf(i,t){var e,s;return(s=(e=i.Qi)===null||e===void 0?void 0:e.call(i,t))!==null&&s!==void 0?s:[]}function Nf(i,t){var e,s;return(s=(e=i.na)===null||e===void 0?void 0:e.call(i,t))!==null&&s!==void 0?s:[]}class Un{constructor(t,e){this.wv=G({width:0,height:0}),this.lp=null,this.ap=null,this.op=null,this._p=!1,this.up=new et,this.cp=new et,this.dp=0,this.fp=!1,this.vp=null,this.pp=!1,this.mp=null,this.bp=null,this.Sv=!1,this.kv=()=>{this.Sv||this.wp===null||this.Ui().Fh()},this.Cv=()=>{this.Sv||this.wp===null||this.Ui().Fh()},this.gp=t,this.wp=e,this.wp.I_().l(this.Mp.bind(this),this,!0),this.xp=document.createElement("td"),this.xp.style.padding="0",this.xp.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Sp=document.createElement("td"),this.Sp.style.padding="0",this.kp=document.createElement("td"),this.kp.style.padding="0",this.xp.appendChild(s),this.Av=we(s,G({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.kv);const n=this.Av.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Vv=we(s,G({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.Cv);const r=this.Vv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.yp=document.createElement("tr"),this.yp.appendChild(this.Sp),this.yp.appendChild(this.xp),this.yp.appendChild(this.kp),this.Cp(),this.Wv=new Dn(this.Vv.canvasElement,this,{Nf:()=>this.vp===null&&!this.gp.W().handleScroll.vertTouchDrag,Ff:()=>this.vp===null&&!this.gp.W().handleScroll.horzTouchDrag})}S(){this.lp!==null&&this.lp.S(),this.ap!==null&&this.ap.S(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.Cv),_e(this.Vv.canvasElement),this.Vv.dispose(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.kv),_e(this.Av.canvasElement),this.Av.dispose(),this.wp!==null&&this.wp.I_().p(this),this.Wv.S()}Kv(){return x(this.wp)}Tp(t){this.wp!==null&&this.wp.I_().p(this),this.wp=t,this.wp!==null&&this.wp.I_().l(Un.prototype.Mp.bind(this),this,!0),this.Cp()}yv(){return this.gp}jv(){return this.yp}Cp(){if(this.wp!==null&&(this.Pp(),this.Ui().Mt().length!==0)){if(this.lp!==null){const t=this.wp.S_();this.lp.Ji(x(t))}if(this.ap!==null){const t=this.wp.k_();this.ap.Ji(x(t))}}}Rp(){this.lp!==null&&this.lp.gt(),this.ap!==null&&this.ap.gt()}v_(){return this.wp!==null?this.wp.v_():0}p_(t){this.wp&&this.wp.p_(t)}Bf(t){if(!this.wp)return;this.Dp();const e=t.localX,s=t.localY;this.Op(e,s,t)}Qf(t){this.Dp(),this.Ap(),this.Op(t.localX,t.localY,t)}If(t){var e;if(!this.wp)return;this.Dp();const s=t.localX,n=t.localY;this.Op(s,n,t);const r=this.br(s,n);this.gp.Vp((e=r==null?void 0:r.bv)!==null&&e!==void 0?e:null),this.Ui().Bc(r&&{Ic:r.Ic,pv:r.pv})}Xf(t){this.wp!==null&&(this.Dp(),this.Bp(t))}Tf(t){this.wp!==null&&this.Ip(this.cp,t)}Sf(t){this.Tf(t)}Hf(t){this.Dp(),this.zp(t),this.Op(t.localX,t.localY,t)}Yf(t){this.wp!==null&&(this.Dp(),this.fp=!1,this.Ep(t))}qf(t){this.wp!==null&&this.Bp(t)}_v(t){if(this.fp=!0,this.vp===null){const e={x:t.localX,y:t.localY};this.Lp(e,e,t)}}ov(t){this.wp!==null&&(this.Dp(),this.wp.qt().Bc(null),this.Np())}Fp(){return this.up}Wp(){return this.cp}sv(){this.dp=1,this.Ui().Un()}ev(t,e){if(!this.gp.W().handleScale.pinch)return;const s=5*(e-this.dp);this.dp=e,this.Ui().Uc(t.et,s)}Gf(t){this.fp=!1,this.pp=this.vp!==null,this.Ap();const e=this.Ui().Fc();this.vp!==null&&e.Tt()&&(this.mp={x:e.Kt(),y:e.Zt()},this.vp={x:t.localX,y:t.localY})}Wf(t){if(this.wp===null)return;const e=t.localX,s=t.localY;if(this.vp===null)this.zp(t);else{this.pp=!1;const n=x(this.mp),r=n.x+(e-this.vp.x),h=n.y+(s-this.vp.y);this.Op(r,h,t)}}Uf(t){this.yv().W().trackingMode.exitMode===0&&(this.pp=!0),this.jp(),this.Ep(t)}br(t,e){const s=this.wp;return s===null?null:function(n,r,h){const o=n.No(),l=function(c,u,a){var d,m;let g,v;for(const z of c){const P=(m=(d=z.oa)===null||d===void 0?void 0:d.call(z,u,a))!==null&&m!==void 0?m:[];for(const R of P)y=R.zOrder,(!(L=g==null?void 0:g.zOrder)||y==="top"&&L!=="top"||y==="normal"&&L==="bottom")&&(g=R,v=z)}var y,L;return g&&v?{mv:g,Ic:v}:null}(o,r,h);if((l==null?void 0:l.mv.zOrder)==="top")return Oi(l);for(const c of o){if(l&&l.Ic===c&&l.mv.zOrder!=="bottom"&&!l.mv.isBackground)return Oi(l);const u=kf(c.Pn(n),r,h);if(u!==null)return{Ic:c,fv:u.fv,pv:u.pv};if(l&&l.Ic===c&&l.mv.zOrder!=="bottom"&&l.mv.isBackground)return Oi(l)}return l!=null&&l.mv?Oi(l):null}(s,t,e)}Hp(t,e){x(e==="left"?this.lp:this.ap).Yv(G({width:t,height:this.wv.height}))}$p(){return this.wv}Yv(t){me(this.wv,t)||(this.wv=t,this.Sv=!0,this.Av.resizeCanvasElement(t),this.Vv.resizeCanvasElement(t),this.Sv=!1,this.xp.style.width=t.width+"px",this.xp.style.height=t.height+"px")}Up(){const t=x(this.wp);t.x_(t.S_()),t.x_(t.k_());for(const e of t.Ta())if(t.dr(e)){const s=e.At();s!==null&&t.x_(s),e.On()}}sp(){return this.Av.bitmapSize}ep(t,e,s){const n=this.sp();n.width>0&&n.height>0&&t.drawImage(this.Av.canvasElement,e,s)}Zv(t){if(t===0||this.wp===null)return;if(t>1&&this.Up(),this.lp!==null&&this.lp.Zv(t),this.ap!==null&&this.ap.Zv(t),t!==1){this.Av.applySuggestedBitmapSize();const s=ve(this.Av);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.Jv(n)}),this.wp&&(this.qp(s,Rf),this.Yp(s),this.Xp(s),this.qp(s,Ti),this.qp(s,zf)))}this.Vv.applySuggestedBitmapSize();const e=ve(this.Vv);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.Kp(e),this.qp(e,Nf))}Zp(){return this.lp}Gp(){return this.ap}Qv(t,e){this.qp(t,e)}Mp(){this.wp!==null&&this.wp.I_().p(this),this.wp=null}Bp(t){this.Ip(this.up,t)}Ip(t,e){const s=e.localX,n=e.localY;t.M()&&t.m(this.Ui().yt().Vu(s),{x:s,y:n},e)}Jv({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.Ui(),h=r.q(),o=r.od();h===o?os(t,0,0,s,n,o):Ro(t,0,0,s,n,h,o)}Yp(t){const e=x(this.wp).z_().Wh().xt();e!==null&&e.K(t,!1)}Xp(t){const e=this.Ui().Nc();this.Jp(t,Ti,ln,e),this.Jp(t,Ti,Fi,e)}Kp(t){this.Jp(t,Ti,Fi,this.Ui().Fc())}qp(t,e){const s=x(this.wp).No();for(const n of s)this.Jp(t,e,ln,n);for(const n of s)this.Jp(t,e,Fi,n)}Jp(t,e,s,n){const r=x(this.wp),h=r.qt().Vc(),o=h!==null&&h.Ic===n,l=h!==null&&o&&h.pv!==void 0?h.pv.gr:void 0;cn(e,c=>s(c,t,o,l),n,r)}Pp(){if(this.wp===null)return;const t=this.gp,e=this.wp.S_().W().visible,s=this.wp.k_().W().visible;e||this.lp===null||(this.Sp.removeChild(this.lp.jv()),this.lp.S(),this.lp=null),s||this.ap===null||(this.kp.removeChild(this.ap.jv()),this.ap.S(),this.ap=null);const n=t.qt().sd();e&&this.lp===null&&(this.lp=new oh(this,t.W(),n,"left"),this.Sp.appendChild(this.lp.jv())),s&&this.ap===null&&(this.ap=new oh(this,t.W(),n,"right"),this.kp.appendChild(this.ap.jv()))}Qp(t){return t.uv&&this.fp||this.vp!==null}tm(t){return Math.max(0,Math.min(t,this.wv.width-1))}im(t){return Math.max(0,Math.min(t,this.wv.height-1))}Op(t,e,s){this.Ui().Jc(this.tm(t),this.im(e),s,x(this.wp))}Np(){this.Ui().td()}jp(){this.pp&&(this.vp=null,this.Np())}Lp(t,e,s){this.vp=t,this.pp=!1,this.Op(e.x,e.y,s);const n=this.Ui().Fc();this.mp={x:n.Kt(),y:n.Zt()}}Ui(){return this.gp.qt()}Ep(t){if(!this._p)return;const e=this.Ui(),s=this.Kv();if(e.D_(s,s.vn()),this.op=null,this._p=!1,e.Kc(),this.bp!==null){const n=performance.now(),r=e.yt();this.bp.Dr(r.Eu(),n),this.bp.Yu(n)||e.Xn(this.bp)}}Dp(){this.vp=null}Ap(){if(this.wp){if(this.Ui().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)x(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.wp.vn().Fi()&&this.Ui().yt().Fi()}}zp(t){if(this.wp===null)return;const e=this.Ui(),s=e.yt();if(s.Fi())return;const n=this.gp.W(),r=n.handleScroll,h=n.kineticScroll;if((!r.pressedMouseMove||t.uv)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t.uv))return;const o=this.wp.vn(),l=performance.now();if(this.op!==null||this.Qp(t)||(this.op={x:t.clientX,y:t.clientY,kd:l,nm:t.localX,sm:t.localY}),this.op!==null&&!this._p&&(this.op.x!==t.clientX||this.op.y!==t.clientY)){if(t.uv&&h.touch||!t.uv&&h.mouse){const c=s.he();this.bp=new Tf(.2/c,7/c,.997,15/c),this.bp.Nd(s.Eu(),this.op.kd)}else this.bp=null;o.Fi()||e.P_(this.wp,o,t.localY),e.Yc(t.localX),this._p=!0}this._p&&(o.Fi()||e.R_(this.wp,o,t.localY),e.Xc(t.localX),this.bp!==null&&this.bp.Nd(s.Eu(),l))}}class lh{constructor(t,e,s,n,r){this.bt=!0,this.wv=G({width:0,height:0}),this.kv=()=>this.Zv(3),this.Tv=t==="left",this.kc=s.sd,this.cn=e,this.rm=n,this.hm=r,this.Ov=document.createElement("div"),this.Ov.style.width="25px",this.Ov.style.height="100%",this.Ov.style.overflow="hidden",this.Av=we(this.Ov,G({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.kv)}S(){this.Av.unsubscribeSuggestedBitmapSizeChanged(this.kv),_e(this.Av.canvasElement),this.Av.dispose()}jv(){return this.Ov}$p(){return this.wv}Yv(t){me(this.wv,t)||(this.wv=t,this.Av.resizeCanvasElement(t),this.Ov.style.width=`${t.width}px`,this.Ov.style.height=`${t.height}px`,this.bt=!0)}Zv(t){if(t<3&&!this.bt||this.wv.width===0||this.wv.height===0)return;this.bt=!1,this.Av.applySuggestedBitmapSize();const e=ve(this.Av);e!==null&&e.useBitmapCoordinateSpace(s=>{this.Jv(s),this.Be(s)})}sp(){return this.Av.bitmapSize}ep(t,e,s){const n=this.sp();n.width>0&&n.height>0&&t.drawImage(this.Av.canvasElement,e,s)}Be({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(!this.rm())return;t.fillStyle=this.cn.timeScale.borderColor;const r=Math.floor(this.kc.W().C*s),h=Math.floor(this.kc.W().C*n),o=this.Tv?e.width-r:0;t.fillRect(o,0,r,h)}Jv({context:t,bitmapSize:e}){os(t,0,0,e.width,e.height,this.hm())}}function $n(i){return t=>{var e,s;return(s=(e=t.aa)===null||e===void 0?void 0:e.call(t,i))!==null&&s!==void 0?s:[]}}const Ff=$n("normal"),Wf=$n("top"),Af=$n("bottom");class If{constructor(t,e){this.lm=null,this.am=null,this.k=null,this.om=!1,this.wv=G({width:0,height:0}),this._m=new et,this.Mv=new li(5),this.Sv=!1,this.kv=()=>{this.Sv||this.gp.qt().Fh()},this.Cv=()=>{this.Sv||this.gp.qt().Fh()},this.gp=t,this.N_=e,this.cn=t.W().layout,this.um=document.createElement("tr"),this.dm=document.createElement("td"),this.dm.style.padding="0",this.fm=document.createElement("td"),this.fm.style.padding="0",this.Ov=document.createElement("td"),this.Ov.style.height="25px",this.Ov.style.padding="0",this.vm=document.createElement("div"),this.vm.style.width="100%",this.vm.style.height="100%",this.vm.style.position="relative",this.vm.style.overflow="hidden",this.Ov.appendChild(this.vm),this.Av=we(this.vm,G({width:16,height:16})),this.Av.subscribeSuggestedBitmapSizeChanged(this.kv);const s=this.Av.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Vv=we(this.vm,G({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.Cv);const n=this.Vv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.um.appendChild(this.dm),this.um.appendChild(this.Ov),this.um.appendChild(this.fm),this.pm(),this.gp.qt().f_().l(this.pm.bind(this),this),this.Wv=new Dn(this.Vv.canvasElement,this,{Nf:()=>!0,Ff:()=>!this.gp.W().handleScroll.horzTouchDrag})}S(){this.Wv.S(),this.lm!==null&&this.lm.S(),this.am!==null&&this.am.S(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.Cv),_e(this.Vv.canvasElement),this.Vv.dispose(),this.Av.unsubscribeSuggestedBitmapSizeChanged(this.kv),_e(this.Av.canvasElement),this.Av.dispose()}jv(){return this.um}bm(){return this.lm}wm(){return this.am}Qf(t){if(this.om)return;this.om=!0;const e=this.gp.qt();!e.yt().Fi()&&this.gp.W().handleScale.axisPressedMouseMove.time&&e.$c(t.localX)}Gf(t){this.Qf(t)}tv(){const t=this.gp.qt();!t.yt().Fi()&&this.om&&(this.om=!1,this.gp.W().handleScale.axisPressedMouseMove.time&&t.Gc())}Hf(t){const e=this.gp.qt();!e.yt().Fi()&&this.gp.W().handleScale.axisPressedMouseMove.time&&e.Zc(t.localX)}Wf(t){this.Hf(t)}Yf(){this.om=!1;const t=this.gp.qt();t.yt().Fi()&&!this.gp.W().handleScale.axisPressedMouseMove.time||t.Gc()}Uf(){this.Yf()}Tf(){this.gp.W().handleScale.axisDoubleClickReset.time&&this.gp.qt().Zn()}Sf(){this.Tf()}Bf(){this.gp.qt().W().handleScale.axisPressedMouseMove.time&&this.rp(1)}ov(){this.rp(0)}$p(){return this.wv}gm(){return this._m}Mm(t,e,s){me(this.wv,t)||(this.wv=t,this.Sv=!0,this.Av.resizeCanvasElement(t),this.Vv.resizeCanvasElement(t),this.Sv=!1,this.Ov.style.width=`${t.width}px`,this.Ov.style.height=`${t.height}px`,this._m.m(t)),this.lm!==null&&this.lm.Yv(G({width:e,height:t.height})),this.am!==null&&this.am.Yv(G({width:s,height:t.height}))}xm(){const t=this.Sm();return Math.ceil(t.C+t.T+t.P+t.L+t.V+t.km)}gt(){this.gp.qt().yt().Ea()}sp(){return this.Av.bitmapSize}ep(t,e,s){const n=this.sp();n.width>0&&n.height>0&&t.drawImage(this.Av.canvasElement,e,s)}Zv(t){if(t===0)return;if(t!==1){this.Av.applySuggestedBitmapSize();const s=ve(this.Av);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.Jv(n),this.Be(n),this.ym(s,Af)}),this.tp(s),this.ym(s,Ff)),this.lm!==null&&this.lm.Zv(t),this.am!==null&&this.am.Zv(t)}this.Vv.applySuggestedBitmapSize();const e=ve(this.Vv);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.Cm([...this.gp.qt().Mt(),this.gp.qt().Fc()],e),this.ym(e,Wf))}ym(t,e){const s=this.gp.qt().Mt();for(const n of s)cn(e,r=>ln(r,t,!1,void 0),n,void 0);for(const n of s)cn(e,r=>Fi(r,t,!1,void 0),n,void 0)}Jv({context:t,bitmapSize:e}){os(t,0,0,e.width,e.height,this.gp.qt().od())}Be({context:t,bitmapSize:e,verticalPixelRatio:s}){if(this.gp.W().timeScale.borderVisible){t.fillStyle=this.Tm();const n=Math.max(1,Math.floor(this.Sm().C*s));t.fillRect(0,0,e.width,n)}}tp(t){const e=this.gp.qt().yt(),s=e.Ea();if(!s||s.length===0)return;const n=this.N_.maxTickMarkWeight(s),r=this.Sm(),h=e.W();h.borderVisible&&h.ticksVisible&&t.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:l,verticalPixelRatio:c})=>{o.strokeStyle=this.Tm(),o.fillStyle=this.Tm();const u=Math.max(1,Math.floor(l)),a=Math.floor(.5*l);o.beginPath();const d=Math.round(r.T*c);for(let m=s.length;m--;){const g=Math.round(s[m].coord*l);o.rect(g-a,0,u,d)}o.fill()}),t.useMediaCoordinateSpace(({context:o})=>{const l=r.C+r.T+r.L+r.P/2;o.textAlign="center",o.textBaseline="middle",o.fillStyle=this.$(),o.font=this.Uv();for(const c of s)if(c.weight<n){const u=c.needAlignCoordinate?this.Pm(o,c.coord,c.label):c.coord;o.fillText(c.label,u,l)}o.font=this.Rm();for(const c of s)if(c.weight>=n){const u=c.needAlignCoordinate?this.Pm(o,c.coord,c.label):c.coord;o.fillText(c.label,u,l)}})}Pm(t,e,s){const n=this.Mv.Si(t,s),r=n/2,h=Math.floor(e-r)+.5;return h<0?e+=Math.abs(0-h):h+n>this.wv.width&&(e-=Math.abs(this.wv.width-(h+n))),e}Cm(t,e){const s=this.Sm();for(const n of t)for(const r of n.tn())r.xt().K(e,s)}Tm(){return this.gp.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}Uv(){return Ie(this.j(),this.cn.fontFamily)}Rm(){return Ie(this.j(),this.cn.fontFamily,"bold")}Sm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,V:NaN,Hi:NaN,T:5,P:NaN,R:"",ji:new li,km:0});const t=this.k,e=this.Uv();if(t.R!==e){const s=this.j();t.P=s,t.R=e,t.L=3*s/12,t.V=3*s/12,t.Hi=9*s/12,t.N=0,t.km=4*s/12,t.ji.ir()}return this.k}rp(t){this.Ov.style.cursor=t===1?"ew-resize":"default"}pm(){const t=this.gp.qt(),e=t.W();e.leftPriceScale.visible||this.lm===null||(this.dm.removeChild(this.lm.jv()),this.lm.S(),this.lm=null),e.rightPriceScale.visible||this.am===null||(this.fm.removeChild(this.am.jv()),this.am.S(),this.am=null);const s={sd:this.gp.qt().sd()},n=()=>e.leftPriceScale.borderVisible&&t.yt().W().borderVisible,r=()=>t.od();e.leftPriceScale.visible&&this.lm===null&&(this.lm=new lh("left",e,s,n,r),this.dm.appendChild(this.lm.jv())),e.rightPriceScale.visible&&this.am===null&&(this.am=new lh("right",e,s,n,r),this.fm.appendChild(this.am.jv()))}}const Bf=!!Be&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(i=>i.brand.includes("Chromium"))&&!!Be&&(!((Vs=navigator==null?void 0:navigator.userAgentData)===null||Vs===void 0)&&Vs.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Vs;class Vf{constructor(t,e,s){var n;this.Dm=[],this.Om=0,this.Qa=0,this.e_=0,this.Am=0,this.Vm=0,this.Bm=null,this.Im=!1,this.up=new et,this.cp=new et,this.Mc=new et,this.zm=null,this.Em=null,this.Lm=t,this.cn=e,this.N_=s,this.um=document.createElement("div"),this.um.classList.add("tv-lightweight-charts"),this.um.style.overflow="hidden",this.um.style.direction="ltr",this.um.style.width="100%",this.um.style.height="100%",(n=this.um).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Nm=document.createElement("table"),this.Nm.setAttribute("cellspacing","0"),this.um.appendChild(this.Nm),this.Fm=this.Wm.bind(this),Ds(this.cn)&&this.jm(!0),this.Ui=new Mf(this.Sc.bind(this),this.cn,s),this.qt().Wc().l(this.Hm.bind(this),this),this.$m=new If(this,this.N_),this.Nm.appendChild(this.$m.jv());const r=e.autoSize&&this.Um();let h=this.cn.width,o=this.cn.height;if(r||h===0||o===0){const l=t.getBoundingClientRect();h=h||l.width,o=o||l.height}this.qm(h,o),this.Ym(),t.appendChild(this.um),this.Xm(),this.Ui.yt().Gu().l(this.Ui.$l.bind(this.Ui),this),this.Ui.f_().l(this.Ui.$l.bind(this.Ui),this)}qt(){return this.Ui}W(){return this.cn}Km(){return this.Dm}Zm(){return this.$m}S(){this.jm(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.Ui.Wc().p(this),this.Ui.yt().Gu().p(this),this.Ui.f_().p(this),this.Ui.S();for(const t of this.Dm)this.Nm.removeChild(t.jv()),t.Fp().p(this),t.Wp().p(this),t.S();this.Dm=[],x(this.$m).S(),this.um.parentElement!==null&&this.um.parentElement.removeChild(this.um),this.Mc.S(),this.up.S(),this.cp.S(),this.Gm()}qm(t,e,s=!1){if(this.Qa===e&&this.e_===t)return;const n=function(o){const l=Math.floor(o.width),c=Math.floor(o.height);return G({width:l-l%2,height:c-c%2})}(G({width:t,height:e}));this.Qa=n.height,this.e_=n.width;const r=this.Qa+"px",h=this.e_+"px";x(this.um).style.height=r,x(this.um).style.width=h,this.Nm.style.height=r,this.Nm.style.width=h,s?this.Jm(rt.es(),performance.now()):this.Ui.$l()}Zv(t){t===void 0&&(t=rt.es());for(let e=0;e<this.Dm.length;e++)this.Dm[e].Zv(t.Hn(e).Fn);this.cn.timeScale.visible&&this.$m.Zv(t.jn())}Nh(t){const e=Ds(this.cn);this.Ui.Nh(t);const s=Ds(this.cn);s!==e&&this.jm(s),this.Xm(),this.Qm(t)}Fp(){return this.up}Wp(){return this.cp}Wc(){return this.Mc}tb(){this.Bm!==null&&(this.Jm(this.Bm,performance.now()),this.Bm=null);const t=this.ib(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const s=x(e.getContext("2d"));return this.ib(s),e}nb(t){return t==="left"&&!this.sb()||t==="right"&&!this.eb()||this.Dm.length===0?0:x(t==="left"?this.Dm[0].Zp():this.Dm[0].Gp()).Xv()}rb(){return this.cn.autoSize&&this.zm!==null}hb(){return this.um}Vp(t){this.Em=t,this.Em?this.hb().style.setProperty("cursor",t):this.hb().style.removeProperty("cursor")}lb(){return this.Em}ab(){return at(this.Dm[0]).$p()}Qm(t){(t.autoSize!==void 0||!this.zm||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.zm&&this.Um(),t.autoSize===!1&&this.zm!==null&&this.Gm(),t.autoSize||t.width===void 0&&t.height===void 0||this.qm(t.width||this.e_,t.height||this.Qa))}ib(t){let e=0,s=0;const n=this.Dm[0],r=(o,l)=>{let c=0;for(let u=0;u<this.Dm.length;u++){const a=this.Dm[u],d=x(o==="left"?a.Zp():a.Gp()),m=d.sp();t!==null&&d.ep(t,l,c),c+=m.height}};this.sb()&&(r("left",0),e+=x(n.Zp()).sp().width);for(let o=0;o<this.Dm.length;o++){const l=this.Dm[o],c=l.sp();t!==null&&l.ep(t,e,s),s+=c.height}e+=n.sp().width,this.eb()&&(r("right",e),e+=x(n.Gp()).sp().width);const h=(o,l,c)=>{x(o==="left"?this.$m.bm():this.$m.wm()).ep(x(t),l,c)};if(this.cn.timeScale.visible){const o=this.$m.sp();if(t!==null){let l=0;this.sb()&&(h("left",l,s),l=x(n.Zp()).sp().width),this.$m.ep(t,l,s),l+=o.width,this.eb()&&h("right",l,s)}s+=o.height}return G({width:e,height:s})}ob(){let t=0,e=0,s=0;for(const g of this.Dm)this.sb()&&(e=Math.max(e,x(g.Zp()).$v(),this.cn.leftPriceScale.minimumWidth)),this.eb()&&(s=Math.max(s,x(g.Gp()).$v(),this.cn.rightPriceScale.minimumWidth)),t+=g.v_();e=on(e),s=on(s);const n=this.e_,r=this.Qa,h=Math.max(n-e-s,0),o=this.cn.timeScale.visible;let l=o?Math.max(this.$m.xm(),this.cn.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const u=0+l,a=r<u?0:r-u,d=a/t;let m=0;for(let g=0;g<this.Dm.length;++g){const v=this.Dm[g];v.Tp(this.Ui.Lc()[g]);let y=0,L=0;L=g===this.Dm.length-1?a-m:Math.round(v.v_()*d),y=Math.max(L,2),m+=y,v.Yv(G({width:h,height:y})),this.sb()&&v.Hp(e,"left"),this.eb()&&v.Hp(s,"right"),v.Kv()&&this.Ui.jc(v.Kv(),y)}this.$m.Mm(G({width:o?h:0,height:l}),o?e:0,o?s:0),this.Ui.m_(h),this.Am!==e&&(this.Am=e),this.Vm!==s&&(this.Vm=s)}jm(t){t?this.um.addEventListener("wheel",this.Fm,{passive:!1}):this.um.removeEventListener("wheel",this.Fm)}_b(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Bf?1/window.devicePixelRatio:1}Wm(t){if(!(t.deltaX!==0&&this.cn.handleScroll.mouseWheel||t.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const e=this._b(t),s=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.cn.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),h=t.clientX-this.um.getBoundingClientRect().left;this.qt().Uc(h,r)}s!==0&&this.cn.handleScroll.mouseWheel&&this.qt().qc(-80*s)}Jm(t,e){var s;const n=t.jn();n===3&&this.ub(),n!==3&&n!==2||(this.cb(t),this.fb(t,e),this.$m.gt(),this.Dm.forEach(r=>{r.Rp()}),((s=this.Bm)===null||s===void 0?void 0:s.jn())===3&&(this.Bm.ts(t),this.ub(),this.cb(this.Bm),this.fb(this.Bm,e),t=this.Bm,this.Bm=null)),this.Zv(t)}fb(t,e){for(const s of t.Qn())this.ns(s,e)}cb(t){const e=this.Ui.Lc();for(let s=0;s<e.length;s++)t.Hn(s).Wn&&e[s].V_()}ns(t,e){const s=this.Ui.yt();switch(t.qn){case 0:s.Qu();break;case 1:s.tc(t.Vt);break;case 2:s.Gn(t.Vt);break;case 3:s.Jn(t.Vt);break;case 4:s.Fu();break;case 5:t.Vt.Yu(e)||s.Jn(t.Vt.Xu(e))}}Sc(t){this.Bm!==null?this.Bm.ts(t):this.Bm=t,this.Im||(this.Im=!0,this.Om=window.requestAnimationFrame(e=>{if(this.Im=!1,this.Om=0,this.Bm!==null){const s=this.Bm;this.Bm=null,this.Jm(s,e);for(const n of s.Qn())if(n.qn===5&&!n.Vt.Yu(e)){this.qt().Xn(n.Vt);break}}}))}ub(){this.Ym()}Ym(){const t=this.Ui.Lc(),e=t.length,s=this.Dm.length;for(let n=e;n<s;n++){const r=at(this.Dm.pop());this.Nm.removeChild(r.jv()),r.Fp().p(this),r.Wp().p(this),r.S()}for(let n=s;n<e;n++){const r=new Un(this,t[n]);r.Fp().l(this.vb.bind(this),this),r.Wp().l(this.pb.bind(this),this),this.Dm.push(r),this.Nm.insertBefore(r.jv(),this.$m.jv())}for(let n=0;n<e;n++){const r=t[n],h=this.Dm[n];h.Kv()!==r?h.Tp(r):h.Cp()}this.Xm(),this.ob()}mb(t,e,s){var n;const r=new Map;t!==null&&this.Ui.Mt().forEach(u=>{const a=u.In().nl(t);a!==null&&r.set(u,a)});let h;if(t!==null){const u=(n=this.Ui.yt().qi(t))===null||n===void 0?void 0:n.originalTime;u!==void 0&&(h=u)}const o=this.qt().Vc(),l=o!==null&&o.Ic instanceof Bn?o.Ic:void 0,c=o!==null&&o.pv!==void 0?o.pv.wr:void 0;return{bb:h,se:t??void 0,wb:e??void 0,gb:l,Mb:r,xb:c,Sb:s??void 0}}vb(t,e,s){this.up.m(()=>this.mb(t,e,s))}pb(t,e,s){this.cp.m(()=>this.mb(t,e,s))}Hm(t,e,s){this.Mc.m(()=>this.mb(t,e,s))}Xm(){const t=this.cn.timeScale.visible?"":"none";this.$m.jv().style.display=t}sb(){return this.Dm[0].Kv().S_().W().visible}eb(){return this.Dm[0].Kv().k_().W().visible}Um(){return"ResizeObserver"in window&&(this.zm=new ResizeObserver(t=>{const e=t.find(s=>s.target===this.Lm);e&&this.qm(e.contentRect.width,e.contentRect.height)}),this.zm.observe(this.Lm,{box:"border-box"}),!0)}Gm(){this.zm!==null&&this.zm.disconnect(),this.zm=null}}function Ds(i){return!!(i.handleScroll.mouseWheel||i.handleScale.mouseWheel)}function Go(i,t){var e={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&t.indexOf(s)<0&&(e[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(s=Object.getOwnPropertySymbols(i);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(i,s[n])&&(e[s[n]]=i[s[n]])}return e}function ch(i,t,e,s){const n=e.value,r={se:t,ut:i,Vt:[n,n,n,n],bb:s};return e.color!==void 0&&(r.O=e.color),r}function Df(i,t,e,s){const n=e.value,r={se:t,ut:i,Vt:[n,n,n,n],bb:s};return e.lineColor!==void 0&&(r._t=e.lineColor),e.topColor!==void 0&&(r.Ts=e.topColor),e.bottomColor!==void 0&&(r.Ps=e.bottomColor),r}function Uf(i,t,e,s){const n=e.value,r={se:t,ut:i,Vt:[n,n,n,n],bb:s};return e.topLineColor!==void 0&&(r.Pe=e.topLineColor),e.bottomLineColor!==void 0&&(r.Re=e.bottomLineColor),e.topFillColor1!==void 0&&(r.Se=e.topFillColor1),e.topFillColor2!==void 0&&(r.ke=e.topFillColor2),e.bottomFillColor1!==void 0&&(r.ye=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(r.Ce=e.bottomFillColor2),r}function $f(i,t,e,s){const n={se:t,ut:i,Vt:[e.open,e.high,e.low,e.close],bb:s};return e.color!==void 0&&(n.O=e.color),n}function jf(i,t,e,s){const n={se:t,ut:i,Vt:[e.open,e.high,e.low,e.close],bb:s};return e.color!==void 0&&(n.O=e.color),e.borderColor!==void 0&&(n.Bt=e.borderColor),e.wickColor!==void 0&&(n.$h=e.wickColor),n}function qf(i,t,e,s,n){const r=at(n)(e),h=Math.max(...r),o=Math.min(...r),l=r[r.length-1],c=[l,h,o,l],u=e,{time:a,color:d}=u;return{se:t,ut:i,Vt:c,bb:s,He:Go(u,["time","color"]),O:d}}function Pi(i){return i.Vt!==void 0}function uh(i,t){return t.customValues!==void 0&&(i.kb=t.customValues),i}function ue(i){return(t,e,s,n,r,h)=>function(o,l){return l?l(o):(c=o).open===void 0&&c.value===void 0;var c}(s,h)?uh({ut:t,se:e,bb:n},s):uh(i(t,e,s,n,r),s)}function ah(i){return{Candlestick:ue(jf),Bar:ue($f),Area:ue(Df),Baseline:ue(Uf),Histogram:ue(ch),Line:ue(ch),Custom:ue(qf)}[i]}function fh(i){return{se:0,yb:new Map,ia:i}}function dh(i,t){if(i!==void 0&&i.length!==0)return{Cb:t.key(i[0].ut),Tb:t.key(i[i.length-1].ut)}}function ph(i){let t;return i.forEach(e=>{t===void 0&&(t=e.bb)}),at(t)}class Hf{constructor(t){this.Pb=new Map,this.Rb=new Map,this.Db=new Map,this.Ob=[],this.N_=t}S(){this.Pb.clear(),this.Rb.clear(),this.Db.clear(),this.Ob=[]}Ab(t,e){let s=this.Pb.size!==0,n=!1;const r=this.Rb.get(t);if(r!==void 0)if(this.Rb.size===1)s=!1,n=!0,this.Pb.clear();else for(const l of this.Ob)l.pointData.yb.delete(t)&&(n=!0);let h=[];if(e.length!==0){const l=e.map(m=>m.time),c=this.N_.createConverterToInternalObj(e),u=ah(t.Xh()),a=t.ga(),d=t.Ma();h=e.map((m,g)=>{const v=c(m.time),y=this.N_.key(v);let L=this.Pb.get(y);L===void 0&&(L=fh(v),this.Pb.set(y,L),n=!0);const z=u(v,L.se,m,l[g],a,d);return L.yb.set(t,z),z})}s&&this.Vb(),this.Bb(t,h);let o=-1;if(n){const l=[];this.Pb.forEach(c=>{l.push({timeWeight:0,time:c.ia,pointData:c,originalTime:ph(c.yb)})}),l.sort((c,u)=>this.N_.key(c.time)-this.N_.key(u.time)),o=this.Ib(l)}return this.zb(t,o,function(l,c,u){const a=dh(l,u),d=dh(c,u);if(a!==void 0&&d!==void 0)return{Xl:a.Tb>=d.Tb&&a.Cb>=d.Cb}}(this.Rb.get(t),r,this.N_))}hd(t){return this.Ab(t,[])}Eb(t,e){const s=e;(function(v){v.bb===void 0&&(v.bb=v.time)})(s),this.N_.preprocessData(e);const n=this.N_.createConverterToInternalObj([e])(e.time),r=this.Db.get(t);if(r!==void 0&&this.N_.key(n)<this.N_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${n}`);let h=this.Pb.get(this.N_.key(n));const o=h===void 0;h===void 0&&(h=fh(n),this.Pb.set(this.N_.key(n),h));const l=ah(t.Xh()),c=t.ga(),u=t.Ma(),a=l(n,h.se,e,s.bb,c,u);h.yb.set(t,a),this.Lb(t,a);const d={Xl:Pi(a)};if(!o)return this.zb(t,-1,d);const m={timeWeight:0,time:h.ia,pointData:h,originalTime:ph(h.yb)},g=fi(this.Ob,this.N_.key(m.time),(v,y)=>this.N_.key(v.time)<y);this.Ob.splice(g,0,m);for(let v=g;v<this.Ob.length;++v)Us(this.Ob[v].pointData,v);return this.N_.fillWeightsForPoints(this.Ob,g),this.zb(t,g,d)}Lb(t,e){let s=this.Rb.get(t);s===void 0&&(s=[],this.Rb.set(t,s));const n=s.length!==0?s[s.length-1]:null;n===null||this.N_.key(e.ut)>this.N_.key(n.ut)?Pi(e)&&s.push(e):Pi(e)?s[s.length-1]=e:s.splice(-1,1),this.Db.set(t,e.ut)}Bb(t,e){e.length!==0?(this.Rb.set(t,e.filter(Pi)),this.Db.set(t,e[e.length-1].ut)):(this.Rb.delete(t),this.Db.delete(t))}Vb(){for(const t of this.Ob)t.pointData.yb.size===0&&this.Pb.delete(this.N_.key(t.time))}Ib(t){let e=-1;for(let s=0;s<this.Ob.length&&s<t.length;++s){const n=this.Ob[s],r=t[s];if(this.N_.key(n.time)!==this.N_.key(r.time)){e=s;break}r.timeWeight=n.timeWeight,Us(r.pointData,s)}if(e===-1&&this.Ob.length!==t.length&&(e=Math.min(this.Ob.length,t.length)),e===-1)return-1;for(let s=e;s<t.length;++s)Us(t[s].pointData,s);return this.N_.fillWeightsForPoints(t,e),this.Ob=t,e}Nb(){if(this.Rb.size===0)return null;let t=0;return this.Rb.forEach(e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].se))}),t}zb(t,e,s){const n={Fb:new Map,yt:{Au:this.Nb()}};if(e!==-1)this.Rb.forEach((r,h)=>{n.Fb.set(h,{He:r,Wb:h===t?s:void 0})}),this.Rb.has(t)||n.Fb.set(t,{He:[],Wb:s}),n.yt.jb=this.Ob,n.yt.Hb=e;else{const r=this.Rb.get(t);n.Fb.set(t,{He:r||[],Wb:s})}return n}}function Us(i,t){i.se=t,i.yb.forEach(e=>{e.se=t})}function jn(i){const t={value:i.Vt[3],time:i.bb};return i.kb!==void 0&&(t.customValues=i.kb),t}function mh(i){const t=jn(i);return i.O!==void 0&&(t.color=i.O),t}function Kf(i){const t=jn(i);return i._t!==void 0&&(t.lineColor=i._t),i.Ts!==void 0&&(t.topColor=i.Ts),i.Ps!==void 0&&(t.bottomColor=i.Ps),t}function Jf(i){const t=jn(i);return i.Pe!==void 0&&(t.topLineColor=i.Pe),i.Re!==void 0&&(t.bottomLineColor=i.Re),i.Se!==void 0&&(t.topFillColor1=i.Se),i.ke!==void 0&&(t.topFillColor2=i.ke),i.ye!==void 0&&(t.bottomFillColor1=i.ye),i.Ce!==void 0&&(t.bottomFillColor2=i.Ce),t}function Qo(i){const t={open:i.Vt[0],high:i.Vt[1],low:i.Vt[2],close:i.Vt[3],time:i.bb};return i.kb!==void 0&&(t.customValues=i.kb),t}function Xf(i){const t=Qo(i);return i.O!==void 0&&(t.color=i.O),t}function Yf(i){const t=Qo(i),{O:e,Bt:s,$h:n}=i;return e!==void 0&&(t.color=e),s!==void 0&&(t.borderColor=s),n!==void 0&&(t.wickColor=n),t}function un(i){return{Area:Kf,Line:mh,Baseline:Jf,Histogram:mh,Bar:Xf,Candlestick:Yf,Custom:Gf}[i]}function Gf(i){const t=i.bb;return Object.assign(Object.assign({},i.He),{time:t})}const Qf={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},Zf={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},td={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Rn},$s={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},ed={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0},id={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Rn,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function gh(){return{width:0,height:0,autoSize:!1,layout:td,crosshair:Qf,grid:Zf,overlayPriceScales:Object.assign({},$s),leftPriceScale:Object.assign(Object.assign({},$s),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},$s),{visible:!0}),timeScale:ed,watermark:id,localization:{locale:Be?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class sd{constructor(t,e){this.$b=t,this.Ub=e}applyOptions(t){this.$b.qt().zc(this.Ub,t)}options(){return this.Li().W()}width(){return cs(this.Ub)?this.$b.nb(this.Ub):0}Li(){return x(this.$b.qt().Ec(this.Ub)).At}}function vh(i,t,e){const s=Go(i,["time","originalTime"]),n=Object.assign({time:t},s);return e!==void 0&&(n.originalTime=e),n}const nd={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class rd{constructor(t){this.Bh=t}applyOptions(t){this.Bh.Nh(t)}options(){return this.Bh.W()}qb(){return this.Bh}}class hd{constructor(t,e,s,n,r){this.Yb=new et,this.Es=t,this.Xb=e,this.Kb=s,this.N_=r,this.Zb=n}S(){this.Yb.S()}priceFormatter(){return this.Es.ca()}priceToCoordinate(t){const e=this.Es.Pt();return e===null?null:this.Es.At().Ot(t,e.Vt)}coordinateToPrice(t){const e=this.Es.Pt();return e===null?null:this.Es.At().pn(t,e.Vt)}barsInLogicalRange(t){if(t===null)return null;const e=new Ne(new Ze(t.from,t.to)).iu(),s=this.Es.In();if(s.Fi())return null;const n=s.nl(e.Os(),1),r=s.nl(e.di(),-1),h=x(s.Qh()),o=x(s.Bn());if(n!==null&&r!==null&&n.se>r.se)return{barsBefore:t.from-h,barsAfter:o-t.to};const l={barsBefore:n===null||n.se===h?t.from-h:n.se-h,barsAfter:r===null||r.se===o?o-t.to:o-r.se};return n!==null&&r!==null&&(l.from=n.bb,l.to=r.bb),l}setData(t){this.N_,this.Es.Xh(),this.Xb.Gb(this.Es,t),this.Jb("full")}update(t){this.Es.Xh(),this.Xb.Qb(this.Es,t),this.Jb("update")}dataByIndex(t,e){const s=this.Es.In().nl(t,e);return s===null?null:un(this.seriesType())(s)}data(){const t=un(this.seriesType());return this.Es.In().ie().map(e=>t(e))}subscribeDataChanged(t){this.Yb.l(t)}unsubscribeDataChanged(t){this.Yb.v(t)}setMarkers(t){this.N_;const e=t.map(s=>vh(s,this.N_.convertHorzItemToInternal(s.time),s.time));this.Es.Zl(e)}markers(){return this.Es.Gl().map(t=>vh(t,t.originalTime,void 0))}applyOptions(t){this.Es.Nh(t)}options(){return qt(this.Es.W())}priceScale(){return this.Kb.priceScale(this.Es.At().xa())}createPriceLine(t){const e=kt(qt(nd),t),s=this.Es.Jl(e);return new rd(s)}removePriceLine(t){this.Es.Ql(t.qb())}seriesType(){return this.Es.Xh()}attachPrimitive(t){this.Es.ba(t),t.attached&&t.attached({chart:this.Zb,series:this,requestUpdate:()=>this.Es.qt().$l()})}detachPrimitive(t){this.Es.wa(t),t.detached&&t.detached()}Jb(t){this.Yb.M()&&this.Yb.m(t)}}class od{constructor(t,e,s){this.tw=new et,this.uu=new et,this._m=new et,this.Ui=t,this.wl=t.yt(),this.$m=e,this.wl.Ku().l(this.iw.bind(this)),this.wl.Zu().l(this.nw.bind(this)),this.$m.gm().l(this.sw.bind(this)),this.N_=s}S(){this.wl.Ku().p(this),this.wl.Zu().p(this),this.$m.gm().p(this),this.tw.S(),this.uu.S(),this._m.S()}scrollPosition(){return this.wl.Eu()}scrollToPosition(t,e){e?this.wl.qu(t,1e3):this.Ui.Jn(t)}scrollToRealTime(){this.wl.Uu()}getVisibleRange(){const t=this.wl.yu();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.N_.convertHorzItemToInternal(t.from),to:this.N_.convertHorzItemToInternal(t.to)},s=this.wl.Ru(e);this.Ui.ld(s)}getVisibleLogicalRange(){const t=this.wl.ku();return t===null?null:{from:t.Os(),to:t.di()}}setVisibleLogicalRange(t){oe(t.from<=t.to,"The from index cannot be after the to index."),this.Ui.ld(t)}resetTimeScale(){this.Ui.Zn()}fitContent(){this.Ui.Qu()}logicalToCoordinate(t){const e=this.Ui.yt();return e.Fi()?null:e.Et(t)}coordinateToLogical(t){return this.wl.Fi()?null:this.wl.Vu(t)}timeToCoordinate(t){const e=this.N_.convertHorzItemToInternal(t),s=this.wl.ya(e,!1);return s===null?null:this.wl.Et(s)}coordinateToTime(t){const e=this.Ui.yt(),s=e.Vu(t),n=e.qi(s);return n===null?null:n.originalTime}width(){return this.$m.$p().width}height(){return this.$m.$p().height}subscribeVisibleTimeRangeChange(t){this.tw.l(t)}unsubscribeVisibleTimeRangeChange(t){this.tw.v(t)}subscribeVisibleLogicalRangeChange(t){this.uu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.uu.v(t)}subscribeSizeChange(t){this._m.l(t)}unsubscribeSizeChange(t){this._m.v(t)}applyOptions(t){this.wl.Nh(t)}options(){return Object.assign(Object.assign({},qt(this.wl.W())),{barSpacing:this.wl.he()})}iw(){this.tw.M()&&this.tw.m(this.getVisibleRange())}nw(){this.uu.M()&&this.uu.m(this.getVisibleLogicalRange())}sw(t){this._m.m(t.width,t.height)}}function ld(i){if(i===void 0||i.type==="custom")return;const t=i;t.minMove!==void 0&&t.precision===void 0&&(t.precision=function(e){if(e>=1)return 0;let s=0;for(;s<8;s++){const n=Math.round(e);if(Math.abs(n-e)<1e-8)return s;e*=10}return s}(t.minMove))}function bh(i){return function(t){if(yi(t.handleScale)){const s=t.handleScale;t.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:n}=t.handleScale;yi(s)&&(t.handleScale.axisPressedMouseMove={time:s,price:s}),yi(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;yi(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(i),i}class cd{constructor(t,e,s){this.ew=new Map,this.rw=new Map,this.hw=new et,this.lw=new et,this.aw=new et,this.ow=new Hf(e);const n=s===void 0?qt(gh()):kt(qt(gh()),bh(s));this.N_=e,this.$b=new Vf(t,n,e),this.$b.Fp().l(h=>{this.hw.M()&&this.hw.m(this._w(h()))},this),this.$b.Wp().l(h=>{this.lw.M()&&this.lw.m(this._w(h()))},this),this.$b.Wc().l(h=>{this.aw.M()&&this.aw.m(this._w(h()))},this);const r=this.$b.qt();this.uw=new od(r,this.$b.Zm(),this.N_)}remove(){this.$b.Fp().p(this),this.$b.Wp().p(this),this.$b.Wc().p(this),this.uw.S(),this.$b.S(),this.ew.clear(),this.rw.clear(),this.hw.S(),this.lw.S(),this.aw.S(),this.ow.S()}resize(t,e,s){this.autoSizeActive()||this.$b.qm(t,e,s)}addCustomSeries(t,e){const s=Oe(t),n=Object.assign(Object.assign({},Oo),s.defaultOptions());return this.cw("Custom",n,e,s)}addAreaSeries(t){return this.cw("Area",Ju,t)}addBaselineSeries(t){return this.cw("Baseline",Xu,t)}addBarSeries(t){return this.cw("Bar",Hu,t)}addCandlestickSeries(t={}){return function(e){e.borderColor!==void 0&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),e.wickColor!==void 0&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor)}(t),this.cw("Candlestick",qu,t)}addHistogramSeries(t){return this.cw("Histogram",Yu,t)}addLineSeries(t){return this.cw("Line",Ku,t)}removeSeries(t){const e=at(this.ew.get(t)),s=this.ow.hd(e);this.$b.qt().hd(e),this.dw(s),this.ew.delete(t),this.rw.delete(e)}Gb(t,e){this.dw(this.ow.Ab(t,e))}Qb(t,e){this.dw(this.ow.Eb(t,e))}subscribeClick(t){this.hw.l(t)}unsubscribeClick(t){this.hw.v(t)}subscribeCrosshairMove(t){this.aw.l(t)}unsubscribeCrosshairMove(t){this.aw.v(t)}subscribeDblClick(t){this.lw.l(t)}unsubscribeDblClick(t){this.lw.v(t)}priceScale(t){return new sd(this.$b,t)}timeScale(){return this.uw}applyOptions(t){this.$b.Nh(bh(t))}options(){return this.$b.W()}takeScreenshot(){return this.$b.tb()}autoSizeActive(){return this.$b.rb()}chartElement(){return this.$b.hb()}paneSize(){const t=this.$b.ab();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,s){const n=this.ew.get(s);if(n===void 0)return;const r=this.$b.qt().cr(n);r!==null&&this.$b.qt().Qc(t,e,r)}clearCrosshairPosition(){this.$b.qt().td(!0)}cw(t,e,s={},n){ld(s.priceFormat);const r=kt(qt(To),qt(e),s),h=this.$b.qt().ed(t,r,n),o=new hd(h,this,this,this,this.N_);return this.ew.set(o,h),this.rw.set(h,o),o}dw(t){const e=this.$b.qt();e.nd(t.yt.Au,t.yt.jb,t.yt.Hb),t.Fb.forEach((s,n)=>n.it(s.He,s.Wb)),e.Iu()}fw(t){return at(this.rw.get(t))}_w(t){const e=new Map;t.Mb.forEach((n,r)=>{const h=r.Xh(),o=un(h)(n);if(h!=="Custom")oe(function(l){return l.open!==void 0||l.value!==void 0}(o));else{const l=r.Ma();oe(!l||l(o)===!1)}e.set(this.fw(r),o)});const s=t.gb===void 0?void 0:this.fw(t.gb);return{time:t.bb,logical:t.se,point:t.wb,hoveredSeries:s,hoveredObjectId:t.xb,seriesData:e,sourceEvent:t.Sb}}}function ud(i,t,e){let s;if(ai(i)){const r=document.getElementById(i);oe(r!==null,`Cannot find element in DOM with id=${i}`),s=r}else s=i;const n=new cd(s,t,e);return t.setOptions(n.options()),n}function ad(i,t){return ud(i,new nh,nh.Td(t))}Object.assign(Object.assign({},To),Oo);const Zo=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e},fd={class:"candles"},dd={class:"time-frame"},pd=["onClick"],md={class:"legend"},gd={__name:"Candles",props:["symbol"],setup(i){const t=i,e=Eo(),s=Lo(),{candles:n}=Pn(s);console.log("render candles");const r=fe("1m"),h=fe(""),o=fe(null),l=ri(()=>n.value.map(g=>({time:parseFloat((g.t-new Date(g.t).getTimezoneOffset()*6e4)/1e3),open:parseFloat(g.o),close:parseFloat(g.c),high:parseFloat(g.h),low:parseFloat(g.l),value:parseFloat(g.c)}))),c=fe({high:"XXX",low:"XXX",open:"XXX",close:"XXX"});ro(()=>{d()});let u,a;function d(){u=ad(o.value,{layout:{background:{type:rn.Solid,color:"#161a1e"},textColor:"rgba(255,255,255,0.3)"},width:o.value.clientWidth,height:o.value.clientHeight,crosshair:{mode:1,vertLine:{color:"rgba(255,255,255,0.5)"},horzLine:{color:"rgba(255,255,255,0.5)"}},grid:{vertLines:{visible:!1},horzLines:{color:"rgba(255,255,255,0.1)"}},timeScale:{borderColor:"rgba(255,255,255,0.3)",timeVisible:!0},rightPriceScale:{borderColor:"rgba(255,255,255,0.3)"},watermark:{text:"Zachary made this chart!!!",color:"rgba(255,255,255,0.1)",visible:!0}}),a=u.addCandlestickSeries({upColor:"#0ec37c",downColor:"#e84459",borderVisible:!1}),a.setData(l.value),u.subscribeCrosshairMove(g=>{try{if(!g.time)return;const v=g.seriesData.values().next().value,{open:y,high:L,low:z,close:P}=v;c.value={high:L,low:z,open:y,close:P}}catch{}}),window.addEventListener("resize",()=>{u.applyOptions({width:o.value.clientWidth,height:o.value.clientHeight})}),u.timeScale().fitContent()}function m(g){s.setCandles([]),r.value=g}return ze(l,()=>{a&&a.setData(l.value)},{immediate:!0}),ze([r,()=>t.symbol,e],(g,v)=>{h.value&&e.sendSocketMessage({id:1,method:"unsubscribe",params:{channels:[h.value]},nonce:1654784123465});const y=`candlestick.${r.value}.${t.symbol}`;e.sendSocketMessage({id:1,method:"subscribe",params:{channels:[y]},nonce:1654784123465}),h.value=y},{immediate:!1,deep:!0}),(g,v)=>(_t(),It("div",fd,[yt("h1",null,Et(i.symbol),1),yt("div",dd,[(_t(!0),It(dt,null,Vi(Object.keys(jt(Fu)),y=>(_t(),It("span",{key:`timeFrame_${y}`,class:Xi({selected:r.value===y}),onClick:L=>m(y)},Et(y),11,pd))),128))]),yt("div",md," high: "+Et(c.value.high)+", low: "+Et(c.value.low)+", open: "+Et(c.value.open)+", close: "+Et(c.value.close),1),yt("div",{ref_key:"candleChartEl",ref:o,class:"chart"},null,512)]))}},vd=Zo(gd,[["__scopeId","data-v-fc850865"]]),bd={key:0,class:"order-book"},wd={__name:"OrderBook",props:{symbol:{type:String,required:!0}},setup(i){const t=kn(),e=i,{orderBook:s,requestNum:n,displayNum:r}=Pn(t),h=ri(()=>{var l;return(l=s.value.get(e.symbol))==null?void 0:l.asks}),o=ri(()=>{var l;return(l=s.value.get(e.symbol))==null?void 0:l.bids});return(l,c)=>o.value&&h.value?(_t(),It("div",bd,[yt("h1",null,Et(i.symbol),1),(_t(!0),It(dt,null,Vi(jt(r),u=>(_t(),It("div",{key:`ask${u}`,class:"asks"},[yt("div",null,Et(h.value[jt(n)-jt(r)-u][0]),1),yt("div",null,Et(h.value[jt(n)-jt(r)-u][1]),1)]))),128)),(_t(!0),It(dt,null,Vi(jt(r),u=>(_t(),It("div",{key:`bid${u}`,class:"bids"},[yt("div",null,Et(o.value[u-1][0]),1),yt("div",null,Et(o.value[u-1][1]),1)]))),128))])):qc("",!0)}},_d=Zo(wd,[["__scopeId","data-v-ab1e8933"]]),yd={class:"order-books-wrapper"},Sd={__name:"App",setup(i){const t=Eo(),e=kn(),{symbolList:s,requestNum:n}=Pn(e);return t.initWebsocket({id:1,method:"subscribe",params:{channels:s.value.map(r=>`book.${r}.${n.value}`)},nonce:1654784123465}),(r,h)=>(_t(),It(dt,null,[Vt(vd,{symbol:"BTCUSD-PERP"}),yt("div",yd,[(_t(!0),It(dt,null,Vi(jt(s),(o,l)=>(_t(),bo(_d,{key:`orderBook${l}`,symbol:o},null,8,["symbol"]))),128))])],64))}},tl=Cu(Sd);tl.use(Tu());tl.mount("#app");
